(function(e){function t(t){for(var o,s,i=t[0],l=t[1],c=t[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&h.push(a[s][0]),a[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);p&&p(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},a={concordanceApp:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var p=l;r.push([1,"chunk-vendors","chunk-common"]),n()})({1:function(e,t,n){e.exports=n("174e")},"174e":function(e,t,n){"use strict";n.r(t);var o=n("a026"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"font-default",attrs:{id:"concordanceApp"}},[n("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,(function(t,o){return n("b-alert",{key:o,staticStyle:{display:"flex"},attrs:{variant:t.variant,show:t.countdown||!t.shouldCountdown,dismissible:!t.shouldCountdown,fade:""},on:{dismissed:function(n){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:0})},"dismiss-count-down":function(n){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:n})}}},[n("div",{staticStyle:{flex:"1"},domProps:{innerHTML:e._s(t.text)}}),t.buttonText?n("div",{staticClass:"fontWeight-heavy"},[n("a",{attrs:{href:""},domProps:{innerHTML:e._s(t.buttonText)},on:{click:function(e){return e.preventDefault(),t.buttonHandler(t,e)}}})]):e._e()])})),1),e.loadingGlobal||e.loading?n("loading-indicator-full"):e._e(),e.loaded?[n("the-navbar",{ref:"navbar",attrs:{title:"Concordances",reduced:!0}}),n("div",{staticClass:"main"},[n("div",{staticClass:"flexbox-row"},[n("div",{staticClass:"mappingTool order3",attrs:{id:"mappingTool"}},[n("div",{staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingBrowserComponent"}},[n("mapping-browser",{ref:"mappingBrowser",attrs:{"show-navigator":!1,"show-editing-tools":!1,"show-registry-override":["http://coli-conc.gbv.de/registry/coli-conc-mappings"],"show-cocoda-link":!0}})],1)])])])]:e._e()],2)},r=[],s=n("3a0b"),i=n("ef0f"),l=n("2ef0"),c=n.n(l),p=n("a4fe"),d=n("622d"),h=n("a189"),u=n("616f"),f=n("564d");const m=n("ae72");m.listen();var g={name:"ConcordanceApp",components:{TheNavbar:s["a"],MappingBrowser:i["a"],LoadingIndicatorFull:p["a"]},mixins:[h["a"],u["a"],f["a"]],data(){return{loaded:!1,loading:!1,loadFromParametersOnce:c.a.once(this.loadFromParameters)}},computed:{locale(){return this.$i18n.locale},settingsLocale(){return"en"}},watch:{locale(e,t){e!=t&&(this.$store.commit({type:"settings/set",prop:"locale",value:e}),c.a.delay(()=>{this.insertPrefLabel(!0),this.insertPrefLabel(!1)},300))},settingsLocale(e){e!=this.locale&&(this.$i18n.locale=e)}},created(){this.load()},methods:{async load(){const e=new Date;this.loadingGlobal=!0,await this.$store.dispatch("loadConfig",c.a.get(this.$route,"query.config")),await this.$store.dispatch("settings/load"),document.title=this.config.title,this.$i18n.locale=this.settingsLocale,await this.loadSchemes(),this.loaded=!0,this.loadingGlobal=!1,this.loadFromParametersOnce(!0);for(let t of this.config.registries)c.a.isArray(t.schemes)&&(t._jskos.schemes=t.schemes.map(e=>this.schemes.find(t=>this.$jskos.compare(t,e))||e));this.$log.log(`Application loaded in ${(new Date-e)/1e3} seconds.`)},loadFromParameters(e=!1){this.loading=!0;let t,n=this.$route.query,o=[];try{t=JSON.parse(n["mapping"])}catch(a){t=null}if(t&&e)for(let r of["from","to"])n[r+"Scheme"]||(n[r+"Scheme"]=c.a.get(t[r+"Scheme"],"uri"),this.$jskos.conceptsOfMapping(t,r).length&&(n[r]=c.a.get(this.$jskos.conceptsOfMapping(t,r),"[0].uri")));if(n.mapping||n.mappingUri){let e=new Promise(e=>{let t=null;try{t=this.$jskos.normalize(JSON.parse(n["mapping"]))}catch(a){}c.a.isEqual(t,{})?e(null):e(t)}),t=(n.mappingUri?this.getMapping({uri:n.mappingUri}):n.mappingIdentifier?this.getMappings({identifier:n.mappingIdentifier}):Promise.resolve([])).then(t=>{if(c.a.isArray(t)||(t=[t].filter(e=>e)),(n.mappingUri||n.mappingIdentifier)&&t.length){let n=t.find(e=>c.a.get(e,"_registry").isAuthorizedFor&&c.a.get(e,"_registry").isAuthorizedFor({type:"mappings",action:"create",user:this.user}))||t[0];return e.then(this.adjustMapping).then(e=>e?[e,n]:[n,n])}return e.then(this.adjustMapping).then(e=>[e])}),r=["from","to"],s=["memberSet","memberList","memberChoice"];o.push(t.then(([e,t=null])=>{let n=[];for(let o of r){let t=e[o+"Scheme"];for(let a of s)Array.isArray(e[o][a])&&c.a.forEach(e[o][a],(r,s)=>{n.push(this.loadConcepts([r],{scheme:t}).then(([t])=>{e[o][a][s]=t}))})}return Promise.all(n).then(()=>{this.$store.commit({type:"mapping/set",mapping:e,original:t,noQueryRefresh:!0})})}))}Promise.all(o).then(()=>{if(this.loading=!1,Object(d["b"])(this.$store),e)if(n.search){let e=JSON.parse(n.search);this.searchMappings(e)}else this.showConcordances()}).catch(e=>{this.loading=!1,this.$log.warn(e),this.alert("There was an error loading data from URL.",null,"danger")})},searchMappings(e){let t=this.$refs.mappingBrowser;t&&t.searchWithParams&&t.searchWithParams(e)},showMappingSearch(){this.forceMappingBrowser=!0,this.searchMappings({})},showConcordances(){let e=this.$refs.mappingBrowser;if(e)if(e.concordancesLoaded)null!=e.tabIndexes.concordances&&(this.forceMappingBrowser=!0,e.tab=e.tabIndexes.concordances);else{let t;this.loadingGlobal=!0,t=this.$watch(()=>e.concordancesLoaded,()=>{this.loadingGlobal=!1,null!=e.tabIndexes.concordances&&(this.forceMappingBrowser=!0,e.tab=e.tabIndexes.concordances),t&&t()})}else this.$log.warn("Could not show concordances because MappingBrowser component was not found.")}}},b=g,w=(n("833f"),n("2877")),y=Object(w["a"])(b,a,r,!1,null,null,null),v=y.exports,C=n("4360"),$=n("41cb"),M=n("79fa");n("f9e3"),n("2dd8");n("56d7"),new o["default"]({el:"#concordanceApp",store:C["a"],router:$["a"],components:{ConcordanceApp:v},template:"<ConcordanceApp/>",i18n:M["a"]})},"5c90":function(e,t,n){},"833f":function(e,t,n){"use strict";n("5c90")}});
(function(e){function t(t){for(var s,a,r=t[0],l=t[1],c=t[2],h=0,d=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],s=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(s=!1)}s&&(o.splice(t--,1),e=a(a.s=i[0]))}return e}var s={},n={app:0},o=[];function a(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=s,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var p=l;o.push([0,"chunk-vendors","chunk-common"]),i()})({0:function(e,t,i){e.exports=i("bd14")},"0229":function(e,t,i){},"0397":function(e,t,i){"use strict";i("9fce")},1329:function(e,t,i){},2395:function(e,t,i){},"291e":function(e,t,i){"use strict";i("cce3")},"2f83":function(e,t,i){"use strict";i("c6cd")},"30c6":function(e,t,i){},3218:function(e,t,i){"use strict";i("30c6")},"32be":function(e,t,i){},"357f":function(e,t,i){"use strict";i("58f5")},3710:function(e,t,i){"use strict";i("1329")},3873:function(e,t,i){},"398f":function(e,t,i){},"440f":function(e,t,i){},"47f0":function(e){e.exports=JSON.parse('[{"uri":"http://w3id.org/nkos/nkostype#gazetteer","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["gazetteer"],"prefLabel":{"en":"Gazetteer","de":"Gazetteer"},"altLabel":{"de":["Ortsverzeichnis","Ortslexikon"]},"scopeNote":{"en":["geospatial dictionary of named and typed places"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#glossary","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["glossary"],"prefLabel":{"en":"Glossary","de":"Glossar"},"scopeNote":{"en":["a collection of textual glosses or of specialized terms with their meanings"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#categorization_schema","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["categorization_schema"],"prefLabel":{"en":"Categorization schema","de":"Kategorienschema"},"scopeNote":{"en":["schedule of concepts and pre-coordinated combinations of concepts, arranged by classification"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#classification_schema","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["classification_schema"],"prefLabel":{"en":"Classification schema","de":"Klassifikation"},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#list","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["list"],"prefLabel":{"en":"List","de":"Liste"},"scopeNote":{"en":["a limited set of terms arranged as a simple alphabetical list or in some other logically evident way; containing no relationships of any kind"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#name_authority_list","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["name_authority_list"],"prefLabel":{"en":"Name authority list","de":"Namensdatei"},"scopeNote":{"en":["controlled vocabulary for use in naming particular entities consistently"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#ontology","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["ontology"],"prefLabel":{"en":"Ontology","de":"Ontologie"},"scopeNote":{"en":["A formal model that allows knowledge to be represented for a specific domain. An ontology describes the types of things that exist (classes), the relationships between them (properties) and the logical ways those classes and properties can be used together (axioms)"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#subject_heading_scheme","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["subject_heading_scheme"],"prefLabel":{"en":"Subject heading scheme","de":"Schlagwortliste"},"scopeNote":{"en":["structured vocabulary comprising terms available for subject indexing, plus rules for combining them into pre-coordinated strings of terms where necessary"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#semantic_network","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["semantic_network"],"prefLabel":{"en":"Semantic network","de":"Semantisches Netz"},"scopeNote":{"en":["set of terms representing concepts, modeled as the nodes in a network of variable relationship types"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#synonym_ring","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["synonym_ring"],"prefLabel":{"en":"Synonym ring","de":"Synset"},"scopeNote":{"en":["set of synonymous or almost synonymous terms, any of which can be used to refer to a particular concept"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#taxonomy","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["taxonomy"],"prefLabel":{"en":"Taxonomy","de":"Taxonomie"},"scopeNote":{"en":["scheme of categories and subcategories that can be used to sort and otherwise organize items of knowledge or information"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#terminology","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["terminology"],"prefLabel":{"en":"Terminology","de":"Terminologie"},"scopeNote":{"en":["set of designations belonging to one special language [ISO 1087-1:2000, definition 3.5.1]"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#thesaurus","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["thesaurus"],"prefLabel":{"en":"Thesaurus","de":"Thesaurus"},"scopeNote":{"en":["controlled and structured vocabulary in which concepts are represented by terms, organized so that relationships between concepts are made explicit, and preferred terms are accompanied by lead-in entries for synonyms or quasi-synonyms"]},"narrower":[]},{"uri":"http://w3id.org/nkos/nkostype#dictionary","type":["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json","inScheme":[{"uri":"http://w3id.org/nkos/nkostype","prefLabel":{"de":"KOS Typ Vokabular"},"type":["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],"publisher":[{"prefLabel":{"de":"DCMI/NKOS Task Group"}}],"notation":["dictionary"],"prefLabel":{"en":"Dictionary","de":"Wörterbuch"},"scopeNote":{"en":["a reference source containing words usually alphabetically arranged along with information about their forms, pronunciations, functions, etymologies, meanings, and syntactical and idiomatic uses"]},"narrower":[]}]')},"48b1":function(e,t,i){},"4a6b":function(e,t,i){},"4d52":function(e,t,i){"use strict";i("440f")},"4f79":function(e,t,i){"use strict";i("48b1")},"58f5":function(e,t,i){},"5f3b":function(e,t,i){},"65b7":function(e,t,i){},6779:function(e,t,i){"use strict";i("32be")},"69ee":function(e,t,i){},"6aea":function(e,t,i){"use strict";i("69ee")},"7c55":function(e,t,i){"use strict";i("2395")},"9fce":function(e,t,i){},a6bd:function(e,t,i){},b298:function(e,t,i){"use strict";i("3873")},bd14:function(e,t,i){"use strict";i.r(t);var s=i("a026"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"font-default",attrs:{id:"app"}},[i("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,(function(t,s){return i("b-alert",{key:s,staticStyle:{display:"flex"},attrs:{variant:t.variant,show:t.countdown||!t.shouldCountdown,dismissible:!t.shouldCountdown,fade:""},on:{dismissed:function(i){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:0})},"dismiss-count-down":function(i){return e.$store.commit({type:"alerts/setCountdown",alert:t,countdown:i})}}},[i("div",{staticStyle:{flex:"1"},domProps:{innerHTML:e._s(t.text)}}),t.buttonText?i("div",{staticClass:"fontWeight-heavy"},[i("a",{attrs:{href:""},domProps:{innerHTML:e._s(t.buttonText)},on:{click:function(e){return e.preventDefault(),t.buttonHandler(t,e)}}})]):e._e()])})),1),e.loadingGlobal||e.loading?i("loading-indicator-full"):e._e(),e.loaded?[i("the-navbar",{ref:"navbar"}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1],expression:"selected.scheme[true] || selected.scheme[false]"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.swapSides"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.swapSides'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],attrs:{id:"swapSides"},on:{click:e.swapSides}},[i("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),i("div",{staticClass:"main"},[e.config.error?i("div",{staticClass:"flexbox-row configError fontSize-large"},[i("div",{domProps:{innerHTML:e._s(e.$t("general."+e.config.error,e.config))}})]):e.schemes.length?i("div",{staticClass:"flexbox-row"},[e._l([!0,!1],(function(t,s){return i("div",{key:"browser-"+s,staticClass:"browser mainComponent",class:{order1:t,order5:!t},attrs:{id:"browserComponent_"+t}},[i("minimizer",{attrs:{name:"browserComponent_"+t,"is-column":!0}}),i("concept-scheme-selection",{ref:t?"conceptSchemeSelectionLeft":"conceptSchemeSelectionRight",refInFor:!0,staticClass:"mainComponent visualComponent",style:null!=e.selected.scheme[t]?"":"flex: 1;",attrs:{"is-left":t}}),null!=e.selected.scheme[t]?i("div",{staticClass:"conceptBrowser"},[i("item-detail",{staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemDetail",attrs:{id:"itemDetailComponent_"+t,item:e.selected.concept[t]||e.selected.scheme[t],"is-left":t,settings:e.itemDetailSettings[t?"left":"right"]},on:{searchMappings:function(t){return e.searchMappings(t)},searchConcept:function(i){return e.setConceptSearchQuery(t,i,!0)}}}),i("resizing-slider"),i("concept-list-wrapper",{ref:t?"conceptListLeft":"conceptListRight",refInFor:!0,staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemList",attrs:{id:"conceptListComponent_"+t,"is-left":t}})],1):e._e()],1)})),e.mappingRegistries.length>0?i("resizing-slider",{staticClass:"order2",attrs:{"is-column":!0}}):e._e(),e.mappingRegistries.length>0?i("div",{staticClass:"mappingTool order3",attrs:{id:"mappingTool"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0||!e.forceMappingBrowser,expression:"selected.scheme[true] || selected.scheme[false] || (forceMappingBrowser && $store.getters['mapping/getConcepts']().length > 0) || !forceMappingBrowser"}],staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingEditorComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0?i("mapping-editor"):i("div",{staticClass:"placeholderComponentCenter"},[i("div",{staticClass:"fontWeight-heavy fontSize-large"},[i("p",[e._v(e._s(e.$t("general.welcome")))]),i("p",[i("a",{attrs:{href:"./user-manual-"+e.locale+".html",target:"_blank"}},[e._v(e._s(e.$t("general.manual")))]),e._v(" - "),i("a",{attrs:{href:"https://gbv.github.io/cocoda/",target:"_blank"}},[e._v(e._s(e.$t("general.documentation")))]),e._v(" - "),i("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[e._v(e._s(e.$t("general.github")))])]),e.config.feedbackUrl?i("p",[i("br"),i("a",{attrs:{href:e.config.feedbackUrl,target:"_blank"}},[e._v(e._s(e.$t("general.feedback")))]),i("br"),e._v(" "+e._s(e.$t("general.feedback2"))+" ")]):e._e(),e.forceMappingBrowser?e._e():i("hr"),e.forceMappingBrowser?e._e():i("p",[e.$refs.mappingBrowser&&e.$refs.mappingBrowser.tabIndexes&&null!=e.$refs.mappingBrowser.tabIndexes.concordances?i("span",[i("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.showConcordances.apply(null,arguments)}}},[e._v(e._s(e.$t("general.showConcordances")))]),e._v(" - ")]):e._e(),i("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.showMappingSearch.apply(null,arguments)}}},[e._v(e._s(e.$t("general.showMappingSearch")))])])])]),i("minimizer",{directives:[{name:"show",rawName:"v-show",value:!e.forceMappingEditor,expression:"!forceMappingEditor"}],ref:"mappingEditorMinimizer",attrs:{name:"mappingEditorComponent",text:e.$t("mappingEditor.title"),"force-minimized":!e.forceMappingEditor&&null}})],1),i("resizing-slider",{directives:[{name:"show",rawName:"v-show",value:(e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser)&&(e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0||!e.forceMappingBrowser),expression:"(selected.scheme[true] || selected.scheme[false] || forceMappingBrowser) && (selected.scheme[true] || selected.scheme[false] || (forceMappingBrowser && $store.getters['mapping/getConcepts']().length > 0) || !forceMappingBrowser)"}],attrs:{"cocoda-red":!0}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser,expression:"selected.scheme[true] || selected.scheme[false] || forceMappingBrowser"}],staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingBrowserComponent"}},[i("mapping-browser",{ref:"mappingBrowser"}),i("minimizer",{ref:"mappingBrowserMinimizer",attrs:{name:"mappingBrowserComponent",text:e.$t("mappingBrowser.title")}})],1)],1):e._e(),e.mappingRegistries.length>0?i("resizing-slider",{staticClass:"order4",attrs:{"is-column":!0}}):e._e()],2):e._e()])]:e._e()],2)},o=[],a=i("3a0b"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.canSaveCurrentMapping?"mappingEditor-notSaved":e.canExportCurrentMapping&&!e.hasChangedFromOriginal?"mappingEditor-saved":"CurrentMappingEditor-cantSave",attrs:{id:"mappingEditor"}},[i("component-settings",{attrs:{tooltip:e.$t("mappingEditor.settingsButton")}}),e.canSaveCurrentMapping?i("div",{staticClass:"mappingEditor-mappingNotSaved fontSize-small fontWeight-heavy"},[e._v(" "+e._s(e.$jskos.prefLabel(e.$store.getters.getCurrentRegistry))+": "+e._s(e.$t("mappingEditor.notSaved"))+" ")]):e._e(),i("div",{staticClass:"mappingEditorToolbar"},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSwapCurrentMapping?e.$t("mappingEditor.swapMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canSwapCurrentMapping ? $t('mappingEditor.swapMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSwapCurrentMapping,"button-disabled":!e.canSwapCurrentMapping},on:{click:e.swapMapping}},[i("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSaveCurrentMapping?e.$t("mappingEditor.saveMapping",[e.$jskos.prefLabel(e.currentRegistry)]):"",delay:e.defaults.delay.medium},expression:"{ title: canSaveCurrentMapping ? $t('mappingEditor.saveMapping', [$jskos.prefLabel(currentRegistry)]) : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSaveCurrentMapping,"button-disabled":!e.canSaveCurrentMapping},on:{click:e.saveCurrentMapping}},[i("font-awesome-icon",{attrs:{icon:"save"}})],1),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canDeleteCurrentMapping?e.$t("mappingEditor.deleteMapping"):!e.$store.getters.getCurrentRegistry.has.auth||e.$store.getters.getCurrentRegistry.auth?"":e.$t("general.authNecessary"),delay:e.defaults.delay.medium},expression:"{ title: canDeleteCurrentMapping ? $t('mappingEditor.deleteMapping') : ((!$store.getters.getCurrentRegistry.has.auth || $store.getters.getCurrentRegistry.auth) ? '' : $t('general.authNecessary')), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{"button-delete":e.canDeleteCurrentMapping,"button-disabled":!e.canDeleteCurrentMapping},on:{click:e.deleteCurrentMapping}},[i("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canCloneCurrentMapping?e.$t("mappingEditor.cloneMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canCloneCurrentMapping ? $t('mappingEditor.cloneMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canCloneCurrentMapping,"button-disabled":!e.canCloneCurrentMapping},on:{click:e.cloneMapping}},[i("font-awesome-icon",{attrs:{icon:"clone"}})],1),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canClearCurrentMapping?e.$t("mappingEditor.clearMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canClearCurrentMapping ? $t('mappingEditor.clearMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canClearCurrentMapping,"button-disabled":!e.canClearCurrentMapping},on:{click:e.clearMapping}},[i("font-awesome-icon",{attrs:{icon:"ban"}})],1),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:e.mappingStatus.message||"",placement:"bottom"},expression:"{\n        title: mappingStatus.message || '',\n        placement: 'bottom'\n      }"}],staticClass:"mappingEditorToolbarItem mappingEditor-mappingAlert fontWeight-heavy",class:{"text-warning":e.mappingStatus.warning,"text-danger":e.mappingStatus.invalid}},[e.$jskos.conceptsOfMapping(e.mapping).length>0&&e.mappingStatus.message?i("font-awesome-icon",{attrs:{icon:"exclamation-circle"}}):e._e()],1)]),e._l([!0,!1],(function(t,s){return i("div",{key:s,staticClass:"mappingEditorPart",class:{"mappingEditorPart-noConcepts":null==e.$store.getters["mapping/getScheme"](t)||!e.$store.getters["mapping/getConcepts"](t).length,"mappingEditorPart-dropTarget":null!=e.$store.state.draggedConcept},style:{order:2*s},on:{dragover:e.dragOver,drop:function(i){return e.drop(i,t)}}},[null!=e.$store.getters["mapping/getScheme"](t)&&e.$store.getters["mapping/getConcepts"](t).length?i("div",[i("div",{staticClass:"mappingScheme fontWeight-heavy"},[i("item-name",{attrs:{item:e.$store.getters["mapping/getScheme"](t),"is-link":!0,"is-left":t,"show-text":!1}})],1),i("div",{staticClass:"mappingConceptList"},[i("div",[i("div",{staticStyle:{flex:"1"}}),i("ul",e._l(e.$store.getters["mapping/getConcepts"](t),(function(s,n){return i("li",{key:n},[i("item-name",{attrs:{item:s,"is-link":!0,"is-left":t,"is-highlighted":e.$jskos.compare(s,e.selected.concept[!0])||e.$jskos.compare(s,e.selected.concept[!1]),"show-popover":!0,"font-size":"large"}}),i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.removeConceptFromMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingEditor.removeConceptFromMapping'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button fontSize-large",on:{click:function(i){return e.$store.commit({type:"mapping/remove",concept:s,isLeft:t})}}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)})),0),i("div",{staticStyle:{flex:"1"}})])])]):i("div",[i("div",{staticClass:"mappingNoConcepts"},[null==e.$store.state.draggedConcept?i("div",{staticStyle:{"margin-bottom":"-12px"}},[e._v(" "+e._s(e.$t("mappingEditor.placeholder"))),i("br"),i("br")]):i("div",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.$t("mappingEditor.placeholderDragging"))+" ")]),null==e.$store.state.draggedConcept?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.isAddButtonEnabled(t)?e.$t("mappingEditor.addConcept"):"",delay:e.defaults.delay.medium},expression:"{ title: isAddButtonEnabled(isLeft) ? $t('mappingEditor.addConcept') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditor-addButton",class:{button:e.isAddButtonEnabled(t),"button-disabled":!e.isAddButtonEnabled(t)},on:{click:function(i){return e.addToMappingInternal(t)}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()])])])})),i("div",{staticClass:"mappingTypeSelection"},[i("mapping-type-selection",{attrs:{mapping:e.$store.state.mapping.mapping}})],1),i("div",{staticClass:"mappingEditor-creator fontSize-small"},[e._v(" "+e._s(e.creatorName)+" ")]),i("div",{staticClass:"mappingEditor-title"},[e._v(" "+e._s(e.$t("mappingEditor.title"))+" "),e.currentGuidelines?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.guidelines"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingEditor.guidelines'), delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[i("a",{attrs:{href:e.currentGuidelines.url,target:"_blank"}},[i("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)]):e._e()]),i("b-modal",{ref:"deleteModal",attrs:{title:e.$t("mappingEditor.deleteTitle"),"hide-footer":""}},[i("p",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.$t("mappingEditor.deleteText"))+" "),e.hasChangedFromOriginal?i("span",[i("br"),e._v(e._s(e.$t("mappingEditor.deleteChangesText"))+" ")]):e._e()]),i("div",{staticClass:"mappingEditor-deleteButtons"},[i("b-button",{attrs:{variant:"danger"},on:{click:function(t){e.deleteOriginalMapping(!0)&&e.$refs.deleteModal.hide()}}},[e._v(" "+e._s(e.$t("mappingEditor.deleteConfirm"))+" ")]),i("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$refs.deleteModal.hide()}}},[e._v(" "+e._s(e.$t("mappingEditor.cancel"))+" ")])],1)]),i("mapping-detail",{ref:"mappingDetail",attrs:{mapping:e.mapping}}),i("div",{staticClass:"mappingEditor-infoIcon"},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showDetail"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.showDetail'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"info-circle"},on:{click:function(t){return e.$refs.mappingDetail.show()}}})],1)],2)},l=[],c=i("68bc"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mappingTypes",on:{mouseover:function(t){e.hovered=!0},mouseout:function(t){e.hovered=!1}}},e._l(e.mappingTypes,(function(t){return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:{title:e.$jskos.prefLabel(t)+e.definition(t),delay:e.defaults.delay.medium},expression:"{ title: $jskos.prefLabel(mappingType) + definition(mappingType), delay: defaults.delay.medium }",modifiers:{hover:!0,right:!0}}],key:t.uri,staticClass:"mappingType",class:{mappingTypeSelected:e.hovered&&t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,"fontWeight-heavy":t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri,mappingTypeHovered:t&&e.mappingTypeHovered&&t.uri==e.mappingTypeHovered.uri},style:"display: "+(t&&e.mappingTypeSelected&&t.uri==e.mappingTypeSelected.uri||e.hovered?"inline-block":"none")+";",on:{click:function(i){return e.choose(t)}}},[e._v(" "+e._s(e.$jskos.notation(t))+" ")])})),0)},h=[],d={name:"MappingTypeSelection",props:{mapping:{type:Object,default:null}},data(){return{hovered:!1,mappingTypes:this.$jskos.mappingTypes,mappingTypeHovered:null}},computed:{mappingTypeSelected(){let e=this.mapping;return this.$jskos.mappingTypeByType(e?e.type:null)}},methods:{choose(e){this.$store.commit({type:"mapping/setType",uri:e.uri})},definition(e){let t=this.$jskos.definition(e);return t.length?": "+t.join(", "):""}}},m=d,u=(i("6779"),i("2877")),g=Object(u["a"])(m,p,h,!1,null,"e94da702",null),f=g.exports,v=i("2ef0"),y=i.n(v),b=i("1e4f"),w=i("40e1"),C=i("a189"),S=i("616f"),k=i("8fb2"),$={data(){return{hotkeys:[]}},methods:{shortcutHandler(){},enableShortcuts(){let e=this.$options.name,t=0;for(let i of this.config.shortcuts||[])i.component===e&&(this.addHotkey(i.keys,()=>{this.shortcutHandler(i)}),t+=1);t&&document.addEventListener("keydown",this.hotkeyHandler)},hotkeyHandler(e){let t=y.a.pick(e,["key","keyCode","metaKey","ctrlKey","altKey","shiftKey"]);if("INPUT"==y.a.get(e,"srcElement.tagName")){let e=[{key:"a",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1},{key:"a",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1},{key:"µ",ctrlKey:!1,metaKey:!1,altKey:!0,shiftKey:!1}],i=!1;for(let s of e){const e=s.key?"keyCode":"key";if(y.a.isEqual(y.a.omit(s,[e]),y.a.omit(t,[e]))){i=!0;break}}if(i)return}let i=!0;const s=document.getElementsByClassName("modal show");if(0==s.length)for(let n of this.hotkeys){const e=n.shortcut.key?"keyCode":"key";y.a.isEqual(y.a.omit(t,[e]),y.a.omit(n.shortcut,[e]))&&(i=n.handler()&&i)}i||(e.stopPropagation(),e.preventDefault(),e.returnValue=!1,e.cancelBubble=!0)},addHotkey(e,t){e=e.split(",");for(let i of e){let e=i.split("+"),s=null,n=null,o=!1,a=!1,r=!1,l=!1;for(let t of e)"ctrl"==t?a=!0:"alt"==t||"option"==t?r=!0:"meta"==t||"command"==t?o=!0:"shift"==t?l=!0:t.startsWith("keyCode:")?n=parseInt(t.replace("keyCode:","")):s=t;this.hotkeys.push({handler:t,shortcut:{key:s,keyCode:n,metaKey:o,ctrlKey:a,altKey:r,shiftKey:l}})}}}},_=i("564d"),L={name:"MappingEditor",components:{ItemName:c["a"],MappingTypeSelection:f,ComponentSettings:b["a"],MappingDetail:w["a"]},mixins:[C["a"],S["a"],k["a"],$,_["a"]],computed:{mapping(){return this.$store.state.mapping.mapping},original(){return this.$store.state.mapping.original},canSaveCurrentMapping(){return!this.mappingStatus.invalid&&(this.$store.getters["mapping/canUpdate"]?this.hasChangedFromOriginal:this.$store.getters["mapping/canCreate"])},canDeleteCurrentMapping(){return this.$store.getters["mapping/canDelete"]},canClearCurrentMapping(){return this.mapping.fromScheme||this.mapping.toScheme},canExportCurrentMapping(){return this.mapping.fromScheme&&this.mapping.toScheme},canSwapCurrentMapping(){return this.$jskos.conceptsOfMapping(this.mapping,"to").length<=1&&this.$jskos.conceptsOfMapping(this.mapping).length>0},canCloneCurrentMapping(){return null!=this.original.uri},mappingStatus(){const e=this.currentRegistry;if(!e.isAuthorizedFor({type:"mappings",action:"create",user:this.user}))return{message:this.$t("registryInfo.notAuthenticated")+` (${this.$jskos.prefLabel(e)})`,invalid:!0};for(let i of["fromScheme","toScheme"])if(!this.mapping[i])return{message:this.$t("mappingEditor.invalidMissing",[i]),invalid:!0};for(let i of["fromScheme","toScheme"]){const t=y.a.get(e,`config.mappings.${i}Whitelist`);if(t&&!t.find(e=>this.$jskos.compare(e,this.mapping[i])))return{message:this.$t("mappingEditor.invalidWhitelist",[`${i} ${this.$jskos.prefLabel(this.mapping[i],{fallbackToUri:!1})||""}`,this.$jskos.prefLabel(e)]),invalid:!0}}const t=y.a.get(e,"config.mappings.cardinality");if("1-to-1"==t&&this.$jskos.conceptsOfMapping(this.mapping,"to").length>1)return{message:this.$t("mappingEditor.invalid1to1",[this.$jskos.prefLabel(e)]),invalid:!0};if(this.original.uri&&!this.$jskos.compare(e,this.original.registry))return{message:this.$t("mappingEditor.warningUpdateRegistry",[this.$jskos.prefLabel(this.original.registry),this.$jskos.prefLabel(e)]),warning:!0};if(this.original.uri&&!this.$store.getters["mapping/canUpdate"])return{message:this.$t("mappingEditor.warningUpdateNotAllowed"),warning:!0};for(let i of["fromScheme","toScheme"])if(this.original.uri&&!this.$jskos.compare(this.mapping[i],this.original.mapping[i]))return{message:this.$t("mappingEditor.warningUpdateScheme",[i]),warning:!0};return{message:null,invalid:!1,warning:!1}},mappingEncoded(){return encodeURIComponent(JSON.stringify(this.prepareMapping()))},hasChangedFromOriginal(){return this.$store.getters["mapping/hasChangedFromOriginal"]},schemeRight(){return this.selected.scheme[!1]},currentGuidelines(){return(this.config.guidelines||[]).find(e=>this.$jskos.compare(e.fromScheme,this.selected.scheme[!0])&&this.$jskos.compare(e.toScheme,this.selected.scheme[!1]))}},watch:{mappingEncoded(){let e=y.a.get(this.$el.parentElement.getElementsByClassName("minimizer"),"[0].__vue__");e&&e.toggleMinimize(!1),this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},schemeRight(){this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},creator(){this.setCreator()},"original.uri"(){this.setCreator()}},mounted(){this.enableShortcuts(),this.setCreator()},methods:{shortcutHandler({action:e,isLeft:t}){switch(e){case"saveMapping":this.saveCurrentMapping();break;case"clearMapping":this.clearMapping();break;case"addConcept":this.addToMappingInternal(t);break}},async saveCurrentMapping(){if(!this.canSaveCurrentMapping)return!1;this.creator?this.setCreator():this.removeCreator();const e=this.original.uri&&this.$jskos.compare(this.currentRegistry,this.original.registry),t=await this[e?"putMapping":"postMapping"]({registry:this.currentRegistry,mapping:this.mapping,_before:()=>{this.loadingGlobal=!0},_after:()=>{this.loadingGlobal=!1}});this.$store.commit({type:"mapping/set",original:t}),this.componentSettings.clearOnSave&&this.clearMapping()},setCreator(){let e=(this.mapping.contributor||[]).concat((this.mapping.creator||[]).filter(e=>!(this.creator.uri&&e.uri&&this.creator.uri==e.uri)&&!(this.creatorName&&this.$jskos.prefLabel(e,{fallbackToUri:!1})&&this.creatorName==this.$jskos.prefLabel(e,{fallbackToUri:!1})))),t=[this.creator];this.$store.commit({type:"mapping/setCreator",creator:t}),this.$store.commit({type:"mapping/setContributor",contributor:e})},removeCreator(){let e=(this.mapping.contributor||[]).concat(this.mapping.creator||[]);this.$store.commit({type:"mapping/setCreator",creator:null}),this.$store.commit({type:"mapping/setContributor",contributor:e})},deleteCurrentMapping(){return!!this.canDeleteCurrentMapping&&(this.$refs.deleteModal.show(),!0)},async deleteOriginalMapping(e=!1){return await this.deleteMapping({mapping:this.mapping,_before:()=>{this.loadingGlobal=!0},_after:()=>{this.loadingGlobal=!1}}),e&&this.clearMapping(),!0},clearMapping(){return!!this.canClearCurrentMapping&&(this.$store.commit({type:"mapping/empty"}),!0)},labelForScheme(e){return this.$jskos.notation(e,"scheme")},isAddButtonEnabled(e){return this.$store.getters["mapping/canAdd"](this.selected.concept[e],this.selected.scheme[e],e)},isDeleteAllButtonEnabled(e){return this.$store.getters["mapping/getConcepts"](e).length>0},addButtonDisabledReason(e){let t=e?this.selected.concept[!0]:this.selected.concept[!1];return this.$store.getters["mapping/checkScheme"](e?this.selected.scheme[!0]:this.selected.scheme[!1],e)?null==t?"Please select a concept.":this.$store.getters["mapping/added"](t,e)?"Selected concept is already in mapping.":"Other reason.":"Scheme does not match."},addToMappingInternal(e){if(!this.isAddButtonEnabled(e))return;let t=e?this.selected.concept[!0]:this.selected.concept[!1];this.addToMapping({concept:t,scheme:this.selected.scheme[e],isLeft:e})},deleteAll(e){this.$store.commit({type:"mapping/removeAll",isLeft:e})},droppedConcept(e,t){this.$jskos.isConcept(e)&&(this.addToMapping({concept:e,scheme:e.inScheme&&e.inScheme[0]||this.selected.scheme[t],isLeft:t}),this.loadConcepts([e]))},swapMapping(){this.canSwapCurrentMapping&&this.$store.commit({type:"mapping/switch"})},cloneMapping(){let e=this.$jskos.copyDeep(this.mapping);delete e.uri,this.$store.commit({type:"mapping/set",original:null}),this.$store.commit({type:"mapping/set",mapping:e})}}},x=L,M=(i("3218"),i("2f83"),Object(u["a"])(x,r,l,!1,null,"3af73640",null)),j=M.exports,I=i("ef0f"),D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptListWrapper",style:0==e.concepts.length?"min-height: 80px; max-height: 80px;":""},[i("tabs",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},attrs:{value:e.currentChoiceIndex,fill:""},on:{change:e.tabChanged},scopedSlots:e._u([{key:"title",fn:function(t){return[i("span",[e._v(" "+e._s(t.tab.title)+" ")])]}}])},e._l(e.dataChoices,(function(t,s){return i("tab",{key:"conceptListWrapper-dataChoice-"+s,staticStyle:{position:"relative"},attrs:{title:t.label,hidden:t!==e.currentChoice},nativeOn:{dragover:function(t){return e.dragOver.apply(null,arguments)},drop:function(i){return e.drop(i,t.droppedConcept)},scroll:function(t){return e.loadConceptsInView.apply(null,arguments)}}},[i("concept-list",{ref:"conceptList",refInFor:!0,attrs:{"is-left":e.isLeft,concepts:t.concepts,"show-children":t.showChildren,"show-scheme":t.showScheme,"no-items-label":t.noItemsLabel,buttons:t.buttons,shown:s==e.currentChoiceIndex}})],1)})),1),e.dataChoices.filter((function(e){return e.available})).length>1?i("div",{staticClass:"button conceptListWrapper-listSelectionButton",attrs:{id:"conceptListWrapper-listSelectionButton-"+e.isLeft}},[i("font-awesome-icon",{attrs:{icon:"chevron-up"}})],1):e._e(),i("component-settings"),i("data-modal-button",{attrs:{data:e.minimizeConcepts(e.currentChoice.concepts),"position-right":20,"position-bottom":0,type:"concept",url:e.currentChoice.url}}),i("b-popover",{ref:"listSelectionPopover",attrs:{placement:"top",show:e.listSelectionPopoverShow,target:"conceptListWrapper-listSelectionButton-"+e.isLeft},on:{"update:show":function(t){e.listSelectionPopoverShow=t}}},[i("div",{attrs:{id:"conceptListWrapper-listSelectionPopover-"+e.isLeft}},e._l(e.dataChoices,(function(t,s){return i("div",{directives:[{name:"show",rawName:"v-show",value:t.available,expression:"choice.available"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:t.tooltip,delay:e.defaults.delay.medium,html:!0},expression:"{ title: choice.tooltip, delay: defaults.delay.medium, html: true }",modifiers:{hover:!0}}],key:"conceptListWrapper-listSelectionPopover-"+e.isLeft+"-"+s,class:{"fontWeight-heavy":t===e.currentChoice,"conceptListWrapper-listSelectionPopover-choice":!0},on:{click:function(t){return e.chooseIndex(s)}}},[i("div",{staticClass:"fontSize-small",staticStyle:{display:"inline-block",width:"18px"}},[i("font-awesome-icon",{attrs:{icon:t.icon}})],1),e._v(" "+e._s(t.label)+" ")])})),0)]),e.currentChoice.reloadButton?i("div",{staticClass:"dataModalButton fontSize-small conceptListWrapper-reloadButton",on:{click:e.reloadList}},[i("font-awesome-icon",{attrs:{icon:"sync-alt"}})],1):e._e(),e.loading?i("loading-indicator-full"):e._e(),e.concepts.length>0?i("minimizer",{attrs:{name:"conceptList_"+e.isLeft,text:e.currentChoice.label}}):e._e()],1)},F=[],T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"minimizer"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.minimized,expression:"!minimized"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.minimize"),delay:e.defaults.delay.medium},expression:"{ title: $t('minimizer.minimize'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"utilityButton minimizeButton",on:{click:function(t){return e.toggleMinimize()},mouseover:function(t){e.minimizeHovered=!0},mouseout:function(t){e.minimizeHovered=!1}}},[i("font-awesome-icon",{attrs:{icon:"window-minimize"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.minimized,expression:"minimized"}],staticClass:"minimizedOverlay",on:{click:function(t){return e.toggleMinimize()}}},[i("div",[e._v(" "+e._s(e.text)+" "),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.maximize"),delay:e.defaults.delay.medium},expression:"{ title: $t('minimizer.maximize'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"maximizeButton"},[i("font-awesome-icon",{attrs:{icon:"plus-square"}})],1)])]),e.minimizeHovered?i("div",{staticClass:"minimizedHoverOverlay"}):e._e()])},O=[],E={name:"Minimizer",mixins:[_["a"]],props:{name:{type:String,default:null},text:{type:String,default:""},isColumn:{type:Boolean,default:!1},forceMinimized:{type:Boolean,default:null}},data(){return{previousFlex:"",previousMinSizes:[],minimizedLocal:!1,minimizerSize:"40px",minimizeHovered:!1}},computed:{minimized:{get(){return null!=this.forceMinimized?this.forceMinimized:null!=this.name?this.$settings.minimized[this.name]||!1:this.minimizedLocal},set(e){if(null!=this.name){let t=y.a.cloneDeep(this.$settings.minimized);t[this.name]=e,this.$store.commit({type:"settings/set",prop:"minimized",value:t})}else this.minimizedLocal=e}}},watch:{minimized(){this.refreshMinimize()}},mounted(){this.refreshMinimize()},methods:{toggleMinimize(e=null){this.minimized=null!=e?e:!this.minimized},refreshMinimize(){this.minimized&&(this.previousMinSizes=[]);let e=this.$el;while(!e.classList.contains("mainComponent"))if(e=e.parentElement,this.minimized){let t,i=window.getComputedStyle(e);t=this.isColumn?i.getPropertyValue("min-width"):i.getPropertyValue("min-height"),this.previousMinSizes.push({element:e,minSize:t}),this.isColumn?(e.style.minWidth=this.minimizerSize,e.style.maxWidth=this.minimizerSize):(e.style.minHeight=this.minimizerSize,e.style.maxHeight=this.minimizerSize)}let t=window.getComputedStyle(e);if(this.minimized){e.classList.add("mainComponent-minimized"),this.previousFlex=t.getPropertyValue("flex"),e.style.flex="0 1 "+this.minimizerSize,e.dataset.minimized=1,this.refresh("minimize");let i=window.getComputedStyle(this.$el.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index");for(let t of e.getElementsByClassName("minimizer"))if(t!=this.$el){let e=t.__vue__;e.minimized&&window.getComputedStyle(t.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index")>=i&&(t.getElementsByClassName("minimizedOverlay")[0].style.zIndex=i-1)}}else{e.classList.remove("mainComponent-minimized"),e.style.flex=this.previousFlex;for(let e of this.previousMinSizes)this.isColumn?(e.element.style.minWidth=e.minSize,e.element.style.maxWidth=""):(e.element.style.minHeight=e.minSize,e.element.style.maxHeight="");e.dataset.minimized=0,this.refresh("minimize")}}}},z=E,N=(i("4d52"),Object(u["a"])(z,T,O,!1,null,"1137645c",null)),B=N.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptList",style:"margin-bottom: "+(e.noItems?0:30)+"px;"},[i("div",{ref:"conceptListItems",staticClass:"conceptListItems"},e._l(e.items,(function(t,s){var n=t.concept,o=t.depth,a=t.isSelected;return i("concept-list-item",{key:"conceptListItems-"+e.isLeft+"-"+s,attrs:{concept:n,depth:o,"is-selected":a,index:s,"is-left":e.isLeft,"show-children":e.showChildren,"show-scheme":e.showScheme,buttons:e.buttons}})})),1),e.noItems?i("div",{staticClass:"conceptListItems-noItems"},[e._v(" "+e._s(e.noItemsLabel||e.$t("conceptList.noItems"))+" ")]):e._e(),e.loading||e.concepts.includes(null)?i("loading-indicator-full"):e._e()],1)},P=[],R=i("a4fe"),H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.concept?i("div",{staticClass:"conceptListItem",class:{hovered:e.isHovered&&!e.isHovered,selected:e.isSelected,"concept-mappingsExist":e.showConceptMappedStatus&&e.mappedStatus,"concept-mappingsDoNotExist":e.showConceptMappedStatus&&!e.mappedStatus},style:"padding-left: "+10*e.depth+"px",attrs:{"data-uri":e.concept.uri},on:{mouseover:function(t){return e.hovering(e.concept)},mouseout:function(t){return e.hovering(null)}}},[i("div",{staticClass:"conceptBox",attrs:{draggable:"true"},on:{dragstart:function(t){return e.dragStart(e.concept,t)},dragend:function(t){return e.dragEnd()}}},[e.showChildren&&e.hasChildren?i("div",{staticClass:"arrowBox",on:{click:function(t){return e.openByArrow(!e.isOpen)}}},[i("i",{class:{right:!e.isOpen,down:e.isOpen}})]):e._e(),e._l(e.buttons.filter((function(e){return"before"==e.position})),(function(t,s){return i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:t.tooltip,delay:e.defaults.delay.medium},expression:"{ title: button.tooltip, delay: defaults.delay.medium}",modifiers:{hover:!0}}],key:"conceptListItem-buttons-"+s,staticClass:"button fontSize-verySmall conceptListItem-buttonBefore",on:{click:function(i){return t.onClick(i,e.concept)}}},[i("font-awesome-icon",{attrs:{icon:t.icon}})],1)})),i(e.url?"router-link":"div",{tag:"div",staticClass:"labelBox",class:{labelBoxFull:e.showChildren&&!e.hasChildren,labelBoxSelected:e.isSelected,labelBoxSingle:!e.showChildren},attrs:{to:e.url},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.onClick.apply(null,arguments)}}},[e.scheme&&e.showScheme?i("span",[e._v(" "+e._s(e.$jskos.notation(e.scheme))+" ")]):e._e(),e.concept&&-1==e.concept.__DETAILSLOADED__?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.unknownConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.unknownConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"fontSize-small"},[i("font-awesome-icon",{attrs:{icon:"bolt"}})],1):e._e(),e.concept&&e.concept.type&&e.concept.type.includes("http://rdf-vocabulary.ddialliance.org/xkos#CombinedConcept")?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.combinedConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.combinedConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"fontSize-normal"},[i("font-awesome-icon",{attrs:{icon:"puzzle-piece"}})],1):e._e(),i("span",{staticClass:"fontWeight-heavy",domProps:{innerHTML:e._s(e.getNotation(e.concept,"concept",!0))}}),i("span",{class:{"fontWeight-medium":e.isSelected}},[e._v(" "+e._s(e.$jskos.prefLabel(e.concept,{fallbackToUri:0==e.$jskos.notation(e.concept).length}))+" ")])]),e.canAddToMapping?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: defaults.delay.medium}",modifiers:{hover:!0}}],staticClass:"addToMapping",on:{click:function(t){return e.addConcept()}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()],2),e.showChildren&&e.hasChildren&&e.isOpen&&e.concept.narrower.includes(null)?i("loading-indicator",{staticStyle:{"margin-left":"36px"},attrs:{size:"sm"}}):e._e()],1):e._e()},V=[],U=i("b758"),W={name:"ConceptListItem",components:{LoadingIndicator:U["a"],ItemName:c["a"]},mixins:[S["a"],k["a"]],props:{concept:{type:Object,default:null},depth:{type:Number,default:null},index:{type:Number,default:null},isLeft:{type:Boolean,default:!0},isSelected:{type:Boolean,default:!1},showChildren:{type:Boolean,default:!1},showScheme:{type:Boolean,default:!1},buttons:{type:Array,default:()=>[]}},data(){return{isHoveredFromHere:!1,loadingChildren:!1,preventClick:!1,preventClickArrow:!1,canAddToMapping:!1,interval:null,url:null}},computed:{hasChildren(){return 0!=y.a.get(this.concept,"narrower.length",1)},isHovered(){return this.isHoveredFromHere},childrenLoaded(){return!this.concept.narrower||!this.concept.narrower.includes(null)},isOpen(){return y.a.get(this.concept,`__ISOPEN__[${this.isLeft}]`,!1)},scheme(){return y.a.get(this.concept,"inScheme[0]")},mappedStatus(){return this.$store.getters.mappedStatus(this.concept,this.isLeft)},showConceptMappedStatus(){return this.$store.state.settings.settings.components.ConceptListWrapper.loadConceptsMappedStatus}},created(){this.hovering=y.a.debounce(this._hovering,20)},methods:{_hovering(e){this.$store.commit({type:"setHoveredConcept",concept:e}),this.isHoveredFromHere=null!=e,this.canAddToMapping=this.$store.getters["mapping/canAdd"](this.concept,this.$store.state.selected.scheme[this.isLeft],this.isLeft),window.clearInterval(this.interval),null!=e&&(this.interval=setInterval(()=>{this.isMouseOver()||(this.isHoveredFromHere=!1,window.clearInterval(this.interval))},500)),this.url=e?this.getRouterUrl(e,this.isLeft,!0):null},openByArrow(e){this.preventClickArrow||(this.open(this.concept,this.isLeft,e),this.loadChildren(),this.preventClickArrow=!0,y.a.delay(()=>{y.a.delay(()=>{this.preventClickArrow=!1},200)},50))},select(e){this.setSelected({isLeft:this.isLeft,concept:e})},onClick(){this.preventClick||this.isSelected&&this.hasChildren&&(this.preventClick=!0,y.a.delay(()=>{this.open(this.concept,this.isLeft,!this.isOpen),y.a.delay(()=>{this.preventClick=!1},200)},50))},addConcept(){!this.isSelected&&this.$store.state.settings.settings.components.ConceptListWrapper.addToMappingSelectsConcept&&this.select(this.concept),this.addToMapping({concept:this.concept,scheme:this.$store.state.selected.scheme[this.isLeft],isLeft:this.isLeft})},loadChildren(){this.loadingChildren=!0,this.loadNarrower(this.concept).then(e=>{this.loadingChildren=!1,this.showChildren&&e&&e.__ISOPEN__&&e.__ISOPEN__[this.isLeft]&&this.scrollTo()})},scrollTo(){let e=this.$el.parentElement;while(!e.classList.contains("scrollable")){if(!e.parentElement)break;e=e.parentElement}var t={container:e,easing:"ease-in",offset:-20,cancelable:!0,x:!1,y:!0};this.$scrollTo(this.$el,200,t)}}},K=W,G=(i("4f79"),Object(u["a"])(K,H,V,!1,null,"23cb50c0",null)),q=G.exports,Q=i("2e22"),J={mixins:[S["a"]],computed:{loadConceptsMappedStatus(){return this.$store.state.settings.settings.components.ConceptListWrapper.loadConceptsMappedStatus},loadConceptsMappedStatusOtherScheme(){return y.a.isBoolean(this.isLeft)?this.$store.state.selected.scheme[!this.isLeft]:null}},created(){this.loadMappingsForConcepts=y.a.debounce(this._loadMappingsForConcepts,300)},watch:{loadConceptsMappedStatusConceptsToLoad(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},currentRegistry(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},loadConceptsMappedStatusOtherScheme(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},loadConceptsMappedStatus(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])}},methods:{_loadMappingsForConcepts(e){if(!this.loadConceptsMappedStatus)return;const t=this.currentRegistry,i=this.loadConceptsMappedStatusOtherScheme;e=e.filter(e=>!y.a.get(e,"__MAPPED__",[]).find(e=>this.$jskos.compare(e.registry,t)&&this.$jskos.compare(e.scheme,i)));const s=e.map(e=>e.uri);i&&s.length&&Promise.all(y.a.chunk(s,15).map(e=>this.getMappings({from:e.join("|"),toScheme:i.uri,direction:"both",registry:t.uri,limit:500}))).then(()=>{for(let s of e.filter(e=>!y.a.get(e,"__MAPPED__",[]).find(e=>this.$jskos.compare(e.registry,t)&&this.$jskos.compare(e.scheme,i))))this.$set(s,"__MAPPED__",[]),s.__MAPPED__.push({registry:t,scheme:i,exist:[]})})}}},X={name:"ConceptList",components:{LoadingIndicatorFull:R["a"],ConceptListItem:q},mixins:[S["a"],_["a"],J],props:{isLeft:{type:Boolean,default:!0},concepts:{type:Array,default:()=>[null]},showChildren:{type:Boolean,default:!1},noItemsLabel:{type:String,default:null},showScheme:{type:Boolean,default:!1},buttons:{type:Array,default:()=>[]},shown:{type:Boolean,default:!1}},data(){return{loading:!1,currentSelectedConcept:null,shouldScroll:!0,scrollTo:Object(Q["a"])(),oldPreviousConcept:null,oldNextConcept:null}},computed:{schemeSelected(){return this.selected.scheme[this.isLeft]},conceptSelected(){return this.selected.concept[this.isLeft]},items(){let e=[];for(let t of this.concepts){let i={concept:t,depth:0,isSelected:this.$jskos.compare(this.conceptSelected,t)};if(e.push(i),this.showChildren){let t=this.children(i);e=e.concat(t)}}return e},noItems(){return 0==this.items.length&&!this.loading},itemsLength(){return this.items.length},otherScheme(){return this.selected.scheme[!this.isLeft]},loadConceptsMappedStatusConceptsToLoad(){return this.items.filter(e=>e.concept).map(e=>e.concept)},previousConcept(){const e=this.items.findIndex(e=>this.$jskos.compare(e.concept,this.conceptSelected));if(-1==e)return null;if(!this.showChildren){const t=this.items[e-1];return t&&t.concept}return null},nextConcept(){const e=this.items.findIndex(e=>this.$jskos.compare(e.concept,this.conceptSelected));if(-1==e)return null;if(!this.showChildren){const t=this.items[e+1];return t&&t.concept}const t=(e,i=!0)=>{if(!e)return null;if(i&&e.narrower&&e.narrower.length)return e.narrower[0];const s=y.a.last(e.ancestors)||y.a.first(e.broader);let n=y.a.get(s,"narrower");if(s||(n=this.items.filter(e=>0==e.depth).map(e=>e.concept)),!n)return null;const o=n[n.findIndex(t=>this.$jskos.compare(t,e))+1];return o||(s?t(s,!1):null)};return t(this.selected.concept[this.isLeft])}},watch:{conceptSelected:{handler(){let e=this.conceptSelected;if(e!=this.currentSelectedConcept&&(this.currentSelectedConcept=e,this.shouldScroll=!0),this.$jskos.isConcept(e))if(!this.showChildren||e.ancestors&&!e.ancestors.includes(null)){let t=!0;for(let i of e.ancestors||[])!this.showChildren||i.narrower&&!i.narrower.includes(null)||(t=!1);if(t&&this.shouldScroll){if(this.shouldScroll=!1,this.showChildren)for(let e of this.conceptSelected.ancestors||[])this.open(e,this.isLeft,!0);y.a.delay(()=>{if(this.shouldScroll)return;let t=this.$refs.conceptListItems.querySelectorAll(`[data-uri='${e.uri}']`)[0],i=this.$refs.conceptListItems;while(null!=i&&!i.classList.contains("cocoda-vue-tabs-content"))i=i.parentElement;var s={container:i,easing:"ease-in",offset:-50,cancelable:!0,x:!1,y:!0};t&&this.scrollToInternal(t,s),this.loading=!1},100)}else t||(this.loading=!0)}else this.loading=!0},deep:!0},itemsLength(){this.loadMappingsForItems()},shown(){this.commitPreviousConcept(),this.commitNextConcept()},previousConcept(){this.$jskos.compare(this.previousConcept,this.oldPreviousConcept)||(this.commitPreviousConcept(),this.oldPreviousConcept=this.previousConcept)},nextConcept(){this.$jskos.compare(this.nextConcept,this.oldNextConcept)||(this.commitNextConcept(),this.oldNextConcept=this.nextConcept)}},methods:{commitPreviousConcept(){this.shown&&this.$store.commit({type:"selected/setPreviousConcept",isLeft:this.isLeft,concept:this.previousConcept})},commitNextConcept(){this.shown&&this.$store.commit({type:"selected/setNextConcept",isLeft:this.isLeft,concept:this.nextConcept})},scrollToInternal(e,t){let i=t.container;"none"==i.style.display?this.scrollLater={el:e,options:t}:(this.scrollTo(e,200,t),this.scrollLater=null)},scroll(){this.scrollLater&&this.$nextTick(()=>{this.scrollToInternal(this.scrollLater.el,this.scrollLater.options)})},children(e){let t=[],i=e.concept,s=e.depth+1;if(i&&i.__ISOPEN__&&i.__ISOPEN__[this.isLeft])for(let n of i.narrower){let e={concept:n,depth:s,isSelected:this.$jskos.compare(this.conceptSelected,n)};t.push(e),t=t.concat(this.children(e))}return t},loadMappingsForItems(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad,this.isLeft)}}},Y=X,Z=(i("f696"),Object(u["a"])(Y,A,P,!1,null,"ba49e394",null)),ee=Z.exports,te=i("d8c4"),ie=i("193e"),se={name:"ConceptListWrapper",components:{Minimizer:B,ConceptList:ee,ComponentSettings:b["a"],DataModalButton:te["a"],LoadingIndicatorFull:R["a"]},mixins:[_["a"],S["a"],k["a"],ie["a"]],props:{isLeft:{type:Boolean,default:!0}},data(){return{listSelectionPopoverShow:!1,loading:0}},computed:{dataChoices(){let e=y.a.get(this.selected.scheme[this.isLeft],"_registry.top");e&&(e+="?uri="+encodeURIComponent(this.selected.scheme[this.isLeft].uri));let t=[{id:"topConcepts",label:this.$t("conceptList.topConceptsShort"),tooltip:this.$t("conceptList.topConcepts"),noItemsLabel:this.$t("schemeDetail.noTopConcepts"),concepts:this._topConcepts,showChildren:!0,showScheme:!1,url:e,available:this._topConcepts.length>0,icon:"sitemap"},{id:"favoriteConcepts",label:this.$t("conceptList.favoriteConceptsShort"),tooltip:this.$t("conceptList.favoriteConcepts"),concepts:this.favoriteConcepts,showChildren:!1,showScheme:!0,available:!0,buttons:[{position:"before",icon:"times-circle",tooltip:this.$t("schemeSelection.starRemove"),onClick:(e,t)=>{this.$store.dispatch("removeConceptFromFavorites",t)}}],droppedConcept:e=>{this.$store.dispatch("addConceptToFavorites",e)},icon:"star"}],i=0;for(let s of this.config.conceptLists||[]){if(s.schemes&&!s.schemes.find(e=>this.$jskos.compare(e,this.selected.scheme[this.isLeft]))){i+=1;continue}let e=this.$jskos.notation(s),n=this.$jskos.prefLabel(s),o="";e&&(n&&(o=`<b>${n}</b><br>`),n=e),o+=this.$jskos.languageMapContent(s,"scopeNote")||"";let a={id:"custom-"+i,label:n,tooltip:o,concepts:s.concepts.map(e=>this.saveObject(e,{type:"concept"})),showChildren:!1,showScheme:!0,url:s.url||s.conceptsUrl,available:s.concepts.length>0,icon:"list"};a.reloadButton=null!=a.url,t.push(a),i+=1}return t},_topConcepts(){let e=y.a.get(this.selected.scheme[this.isLeft],"uri",null);return y.a.get(this.topConcepts,e)||[]},concepts(){return this.currentChoice.concepts},currentChoice:{get(){let e=this.$settings.conceptListChoice[this.isLeft];return this.dataChoices.find(t=>t.id===e&&t.available)||this.dataChoices.find(e=>e.available)},set(e){this.$store.commit({type:"settings/set",prop:`conceptListChoice[${this.isLeft}]`,value:e.id})}},currentChoiceIndex:{get(){return this.dataChoices.findIndex(e=>e===this.currentChoice)},set(e){this.currentChoice=this.dataChoices[e]}}},created(){this.loadConceptsInView=y.a.debounce(this._loadConceptsInView,300)},methods:{chooseIndex(e){this.currentChoiceIndex=e,this.listSelectionPopoverShow=!1},tabChanged({index:e}){let t=y.a.get(this,`$refs.conceptList[${e}]`);t&&t.scroll&&t.scroll(),this.loadConceptsInView()},droppedConcept(e,t){t&&t(e)},_loadConceptsInView(){let e=[],t=y.a.get(this,`$refs.conceptList[${this.currentChoiceIndex}]`),i=y.a.get(t,"$parent.$el");if(t&&t.$children&&i)for(let s of t.$children){if(!s||!s.$el)continue;const t=s.$el;this.checkInView(i,t)&&e.push(s.concept)}this.loadConcepts(e)},checkInView(e,t,i=!0){let s=e.scrollTop,n=s+e.clientHeight,o=t.offsetTop,a=o+t.clientHeight,r=o>=s&&a<=n,l=i&&(o<s&&a>s||a>n&&o<n);return r||l},minimizeConcepts(e){let t=[];for(let i of e){if(!i)continue;let e={uri:i.uri,notation:i.notation};i.inScheme&&i.inScheme[0]&&i.inScheme[0].uri&&(e.inScheme=[{uri:i.inScheme[0].uri}]),t.push(e)}return t},hoverHandlers(){return[{elements:[document.getElementById("conceptListWrapper-listSelectionButton-"+this.isLeft),document.getElementById("conceptListWrapper-listSelectionPopover-"+this.isLeft)],delta:5,handler:e=>{this.listSelectionPopoverShow=e}}]},async reloadList(){this.loading+=1;let e=await this.$store.dispatch("loadConceptLists");this.$store.commit({type:"setConfig",option:"conceptLists",value:e}),this.loading-=1}}},ne=se,oe=(i("c66b"),Object(u["a"])(ne,D,F,!1,null,null,null)),ae=oe.exports,re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"itemDetail",on:{dragover:e.dragOver,drop:e.drop}},[i("minimizer",{attrs:{name:"itemDetail_"+e.isLeft,text:e.type+" Detail"}}),null!=e.item?i("div",{staticClass:"itemDetail-content"},[i("Concept"==e.type?"ConceptDetail":"SchemeDetail",{tag:"component",attrs:{item:e.item,"is-left":e.isLeft,settings:e.internalSettings},on:{searchMappings:function(t){return e.$emit("searchMappings",t)},searchConcept:function(t){return e.$emit("searchConcept",t)}}})],1):e.loading?e._e():i("div",{staticClass:"fillAndCenter fontSize-normal fontWeight-heavy"},[e._v(" "+e._s(e.$t("itemDetail.pleaseSelect"))+" ")]),i("component-settings"),i("data-modal-button",{attrs:{data:e.item,"position-right":20,url:e.apiUrl}}),e.loading?i("loading-indicator-full"):e._e()],1)},le=[],ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return null!=e.item?i("div",{staticClass:"conceptDetail"},[i("div",{staticClass:"conceptDetail-ancestors"},[e.ancestors.length>3&&!e.settings.showAllAncestors?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAncestors?e.$t("conceptDetail.showLessAncestors"):e.$t("conceptDetail.showAllAncestors"),delay:e.defaults.delay.medium},expression:"{ title: showAncestors ? $t('conceptDetail.showLessAncestors') : $t('conceptDetail.showAllAncestors'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-ancestors-expand",on:{click:function(t){e.showAncestors=!e.showAncestors}}},[i("font-awesome-icon",{attrs:{icon:e.showAncestors?"angle-down":"angle-right"}})],1):e._e(),e._l(e.ancestors.filter((function(e){return null!=e})),(function(t,s){return i("div",{key:"conceptDetail-"+e.isLeft+"-ancesters-"+t.uri+"-"+s,class:{"concept-mappingsExist":(e.showAncestors||e.settings.showAllAncestors||0==s||s==e.ancestors.length-1||e.ancestors.length<=3)&&e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(t,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(t,e.isLeft)}},[e.showAncestors||e.settings.showAllAncestors||0==s||s==e.ancestors.length-1||e.ancestors.length<=3?i("span",[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-up-alt"}}),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1):1==s?i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.showAllAncestors"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.showAllAncestors'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-ancestors-more button",on:{click:function(t){e.showAncestors=!0}}},[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"ellipsis-v"}})],1):e._e()])})),e._l((0==e.ancestors.length&&e.item.__BROADERLOADED__?e.broader:[]).filter((function(e){return null!=e})),(function(t,s){return i("div",{key:"conceptDetail-"+e.isLeft+"-broader-"+t.uri+"-"+s,class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(t,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(t,e.isLeft)}},[i("font-awesome-icon",{attrs:{icon:"sort-up"}}),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)})),0!=e.ancestors.length&&e.ancestors.includes(null)||0==e.ancestors.length&&0!=e.broader.length&&!e.item.__BROADERLOADED__?i("loading-indicator",{attrs:{size:"sm"}}):e._e()],2),i("div",{staticClass:"conceptDetail-name",class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(e.item,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(e.item,e.isLeft)}},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.clearConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.clearConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-name-clearButton",on:{click:function(t){e.$router.push({path:e.getRouterUrl(e.selected.scheme[e.isLeft],e.isLeft)})}}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),i("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.defaults.delay.medium},expression:"{ title: $jskos.isContainedIn(item, favoriteConcepts) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"pointer fontSize-verySmall",class:e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?"starFavorite":"starNormal",attrs:{icon:"star"},on:{click:function(t){e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?e.$store.dispatch("removeConceptFromFavorites",e.item):e.$store.dispatch("addConceptToFavorites",e.item)}}}),e.showAddToMappingButton?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-name-addButton",class:{button:e.showAddToMappingButton},on:{click:function(t){e.addToMapping({concept:e.item,scheme:e.item.inScheme&&e.item.inScheme[0]||e.selected.scheme[e.isLeft],isLeft:e.isLeft})}}},[i("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()],1),i("tabs",{ref:"tabs",staticStyle:{"margin-top":"3px",position:"relative"},attrs:{borders:"bottom",size:"sm"}},[e.previousConcept?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.previousConceptTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.previousConceptTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-previousButton"},[i("router-link",{attrs:{to:e.getRouterUrl(e.previousConcept,e.isLeft,!0)}},[i("b-button",{attrs:{variant:"light"}},[i("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1)],1)],1):e._e(),e.nextConcept?i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.nextConceptTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.nextConceptTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-nextButton"},[i("router-link",{attrs:{to:e.getRouterUrl(e.nextConcept,e.isLeft,!0)}},[i("b-button",{attrs:{variant:"light"}},[i("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1)],1)],1):e._e(),i("tab",{attrs:{title:e.$t("conceptDetail.info")}},[e._l([e.item.uri].concat(e.item.identifier).filter((function(e){return null!=e})),(function(t,s){return i("div",{key:"conceptDetail-"+e.isLeft+"-identifier-"+s,class:(t.startsWith("http"),"conceptDetail-identifier")},[i("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"},on:{dblclick:function(t){e.copyToClipboard(e.elementForEvent(t))}}}),i("auto-link",{attrs:{link:t}})],1)})),e._l(e.types,(function(t){return i("div",{key:"conceptDetail-"+e.isLeft+"-type-"+t.uri,staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("general.type"))+":")]),e._v(" "+e._s(e.$jskos.prefLabel(t))+" ")])})),e.item.creator&&e.item.creator.length?i("div",{staticClass:"conceptDetail-identifier"},[i("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.$jskos.prefLabel(e.item.creator[0]))+" ")],1):e._e(),e.item.created?i("div",{staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.dateToString(e.item.created,!0))+" ")]):e._e(),e.item.issued?i("div",{staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.issued"))+":")]),e._v(" "+e._s(e.dateToString(e.item.issued,!0))+" ")]):e._e(),e.item.modified?i("div",{staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.dateToString(e.item.modified,!0))+" ")]):e._e(),e.item.definition?e._l([e.$jskos.languagePreference.selectLanguage(e.item.definition)].concat(Object.keys(e.item.definition).filter((function(t){return t!=e.$jskos.languagePreference.selectLanguage(e.item.definition)&&"-"!=t}))),(function(t){return i("div",{key:"conceptDetail-"+e.isLeft+"-defintion-"+t,staticClass:"conceptDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.definition"))+" ("+e._s(t)+"):")]),e._v(" "+e._s(e.$jskos.definition(e.item,{language:t}).join(", "))+" ")])})):e._e()],2),i("tab",{attrs:{title:e.$t("conceptDetail.labels")}},[e._l([e.$jskos.languagePreference.selectLanguage(e.item.prefLabel)].concat(Object.keys(e.item.prefLabel||{}).filter((function(t){return t!=e.$jskos.languagePreference.selectLanguage(e.item.prefLabel)}))).filter((function(e){return e&&"-"!=e})),(function(t){return i("div",{key:"conceptDetail-"+e.isLeft+"-prefLabel-"+t,staticClass:"conceptDetail-identifier"},[i("span",{staticClass:"fontWeight-medium",on:{click:function(i){e.copyAndSearch(e.$jskos.prefLabel(e.item,{language:t}))}}},[e._v(" "+e._s(e.$jskos.prefLabel(e.item,{language:t}))+" ")]),i("span",{staticClass:"text-lightGrey"},[e._v("("+e._s(t)+")")])])})),e.$jskos.languageMapContent(e.item,"altLabel")?i("div",{staticClass:"fontWeight-heavy",staticStyle:{"margin-top":"10px"}},[e._v(" "+e._s(e.$t("conceptDetail.altLabels"))+": ")]):e._e(),e._l(Object.keys(e.item.altLabel||{}).map((function(t){return e.item.altLabel[t].map((function(e){return{language:t,label:e}}))})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return"-"!=e.language})).sort((function(t,i){return t.language==e.$jskos.languagePreference.selectLanguage(e.item.altLabel)?-1:i.language==e.$jskos.languagePreference.selectLanguage(e.item.altLabel)?1:0})),(function(t,s){var n=t.language,o=t.label;return i("div",{key:"conceptDetail-"+e.isLeft+"-altLabel-"+n+"-"+s,staticClass:"conceptDetail-identifier"},[i("span",{on:{click:function(t){return e.copyAndSearch(o)}}},[e._v(" "+e._s(o)+" ")]),i("span",{staticClass:"text-lightGrey"},[e._v("("+e._s(n)+")")])])}))],2),e._l([[{de:e.gndTerms},e.$t("conceptDetail.gnd")],[e.item.scopeNote,e.$t("conceptDetail.scope")],[e.item.editorialNote,e.$t("conceptDetail.editorial")]].filter((function(e){return Object.values(e[0]||{}).reduce((function(e,t){return e+t.length}),0)>0})),(function(t,s){var n=t[0],o=t[1];return[i("tab",{key:"conceptDetail-"+e.isLeft+"-notes-"+s,staticClass:"conceptDetail-notes",attrs:{title:o,hidden:""==n}},e._l(Object.keys(n||{}).map((function(e){return n[e].map((function(t){return{language:e,note:t}}))})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return"-"!=e.language})).sort((function(t,i){return t.language==e.$jskos.languagePreference.selectLanguage(n)?-1:i.language==e.$jskos.languagePreference.selectLanguage(n)?1:0})),(function(t,s){var n=t.language,o=t.note;return i("div",{key:"conceptDetail-"+e.isLeft+"-notes-"+n+"-"+s,staticClass:"conceptDetail-note"},[i("span",{domProps:{innerHTML:e._s(o)}}),i("span",{staticClass:"text-lightGrey"},[e._v(" ("+e._s(n)+")")])])})),0)]})),e.item.memberList&&e.item.memberList.length?i("tab",{attrs:{title:"coli-ana"}},[i("ul",{staticClass:"coli-ana"},[i("li",[i("div"),i("div",[e._v(e._s(e.$jskos.notation(e.item)))]),i("div")]),e._l(e.item.memberList.filter((function(e){return null!=e})),(function(t,s){return i("li",{key:t.uri+"-"+s,class:{"font-weight-bold":e.item.memberList[s-1]&&e.isMemberParentOf(e.item.memberList[s-1],t)&&!e.isMemberParentOf(t,e.item.memberList[s+1])}},[i("div",[e.isMemberParentOf(e.item.memberList[s-1],t)?i("span",[e._v(" ↳ ")]):e._e()]),i("div",[e._v(e._s(t.notation[1]))]),i("div",[i("item-name",{attrs:{item:e.getObject(t)||t,"show-notation":!1,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}}),t.uri.includes("facet")?e._e():i("span",[e._v(" ("),i("item-name",{attrs:{item:t,"show-text":!1,"is-link":!1,"font-size":"small"}}),e._v(") ")],1)],1)])}))],2),null===e.item.memberList[e.item.memberList.length-1]?i("p",{domProps:{innerHTML:e._s(e.$t("conceptDetail.coliAnaIncomplete"))}}):e._e(),i("p",{domProps:{innerHTML:e._s(e.$t("conceptDetail.coliAnaInfo",{url:e.config["coli-ana"]+"?notation="+e.$jskos.notation(e.item)}))}})]):e._e(),e.config.searchLinks?i("tab",{key:"conceptDetail-"+e.isLeft+"-searchLinks",attrs:{title:e.$t("conceptDetail.searchLinks")}},[i("ul",{staticStyle:{"margin-bottom":"0"}},e._l(e.searchLinks,(function(t,s){return i("li",{key:"searchLink-"+e.isLeft+"-"+s},[i("a",{attrs:{href:t.url,target:"_blank"}},[e._v(" "+e._s(t.label)+" ")])])})),0)]):e._e()],2),i("item-detail-narrower",{attrs:{narrower:e.item.narrower,"is-left":e.isLeft}})],1):e._e()},pe=[],he=i("1757"),de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.narrower&&e.narrower.length>0?i("div",{staticClass:"itemDetailNarrower"},[null!=e.text?i("div",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.text)+" ")]):e._e(),e._l(e.narrower.filter((function(e){return null!=e})),(function(t){return i("div",{key:t.uri,staticClass:"itemDetailNarrower-item",class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(t,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(t,e.isLeft)}},[i("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-down-alt"}}),i("item-name",{attrs:{item:t,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)})),0!=e.narrower.length&&e.narrower.includes(null)?i("loading-indicator",{attrs:{size:"sm"}}):e._e()],2):e._e()},me=[],ue={name:"ItemDetailNarrower",components:{ItemName:c["a"],LoadingIndicator:U["a"]},mixins:[J],props:{narrower:{type:Array,default:()=>new Array},text:{type:String,default:null},isLeft:{type:Boolean,default:!0}},computed:{loadConceptsMappedStatusConceptsToLoad(){return this.narrower.filter(e=>e)}}},ge=ue,fe=(i("c804"),Object(u["a"])(ge,de,me,!1,null,"69945c5f",null)),ve=fe.exports,ye=i("bc3a"),be=i.n(ye),we={name:"ConceptDetail",components:{AutoLink:he["a"],ItemName:c["a"],LoadingIndicator:U["a"],ItemDetailNarrower:ve},mixins:[S["a"],_["a"],$,J],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{showAncestors:!1}},computed:{showAddToMappingButton(){return this.$store.getters["mapping/canAdd"](this.item,y.a.get(this.item,"inScheme[0]")||this.selected.scheme[this.isLeft],this.isLeft)},ancestors(){return y.a.get(this.item,"ancestors",[])||[]},broader(){return y.a.get(this.item,"broader",[])||[]},searchLinks(){let e=this.$i18n.locale,t=this.$jskos.notation(this.item),i=this.$jskos.prefLabel(this.item),s={language:e,notation:t,prefLabel:i},n=[];for(let o of this.config.searchLinks){let e=this.selected.scheme[this.isLeft],t=o.schemeUris||[],i=!t.length;for(let s of t)this.$jskos.compare(e,{uri:s})&&(i=!0);if(!i)continue;let a=o.url;y.a.forOwn(s,(e,t)=>{a=y.a.replace(a,new RegExp(`{${t}}`,"g"),e)}),n.push({url:a,label:this.$jskos.prefLabel(o)})}return n=n.filter((e,t,i)=>t===i.findIndex(t=>t.url==e.url)),n},types(){if(!this.item||(this.item.type||[]).length<=1)return[];let e=[],t=y.a.get(this.item,"inScheme[0].types",[]);for(let i of this.item.type||[]){if("http://www.w3.org/2004/02/skos/core#Concept"==i)continue;let s={uri:i};s=t.find(e=>this.$jskos.compare(e,s))||s,e.push(s)}return e},gndTerms(){let e=this.getObject({uri:"http://bartoc.org/en/node/430"}),t=y.a.get(this.item,"__GNDMAPPINGS__",[]),i=[];for(let o of t)for(let t of this.$jskos.conceptsOfMapping(o))this.$jskos.compare(e,y.a.get(t,"inScheme[0]"))&&!i.find(e=>this.$jskos.compare(e.concept,t))&&i.push({concept:t,type:this.$jskos.mappingTypeByType(o.type)});let s=[],n=["conceptDetail.relevanceVeryHigh","conceptDetail.relevanceHigh","conceptDetail.relevanceMedium","conceptDetail.relevanceLow","conceptDetail.relevanceGeneric"];for(let o of n){let e=`<strong>${this.$t("conceptDetail.relevance")}: ${this.$t(o)}</strong> - `,t=[];for(let{concept:s}of i.filter(e=>e.type.RELEVANCE==this.$t(o,"en")))s&&this.$jskos.prefLabel(s,{fallbackToUri:!1})&&t.push(y.a.escape(this.$jskos.prefLabel(s)));t.length>0&&(e+=t.join(", "),s.push(e))}return s},previousConcept(){return this.selected.previousConcept[this.isLeft]},nextConcept(){return this.selected.nextConcept[this.isLeft]},loadConceptsMappedStatusConceptsToLoad(){return this.item?[this.item].concat(this.item.ancestors||[],this.item.broader||[]).filter(e=>null!=e):[]}},watch:{item(e,t){this.$jskos.compare(e,t)||this.refresh()},settings(e,t){y.a.isEqual(e,t)||this.refresh()}},mounted(){this.refresh(),this.enableShortcuts()},methods:{shortcutHandler({action:e,isLeft:t}){"nextConcept"==e&&t==this.isLeft&&this.nextConcept&&this.setSelected({concept:this.nextConcept,isLeft:t})},refresh(){this.showAncestors=!1,this.loadGndTerms(),this.loadConcepts([this.item],{force:!0}),this.loadColiAna()},async loadGndTerms(){if(!this.item)return;let e=this.item,t=this.getObject({uri:"http://bartoc.org/en/node/430"});if(this.$jskos.compare(t,y.a.get(e,"inScheme[0]")))return;const i=this.config.registries.filter(e=>e.has.mappings&&this.$jskos.mappingRegistryIsStored(e)).map(i=>this.getMappings({registry:i,direction:"both",from:e,toScheme:t.uri}).catch(()=>[]));let s=y.a.flatten(await Promise.all(i)),n=[];for(let o of s){let e=this.$jskos.conceptsOfMapping(o);for(let i of e)this.$jskos.compare(t,y.a.get(i,"inScheme[0]"))&&n.push(i)}n=y.a.uniqWith(n,this.$jskos.compare),await this.loadConcepts(n),this.$set(e,"__GNDMAPPINGS__",s)},async loadColiAna(){const e=this.config["coli-ana"];if(!e)return;const t=this.item;if(!t)return;if(t.memberList)return;const i=this.getObject({uri:"http://dewey.info/scheme/edition/e23/"});if(!this.$jskos.compare(i,y.a.get(t,"inScheme[0]")))return;const s=await be.a.get(e+"analyze",{params:{notation:this.$jskos.notation(t)}}),n=(s.data||[]).find(e=>this.$jskos.compare(e,t));n&&(n.memberList.forEach(e=>{this.saveObject(e,{scheme:i,type:"concept"})}),this.$set(t,"memberList",n.memberList.map(e=>({...e,inScheme:[i],prefLabel:(this.getObject(e)||e).prefLabel}))),this.loadConcepts(n.memberList),this.$nextTick(()=>{const e=this.$refs.tabs,i=e.tabs.findIndex(e=>"coli-ana"===e.title);-1===t.__DETAILSLOADED__&&-1!==i&&e.activateTab(i)}))},isMemberParentOf(e,t){return!!(e&&t&&t.broader&&t.broader.length)&&this.$jskos.compare(e,t.broader[0])},elementForEvent(e){let t=e.target;return"path"==t.tagName.toLowerCase()&&(t=t.parentElement),t=t.nextElementSibling,t},hasNotes(e){let t=["scopeNote","editorialNote","altLabel"],i=!1;for(let s of t)i=i||this.$jskos.languageMapContent(e,s)&&this.$jskos.languageMapContent(e,s).length;return i},copyAndSearch(e){this.$emit("searchConcept",e)}}},Ce=we,Se=(i("ddf0"),i("6aea"),Object(u["a"])(Ce,ce,pe,!1,null,"eca397e6",null)),ke=Se.exports,$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"schemeDetail"},[i("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),e.item.license||e.licenseAttribution(e.item)?i("div",{staticClass:"schemeDetail-license"},[e._l(e.item.license,(function(t,s){return i("span",{key:"schemeDetail-"+e.isLeft+"-license-"+s},[i("a",{attrs:{href:t.uri,target:"_blank"}},[e.defaults.licenseBadges[t.uri]?i("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.defaults.licenseBadges[t.uri]}}):i("span",[e._v(" "+e._s(t.uri)+" ")])])])})),e.licenseAttribution(e.item)?i("span",[e._v(" by "),e.licenseAttribution(e.item).url?i("a",{attrs:{href:e.licenseAttribution(e.item).url,target:"_blank"}},[i("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1):i("span",[i("auto-link",{attrs:{link:e.licenseAttribution(e.item).label}})],1)]):e._e()],2):e._e(),e._l([e.item.uri].concat(e.item.identifier).filter((function(e){return null!=e})),(function(t,s){return i("div",{key:"schemeDetail-"+e.isLeft+"-identifier-"+s,staticClass:"schemeDetail-identifier"},[i("font-awesome-icon",{attrs:{icon:t.startsWith("http")?"link":"id-card"}}),i("auto-link",{attrs:{link:t}})],1)})),e.item.created?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "+e._s(e.dateToString(e.item.created,!0))+" ")]):e._e(),e.item.issued?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.issued"))+":")]),e._v(" "+e._s(e.dateToString(e.item.issued,!0))+" ")]):e._e(),e.item.modified?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "+e._s(e.dateToString(e.item.modified,!0))+" ")]):e._e(),e.item.languages?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("schemeDetail.languages"))+":")]),e._v(" "+e._s(e.item.languages.join(", "))+" ")]):e._e(),e.item.type&&e.item.type.length>1?i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("general.type"))+":")]),e._l(e.item.type.filter((function(e){return"http://www.w3.org/2004/02/skos/core#ConceptScheme"!=e})),(function(t,s){return i("span",{key:"schemeDetail-"+e.isLeft+"-type-"+s},[e._v(" "+e._s(e.$jskos.prefLabel(e.kosTypes.find((function(e){return e.uri==t})))||t)+" "),s!=e.item.type.length-2?i("span",[e._v(" / ")]):e._e()])}))],2):e._e(),i("div",{staticClass:"schemeDetail-identifier"},[i("b",[e._v(e._s(e.$t("schemeDetail.registry"))+": ")]),i("registry-notation",{attrs:{registry:e.item._registry,tooltip:!1}}),e._v("   "),i("registry-name",{attrs:{registry:e.item._registry,tooltip:!1}})],1),e.$jskos.notation(e.item)?i("div",{staticClass:"schemeDetail-identifier"},[i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.$emit("searchMappings",{fromScheme:e.isLeft?e.$jskos.notation(e.item):null,fromNotation:e.isLeft?"":null,toScheme:e.isLeft?null:e.$jskos.notation(e.item),toNotation:e.isLeft?null:"",direction:"both"})}}},[i("font-awesome-icon",{attrs:{icon:"external-link-square-alt"}}),e._v(e._s(e.$t("schemeDetail.availableMappings"))+" ")],1)]):e._e(),e.settings.showTopConceptsInScheme&&e.topConcepts[e.item.uri]&&e.topConcepts[e.item.uri].length>0?i("item-detail-narrower",{attrs:{narrower:e.topConcepts[e.item.uri],"is-left":e.isLeft,text:"Top Concepts:"}}):e.settings.showTopConceptsInScheme?i("div",[e._v(" "+e._s(e.$t("schemeDetail.noTopConcepts"))+" ")]):e._e()],2)},_e=[],Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.right",value:e.tooltip?e.tooltipHtml:"",expression:"tooltip ? tooltipHtml : ''",modifiers:{html:!0,right:!0}}],domProps:{innerHTML:e._s(e.registryName)}})},xe=[],Me={name:"RegistryName",props:{registry:{type:Object,default:null},tooltip:{type:Boolean,default:!0}},computed:{registryName:function(){let e=this.$jskos.prefLabel(this.registry),t=this.$jskos.notation(this.registry);return e?e.replace(t,(function(){return"<b>"+t+"</b>"})):(t=0,t||"?")},tooltipHtml(){return this.$jskos.definition(this.registry).join("<br>")}}},je=Me,Ie=Object(u["a"])(je,Le,xe,!1,null,null,null),De=Ie.exports,Fe=i("d465"),Te=i("47f0"),Oe={name:"SchemeDetail",components:{AutoLink:he["a"],ItemName:c["a"],ItemDetailNarrower:ve,RegistryName:De,RegistryNotation:Fe["a"]},mixins:[S["a"]],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{kosTypes:Te}},methods:{licenseAttribution(e){let t=e.publisher||e.creator;return t&&0!=t.length?{url:t[0].url||t[0].uri,label:this.$jskos.prefLabel(t[0])}:null}}},Ee=Oe,ze=(i("3710"),Object(u["a"])(Ee,$e,_e,!1,null,"3f01b351",null)),Ne=ze.exports,Be={name:"ItemDetail",components:{LoadingIndicatorFull:R["a"],Minimizer:B,ConceptDetail:ke,SchemeDetail:Ne,DataModalButton:te["a"],ComponentSettings:b["a"]},mixins:[S["a"],k["a"],_["a"]],props:{item:{type:Object,default:null},isScheme:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{loading:!1,defaultSettings:{showGndTerms:!0,showSchemeInAncestors:!0,showTopConceptsInScheme:!1,showAllAncestors:!1,showAllNotes:!1}}},computed:{type(){return this.$jskos.isConcept(this.item)?"Concept":"Scheme"},internalSettings(){return Object.assign({},this.defaultSettings,{showAllAncestors:this.componentSettings.showAllAncestors},this.settings)},apiUrl(){if(!this.item||!this.item.uri)return null;let e;if(this.$jskos.isScheme(this.item)){let t=y.a.get(this.item,"inScheme[0]._registry")||y.a.get(this.item,"_registry");e=y.a.get(t,"_api.schemes")||y.a.get(t,"_api.data")||y.a.get(t,"_api.concepts")}else{let t=y.a.get(this.item,"inScheme[0]._registry");e=y.a.get(t,"_api.data")||y.a.get(t,"_getDataUrl")&&t._getDataUrl(this.item)||y.a.get(t,"_api.concepts")}return e&&y.a.isString(e)?`${e}${e.includes("?")?"&":"?"}uri=${encodeURIComponent(this.item.uri)}`:null}},watch:{item:function(){this.$el.scrollTop=0}},mounted(){this.$el.scrollTop=0},methods:{droppedConcept(e){this.$router.push({path:this.getRouterUrl(e,this.isLeft,!0)})}}},Ae=Be,Pe=(i("291e"),Object(u["a"])(Ae,re,le,!1,null,"0a3e1a4f",null)),Re=Pe.exports,He=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.resizingSlider"),delay:e.defaults.delay.medium,placement:e.isColumn?"right":"top"},expression:"{ title: $t('general.resizingSlider'), delay: defaults.delay.medium, placement: isColumn ? 'right' : 'top' }",modifiers:{hover:!0}}],class:{resizingSliderCol:e.isColumn,resizingSliderRow:!e.isColumn},on:{mousedown:e.startResizing}},[i("div",[i("font-awesome-icon",{attrs:{icon:e.isColumn?"ellipsis-v":"ellipsis-h"}})],1)])},Ve=[],Ue={name:"ResizingSlider",mixins:[_["a"]],props:{isColumn:{type:Boolean,default:!1}},data(){return{resizing:!1,savedValues:{}}},computed:{flex(){return this.$settings.flex||{}}},watch:{flex(){this.refreshFlex()}},mounted(){this.refreshFlex()},methods:{getSiblings(){let e,t,i=this.$el,s=i.parentElement,n=window.getComputedStyle(i),o=n.getPropertyValue("order");try{o=parseInt(o)}catch(a){o=0}o>0?(e=s.querySelector(".order"+(o-1)),t=s.querySelector(".order"+(o+1))):(e=i.previousElementSibling,t=i.nextElementSibling);while(e&&(e.classList.contains("resizingSliderRow")||e.classList.contains("resizingSliderColumn")))e=e.previousElementSibling;while(t&&(t.classList.contains("resizingSliderRow")||t.classList.contains("resizingSliderColumn")))t=t.nextElementSibling;return[e,t]},startResizing(e){let[t,i]=this.getSiblings();if(null==t||null==i)return;let s=t.clientWidth,n=i.clientWidth,o=t.clientHeight,a=i.clientHeight,r=s+n,l=o+a,c=window.getComputedStyle(t),p=window.getComputedStyle(i),h=parseFloat(c.getPropertyValue("flex-grow"))+parseFloat(p.getPropertyValue("flex-grow")),d=parseInt(c.getPropertyValue("min-width")),m=parseInt(p.getPropertyValue("min-width")),u=parseInt(c.getPropertyValue("min-height")),g=parseInt(p.getPropertyValue("min-height")),f=parseInt(y.a.get(t,"dataset.minimized"))||0,v=parseInt(y.a.get(i,"dataset.minimized"))||0;if(f+v==2)return;f+v==0&&(this.savedValues.previousWidth=s,this.savedValues.nextWidth=n,this.savedValues.previousHeight=o,this.savedValues.nextHeight=a);let b=this;function w(){document.removeEventListener("mousemove",S),document.onmouseup=null,document.body.style.cursor="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",b.resizing=!1}if(this.resizing)return void w();this.resizing=!0;let C=b.isColumn?e.clientX:e.clientY;function S(e){let c=(b.isColumn?e.clientX:e.clientY)-C;if(b.isColumn){let e=s+c,o=n-c;if(e<d||o<m||f+v==1){if(e<=10||o<=10||e>=3*d&&1==f||o>=3*m&&1==v){let s=e<=10||1==f?t:i,n=s.getElementsByClassName("minimizer")[0];if(n.parentElement!=s&&n.parentElement.parentElement!=s)return;let o=n.__vue__;o&&(t.style.flex=b.savedValues.previousWidth/r*h,b.saveFlex(t),i.style.flex=b.savedValues.nextWidth/r*h,b.saveFlex(i),o.toggleMinimize(),w())}return}t.style.flex=e/r*h,b.saveFlex(t),i.style.flex=o/r*h,b.saveFlex(i)}else{let e=o+c,s=a-c;if(e<u||s<g||f+v==1){if(e<=10||s<=10||e>=3*u&&1==f||s>=3*g&&1==v){let s=e<=10||1==f?t:i,n=s.getElementsByClassName("minimizer")[0];if(n.parentElement!=s&&n.parentElement.parentElement!=s)return;let o=n.__vue__;o&&(t.style.flex=b.savedValues.previousHeight/l*h,b.saveFlex(t),i.style.flex=b.savedValues.nextHeight/l*h,b.saveFlex(i),o.toggleMinimize(),w())}return}t.style.flex=e/l*h,b.saveFlex(t),i.style.flex=s/l*h,b.saveFlex(i)}}document.body.style.cursor=b.isColumn?"col-resize":"row-resize",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.addEventListener("mousemove",S),document.onmouseup=w},saveFlex(e){if(e&&e.id&&e.style){let t=y.a.cloneDeep(this.$settings.flex);t[e.id]=e.style.flex,this.$store.commit({type:"settings/set",prop:"flex",value:t})}},refreshFlex(){let e=this.getSiblings();for(let t of e)t&&t.id&&null!=this.flex[t.id]&&(t.style.flex=this.flex[t.id])}}},We=Ue,Ke=(i("c3e3"),Object(u["a"])(We,He,Ve,!1,null,"602104a4",null)),Ge=Ke.exports,qe=i("622d"),Qe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptSchemeSelection",staticStyle:{overflow:"visible"},attrs:{id:"conceptSchemeSelection-"+e.id}},[i("component-settings"),e.scheme?i("div",{staticClass:"conceptSchemeSelection-collapsed"},[i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.popoverShown?e.$t("schemeSelection.popoverHide"):e.$t("schemeSelection.popoverShow"),delay:e.defaults.delay.medium},expression:"{ title: popoverShown ? $t('schemeSelection.popoverHide') : $t('schemeSelection.popoverShow'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-expandButton button",attrs:{id:e.id+"-expandButton"},on:{click:e.togglePopover}},[i("font-awesome-icon",{attrs:{icon:e.popoverShown?"angle-left":"angle-down"}})],1),i("div",{staticClass:"conceptSchemeSelection-schemeName"},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.defaults.delay.medium},expression:"{ title: $jskos.isContainedIn(scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"pointer",class:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?"starFavorite":"starNormal",attrs:{icon:"star"},on:{click:function(t){return e.toggleFavoriteScheme(e.scheme)}}}),e._v("   "),i("item-name",{attrs:{item:e.scheme,"is-link":!0,"is-left":e.isLeft,"font-size":"large"}}),e.scheme.license&&e.scheme.license.length?i("span",{staticStyle:{display:"inline-block",margin:"0px 2px 0px 1px",height:"15px"}},[e.defaults.licenseBadges[e.scheme.license[0].uri]?i("img",{staticStyle:{"vertical-align":"text-top"},attrs:{src:e.defaults.licenseBadges[e.scheme.license[0].uri]}}):e._e()]):e._e(),i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.clearScheme"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.clearScheme'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block",margin:"-3px 2px 0px 2px"},on:{click:e.clearScheme}},[i("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1),i("concept-search",{ref:"conceptSearch",staticClass:"conceptSchemeSelection-conceptSearch",attrs:{"is-left":e.isLeft,scheme:e.scheme}})],1):e._e(),i(null==e.scheme?"div":"b-popover",{tag:"div",staticClass:"conceptSchemeSelection-popover",attrs:{target:e.id+"-expandButton",container:"conceptSchemeSelection-"+e.id,triggers:"disabled",placement:"leftbottom"},on:{shown:function(t){e.popoverShown=!0},hidden:function(t){e.popoverShown=!1}}},[i("div",{ref:"popover",staticClass:"conceptSchemeSelection-expanded",class:{"conceptSchemeSelection-expanded-div":null==e.scheme,"conceptSchemeSelection-expanded-popover":null!=e.scheme}},[i("div",{staticClass:"componentTitle"},[e._v(" "+e._s(e.isLeft?e.$t("schemeSelection.source"):e.$t("schemeSelection.target"))+" ")]),i("b-form",{attrs:{inline:""},on:{submit:e.chooseFirst}},[i("b-form-input",{ref:"input",staticStyle:{flex:"1","margin-right":"5px"},attrs:{placeholder:e.$t("schemeSelection.schemeFilterPlaceholder"),autocomplete:"off",size:"sm"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hidePopover.apply(null,arguments)}},model:{value:e.schemeFilter,callback:function(t){e.schemeFilter=t},expression:"schemeFilter"}}),i("div",{staticClass:"button",staticStyle:{position:"relative"},attrs:{id:"conceptSchemeSelection-filterButton-"+e.id}},[i("font-awesome-icon",{attrs:{icon:"filter"}}),e.isFiltered?i("span",{staticClass:"text-success",staticStyle:{position:"absolute",top:"-10px",right:"-5px"}},[e._v(" • ")]):e._e()],1),i("b-popover",{attrs:{target:"conceptSchemeSelection-filterButton-"+e.id,show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(t){e.filterPopoverShow=t}}},[i("div",{ref:"filterPopover",staticClass:"conceptSchemeSelection-filterPopover"},[i("p",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.$t("schemeSelection.filter"))+" ")]),i("p",{directives:[{name:"show",rawName:"v-show",value:e.isFiltered,expression:"isFiltered"}]},[i("a",{ref:"removeAllFiltersLink",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.onlyFavorites=!1,e.schemeFilter="",e.registryFilter=e.availableRegistries.map((function(e){return e.uri})),e.languageFilter=e.availableLanguages.concat([null]),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filtersRemove"))+" ")])]),e.allowFavoriteSchemesFilter?i("b-form-checkbox",{attrs:{size:"sm"},model:{value:e.onlyFavorites,callback:function(t){e.onlyFavorites=t},expression:"onlyFavorites"}},[e._v(" "+e._s(e.$t("schemeSelection.filterOnlyFavorites"))+" ")]):e._e(),i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"conceptSchemeSelection-filterPopover-"+e.id+"-registryFilterCollapse",expression:"`conceptSchemeSelection-filterPopover-${id}-registryFilterCollapse`"}],staticClass:"button"},[i("span",{staticClass:"when-opened"},[i("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),i("span",{staticClass:"when-closed"},[i("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.registryFilter"))+" ("+e._s(e.registryFilter.length==e.availableRegistries.length?"all":e.registryFilter.length)+") ")]),i("b-collapse",{attrs:{id:"conceptSchemeSelection-filterPopover-"+e.id+"-registryFilterCollapse"}},[i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.registryFilter=e.availableRegistries.map((function(e){return e.uri}))}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("• "),i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.registryFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.registryFilterOptions,(function(t){return i("b-form-checkbox",{key:"conceptSchemeSelection-filterPopover-"+e.id+"-languageFilter-"+t.value,staticClass:"fontSize-normal",attrs:{value:t.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.registryFilter,callback:function(t){e.registryFilter=t},expression:"registryFilter"}},[e._v(" "+e._s(t.text)+" ")])}))],2),i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"conceptSchemeSelection-filterPopover-"+e.id+"-languageFilterCollapse",expression:"`conceptSchemeSelection-filterPopover-${id}-languageFilterCollapse`"}],staticClass:"button"},[i("span",{staticClass:"when-opened"},[i("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),i("span",{staticClass:"when-closed"},[i("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.languageFilter"))+" ("+e._s(e.languageFilter.length-1==e.availableLanguages.length?"all":e.languageFilter.length)+") ")]),i("b-collapse",{attrs:{id:"conceptSchemeSelection-filterPopover-"+e.id+"-languageFilterCollapse"}},[i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.languageFilter=e.availableLanguages.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("• "),i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.languageFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.languageFilterOptions,(function(t){return i("b-form-checkbox",{key:"conceptSchemeSelection-filterPopover-"+e.id+"-languageFilter-"+t.value,staticClass:"fontSize-normal",attrs:{value:t.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.languageFilter,callback:function(t){e.languageFilter=t},expression:"languageFilter"}},[e._v(" "+e._s(t.text)+" ")])}))],2),i("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"conceptSchemeSelection-filterPopover-"+e.id+"-typeFilterCollapse",expression:"`conceptSchemeSelection-filterPopover-${id}-typeFilterCollapse`"}],staticClass:"button"},[i("span",{staticClass:"when-opened"},[i("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),i("span",{staticClass:"when-closed"},[i("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.typeFilter"))+" ("+e._s(e.typeFilter.length-1==e.availableTypes.length?"all":e.typeFilter.length)+") ")]),i("b-collapse",{attrs:{id:"conceptSchemeSelection-filterPopover-"+e.id+"-typeFilterCollapse"}},[i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("• "),i("a",{attrs:{href:""},on:{click:function(t){t.preventDefault(),e.typeFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.typeFilterOptions,(function(t){return i("b-form-checkbox",{key:"conceptSchemeSelection-filterPopover-"+e.id+"-typeFilter-"+t.value,staticClass:"fontSize-normal",attrs:{value:t.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.typeFilter,callback:function(t){e.typeFilter=t},expression:"typeFilter"}},[e._v(" "+e._s(t.text)+" ")])}))],2)],1)])],1),i("ul",{staticClass:"conceptSchemeSelection-schemeList scrollable"},[e._l(e.filteredSchemes,(function(t,s){return i("li",{key:t.uri+"-scheme-list-"+e.id+s},[i("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(t,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.defaults.delay.medium},expression:"{ title: $jskos.isContainedIn(_scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"pointer",class:e.$jskos.isContainedIn(t,e.favoriteSchemes)?"starFavorite":"starNormal",attrs:{icon:"star"},on:{click:function(i){return e.toggleFavoriteScheme(t)}}}),i("item-name",{ref:0==s?"firstScheme":null,refInFor:!0,attrs:{item:t,"is-link":!0,"is-left":e.isLeft}})],1)})),i("li",{directives:[{name:"show",rawName:"v-show",value:e.isFiltered&&e.filteredSchemes.length<e.schemes.length,expression:"isFiltered && filteredSchemes.length < schemes.length"}]},[i("a",{ref:"showAllSchemesLink",attrs:{href:""},on:{click:function(t){t.preventDefault(),e.onlyFavorites=!1,e.schemeFilter="",e.registryFilter=e.availableRegistries.map((function(e){return e.uri})),e.languageFilter=e.availableLanguages.concat([null]),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.showAllSchemes",{count:e.schemes.length}))+" ")])])],2)],1)])],1)},Je=[],Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"conceptSearch",on:{mousemove:function(t){return e.mousemove()}}},[i("div",{staticClass:"conceptSearch-icon button",on:{click:e.focusSearch}},[i("font-awesome-icon",{attrs:{icon:"search"}})],1),i("div",{staticClass:"conceptSearch-inputWrapper"},[e.isOpen&&!e.loading?i("div",{staticClass:"conceptSearch-resultCount",style:"right: "+(e.scheme.types&&e.scheme.types.length?27:10)+"px;"},[e._v(" "+e._s(e.searchResult.length)+" "+e._s(e.$tc("search.results",e.searchResult.length))+" ")]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.scheme.types&&e.scheme.types.length>0,expression:"scheme.types && scheme.types.length > 0"}],staticClass:"conceptSearch-filter button",attrs:{id:"conceptSearch-filter-"+(e.isLeft?"left":"right")}},[i("font-awesome-icon",{attrs:{icon:"filter"}})],1),i("b-popover",{attrs:{target:"conceptSearch-filter-"+(e.isLeft?"left":"right"),show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(t){e.filterPopoverShow=t}}},[i("div",{ref:"filterPopover"},[i("b-form-checkbox-group",{staticClass:"conceptSearch-filterCheckboxes",attrs:{stacked:"",size:"sm"},model:{value:e.selectedTypes,callback:function(t){e.selectedTypes=t},expression:"selectedTypes"}},e._l(e.scheme.types,(function(t){return i("b-form-checkbox",{key:t.uri,staticClass:"conceptSearch-filterCheckbox",attrs:{value:t.uri}},[e._v(" "+e._s(e.$jskos.prefLabel(t))+" ")])})),1)],1)]),i("b-form-input",{ref:"searchInput",attrs:{placeholder:e.$t("search.placeholder"),size:"sm",autocomplete:"off"},on:{dragover:e.dragOver,drop:function(t){return e.drop(t,e.isLeft)}},nativeOn:{click:function(t){e.isOpen=""!=e.searchQuery},keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onArrowDown.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onArrowUp.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.closeResults.apply(null,arguments)}],keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter.apply(null,arguments)},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.$refs.searchInput.$el.blur(),e.closeResults()}],focus:function(t){e.isOpen=""!=e.searchQuery}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"conceptSearch-results"},[e.loading?i("div",{staticClass:"conceptSearch-loading"},[i("loading-indicator")],1):i("ul",{staticClass:"conceptSearch-results-list"},[e._l(e.searchResult,(function(t,s){return i("li",{key:s,staticClass:"conceptSearch-results-item",class:{"conceptSearch-selected":s===e.searchSelected,"font-italic":"###conceptWithoutData###"==t[1]},attrs:{id:e.uniqueID+"-searchResult-"+s,draggable:"true"},on:{dragstart:function(i){return e.dragStartResult(t,i)},dragend:e.dragEnd,click:function(t){return e.chooseResult(s)},mouseover:function(t){return e.mouseover(s)}}},["###conceptWithoutData###"==t[1]?i("span",{staticClass:"fontSize-verySmall"},[i("font-awesome-icon",{attrs:{icon:"bolt"}})],1):e._e(),i("span",{domProps:{innerHTML:e._s(e.highlightQueryInResult(t[0]))}})])})),0==e.searchResult.length?i("li",{staticClass:"conceptSearch-results-item"},[i("div",[e._v(e._s(e.$t("search.noResults")))])]):e._e()],2)])],1)])},Ye=[],Ze=i("5635"),et={name:"ConceptSearch",components:{LoadingIndicator:U["a"]},mixins:[S["a"],Ze["a"],k["a"],_["a"]],props:{isLeft:{type:Boolean,default:!0},scheme:{type:Object,default:null}},data(){return{searchQuery:"",searchResult:[],isOpen:!1,isValid:!1,loading:!1,searchSelected:-1,preventHovering:!1,cancel:null,uniqueID:null,filterPopoverShow:!1}},computed:{typesForSchemes(){return this.$settings.typesForSchemes},selectedTypes:{get(){let e=Object.keys(this.$settings.typesForSchemes).find(e=>this.$jskos.compare(this.scheme,{uri:e}));return this.$settings.typesForSchemes[e]},set(e){if(!Array.isArray(e))return;let t=Object.keys(this.$settings.typesForSchemes).find(e=>this.$jskos.compare(this.scheme,{uri:e}))||this.scheme.uri,i=y.a.cloneDeep(this.$settings.typesForSchemes);y.a.isEqual(e,i[t])||(i[t]=e,this.$store.commit({type:"settings/set",prop:"typesForSchemes",value:i}))}},provider(){return y.a.get(this.scheme,"_registry")}},watch:{searchQuery:function(e){this.searchSelected=-1,null!=this.cancel&&(this.cancel("There was a newer search query."),this.cancel=null),""==e?(this.loading=!1,this.isOpen=!1):(this.searchResult=["Waiting for you to stop typing..."],this.loading=!0,this.isOpen=!0,this.debouncedGetAnswer()),this.isValid=!1},scheme:function(e,t){this.$jskos.compare(t,e)||(this.searchQuery="",this.searchResult=[],this.isOpen=!1,this.isValid=!1,this.loading=!1,this.searchSelected=-1),null!=e&&this._loadTypes(e)},typesForSchemes(){this.loading=!0,this.getAnswer()}},created:function(){this.debouncedGetAnswer=y.a.debounce(this.getAnswer,300),this.uniqueID=this.generateID()},methods:{clickHandlers(){return[{elements:[this.$el],handler:()=>{this.filterPopoverShow||(this.isOpen=!1,this.searchSelected=-1)}},{elements:[document.getElementById("conceptSearch-filter-"+(this.isLeft?"left":"right")),this.$refs.filterPopover],handler:()=>{this.filterPopoverShow=!1}}]},chooseResult(e){this.closeResults(),this.searchSelected=-1,this.$router.push({path:this._getRouterUrl(this.searchResult[e])}),document.activeElement!=document.body&&document.activeElement.blur()},_getRouterUrl(e){let t=y.a.last(e),i={uri:t,inScheme:[this.scheme]};return i=this.saveObject(i,{type:"concept",scheme:this.scheme,provider:this.provider}),this.getRouterUrl(i,this.isLeft)},closeResults(){this.isOpen=!1},getAnswer:function(){this.searchResult=[];let e=this.searchQuery;const t=this.provider.suggest({search:e,scheme:this.scheme,types:this.selectedTypes});this.cancel=t.cancel,t.then(t=>{e==this.searchQuery&&(this.loading=!1,this.searchResult=y.a.zip(t[1],t[2],t[3]),this.isValid=!0)}).catch(t=>{if(-1==t.toString().toLowerCase().indexOf("cancel")&&e==this.searchQuery){this.loading=!1,this.isValid=!1;const e=`${this.$t("search.error")} ${this.getErrorMessage(t)}`;this.searchResult=[[e]]}}).then(()=>{if(e==this.searchQuery){const t=new this.$jskos.ConceptScheme(this.scheme),i=t.conceptFromNotation(e);i&&!this.searchResult.find(e=>y.a.last(e)==i.uri)&&this.searchResult.push([`${e} ${this.$t("itemDetail.unknownConcept")}`,"###conceptWithoutData###",i.uri]),this.cancel=null}})},onArrowDown(){this.preventHovering=!0,this.searchSelected>=this.searchResult.length-1?this.searchSelected=0:this.searchSelected+=1,this.scrollSelectedIntoView()},onArrowUp(){this.preventHovering=!0,this.searchSelected<=0?this.searchSelected=this.searchResult.length-1:this.searchSelected-=1,this.scrollSelectedIntoView()},scrollSelectedIntoView(){let e=document.getElementById(this.uniqueID+"-searchResult-"+this.searchSelected);var t=e.getBoundingClientRect(),i=e.parentElement.parentElement.getBoundingClientRect();t.bottom>i.bottom&&e.scrollIntoView(!1),t.top<i.top&&e.scrollIntoView()},onEnter(){let e;!this.loading&&this.isValid&&0!=this.searchResult.length&&(e=this.searchSelected<0||this.searchSelected>=this.searchResult.length?0:this.searchSelected,this.chooseResult(e))},mouseover(e){this.preventHovering||(this.searchSelected=e)},mousemove(){this.preventHovering=!1},focusSearch(){this.$refs.searchInput.focus(),this.isOpen=""!=this.searchQuery},highlightQueryInResult(e){if(!this.searchQuery.length)return e;let t=this.searchQuery,i=new RegExp(t,"ig"),s=i.exec(e),n=0,o="";while(s){let a=s.index;o+=y.a.escape(e.slice(n,a))+"<span class='conceptSearch-searchHighlight fontWeight-heavy'>"+y.a.escape(e.slice(a,a+t.length))+"</span>",n=a+t.length,s=i.exec(e)}return o+=y.a.escape(e.slice(n)),o},setSearchQuery(e,t=!1){this.searchQuery=e,this.$nextTick(()=>{this.isOpen=t}),setTimeout(()=>{t&&this.focusSearch()},10)},_loadTypes(e){this.loadTypes(e).then(e=>{this.selectedTypes||(this.selectedTypes=e.types.map(e=>e.uri))})},dragStartResult(e,t){let i=y.a.last(e),s=this.saveObject({uri:i},{scheme:this.scheme,type:"concept"});this.dragStart(s,t)},droppedConcept(e){this.setSearchQuery(this.$jskos.prefLabel(e,{fallbackToUri:!0}))}}},tt=et,it=(i("cb24"),i("b298"),Object(u["a"])(tt,Xe,Ye,!1,null,"211a2b94",null)),st=it.exports,nt={name:"ConceptSchemeSelection",components:{ItemName:c["a"],ConceptSearch:st,ComponentSettings:b["a"]},mixins:[S["a"],Ze["a"],$,_["a"]],props:{isLeft:{type:Boolean,default:!0}},data(){return{id:this.generateID(),popoverShown:!1,filterPopoverShow:!1,schemeFilter:"",registryFilter:[],languageFilter:[],typeFilter:[],onlyFavorites:!0}},computed:{scheme(){return this.selected.scheme[this.isLeft]},isFiltered(){return""!=this.schemeFilter||this.registryFilter.length<this.availableRegistries.length||this.languageFilter.length-1<this.availableLanguages.length||this.typeFilter.length-1<this.availableTypes.length||this.onlyFavorites},filteredSchemes(){let e=this.schemeFilter.toLowerCase();if(e){const t=e=>y.a.flattenDeep(y.a.concat([],Object.values(e.prefLabel||{}),Object.values(e.altLabel||{}),e.notation||[])).map(e=>e.toLowerCase());return this.schemes.filter(i=>t(i).find(t=>t.startsWith(e)))}return this.schemes.filter(e=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(t=>this.$jskos.compare({uri:t},e._registry)))&&(this.languageFilter.includes(null)&&!(e.languages||[]).length||y.a.intersection(e.languages||[],this.languageFilter).length)&&(this.typeFilter.includes(null)&&(e.type||[]).length<=1||y.a.intersection(e.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(e,this.favoriteSchemes)))},availableRegistries(){return this.config.registries.filter(e=>e.has.concepts)},availableLanguages(){return y.a.uniq([].concat(...this.schemes.map(e=>e.languages||[])))},shownRegistries(){let e=this.schemes.filter(e=>(this.languageFilter.includes(null)&&!(e.languages||[]).length||y.a.intersection(e.languages||[],this.languageFilter).length)&&(this.typeFilter.includes(null)&&(e.type||[]).length<=1||y.a.intersection(e.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(e,this.favoriteSchemes)));return this.availableRegistries.filter(t=>e.find(e=>this.$jskos.compare(t,e._registry)))},registryFilterOptions(){return this.shownRegistries.map(e=>({value:e.uri,text:this.$jskos.prefLabel(e)}))},shownLanguages(){let e=this.schemes.filter(e=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(t=>this.$jskos.compare({uri:t},e._registry)))&&(this.typeFilter.includes(null)&&(e.type||[]).length<=1||y.a.intersection(e.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(e,this.favoriteSchemes)));return y.a.uniq([].concat(...e.map(e=>e.languages||[])))},languageFilterOptions(){let e=[];return this.schemes.find(e=>!e.languages||!e.languages.length)&&e.push({value:null,text:this.$t("schemeSelection.filterOther")}),e=this.shownLanguages.map(e=>({value:e,text:e})).concat(e),e},availableTypes(){return y.a.uniq(y.a.flatten(this.schemes.map(e=>e.type||[]))).filter(e=>e&&"http://www.w3.org/2004/02/skos/core#ConceptScheme"!=e)},shownTypes(){let e=this.schemes.filter(e=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(t=>this.$jskos.compare({uri:t},e._registry)))&&(this.languageFilter.includes(null)&&!(e.languages||[]).length||y.a.intersection(e.languages||[],this.languageFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(e,this.favoriteSchemes)));return y.a.uniq(y.a.flatten(e.map(e=>e.type||[]))).filter(e=>e&&"http://www.w3.org/2004/02/skos/core#ConceptScheme"!=e)},typeFilterOptions(){let e=[];this.schemes.find(e=>!e.type||e.type.length<=1)&&e.push({value:null,text:this.$t("schemeSelection.filterOther")}),e=this.shownTypes.map(e=>({value:e,text:e})).concat(e);for(let t of e){let e=Te.find(e=>e.uri==t.value);e&&(t.text=this.$jskos.prefLabel(e))}return e},allowFavoriteSchemesFilter(){return!!this.favoriteSchemes.find(e=>this.$jskos.isContainedIn(e,this.schemes))}},watch:{popoverShown(e){e&&y.a.delay(()=>{this.focusAndSelectInput()},100)},onlyFavorites(){this.schemeFilter=""},languageFilter(){this.schemeFilter=""},typeFilter(){this.schemeFilter=""},allowFavoriteSchemesFilter(e){e||(this.onlyFavorites=!1)}},mounted(){this.enableShortcuts(),this.registryFilter=this.availableRegistries.map(e=>e.uri),this.languageFilter=this.availableLanguages.concat([null]),this.typeFilter=this.availableTypes.concat([null]),this.allowFavoriteSchemesFilter||(this.onlyFavorites=!1)},methods:{clickHandlers(){return[{elements:[this.$refs.popover,document.getElementById(this.id+"-expandButton"),this.$refs.showAllSchemesLink,document.getElementById("conceptSchemeSelection-filterButton-"+this.id),this.$refs.filterPopover,this.$refs.removeAllFiltersLink],handler:()=>{this.hidePopover()}},{elements:[document.getElementById("conceptSchemeSelection-filterButton-"+this.id),this.$refs.filterPopover,this.$refs.removeAllFiltersLink],handler:()=>{this.filterPopoverShow=!1}}]},shortcutHandler({action:e,isLeft:t}){if(this.isLeft===t)switch(e){case"openSchemeSelection":this.scheme?this.togglePopover():this.focusAndSelectInput();break;case"openConceptSearch":this.$refs.conceptSearch&&this.$refs.conceptSearch.focusSearch();break}},clearScheme(){this.$router.push({path:this.getRouterUrl(null,this.isLeft)}),y.a.delay(()=>{this.focusAndSelectInput()},100)},chooseFirst(e){e.preventDefault();let t=y.a.get(this,"$refs.firstScheme[0].item");t&&(this.$router.push({path:this.getRouterUrl(t,this.isLeft)}),this.hidePopover())},setConceptSearchQuery(e,t=!1){this.$refs.conceptSearch&&this.$refs.conceptSearch.setSearchQuery(e,t)},toggleFavoriteScheme(e){this.$jskos.isContainedIn(e,this.favoriteSchemes)?this.$store.dispatch("removeSchemeFromFavorites",e):this.$store.dispatch("addSchemeToFavorites",e),this.focusAndSelectInput()},focusAndSelectInput(){let e=this.$refs.input.$el;e&&(e.focus(),e.select())},showPopover(){this.$root.$emit("bv::show::popover",this.id+"-expandButton")},hidePopover(){this.$root.$emit("bv::hide::popover",this.id+"-expandButton")},togglePopover(){this.popoverShown?this.hidePopover():this.showPopover()}}},ot=nt,at=(i("357f"),i("0397"),Object(u["a"])(ot,Qe,Je,!1,null,"0887f416",null)),rt=at.exports,lt=i("ca6b"),ct=i.n(lt),pt=i("dd6a");const ht=i("ae72");ht.listen();var dt={name:"App",components:{TheNavbar:a["a"],ConceptListWrapper:ae,ItemDetail:Re,MappingEditor:j,MappingBrowser:I["a"],ResizingSlider:Ge,LoadingIndicatorFull:R["a"],Minimizer:B,ConceptSchemeSelection:rt},mixins:[C["a"],S["a"],_["a"],pt["a"]],data(){return{loaded:!1,loading:!1,itemDetailSettings:{left:{showTopConceptsInScheme:!1},right:{showTopConceptsInScheme:!1}},loadFromParametersOnce:y.a.once(this.loadFromParameters),forceMappingBrowser:!1,forceMappingEditor:!1,repeatLoadBuildInfo:null}},computed:{selectedConceptLeft(){return this.selected.concept[!0]},selectedSchemeRight(){return this.selected.scheme[!1]},selectedConceptRight(){return this.selected.concept[!1]},selectedSchemeLeft(){return this.selected.scheme[!0]},locale(){return this.$i18n.locale},settingsLocale(){let e=this.$settings.locale;return(this.config.languages||[]).includes(e)||(e="en"),e}},watch:{$route({query:e},{query:t}){let i=["from","fromScheme","to","toScheme"],s=!1;for(let n of i){let i=t[n],o=e[n],a=i&&this.getObject({uri:i}),r=o&&this.getObject({uri:o});a&&r?this.$jskos.compare(a,r)||(s=!0):i!=o&&(s=!0)}s&&this.loadFromParameters()},selectedConceptLeft:{handler(e,t){y.a.isEqual(y.a.get(e,"prefLabel"),y.a.get(t,"prefLabel"))||this.insertPrefLabel(!0)},deep:!0},selectedSchemeRight(e,t){this.$jskos.compare(e,t)||y.a.delay(()=>{this.insertPrefLabel(!0)},50)},selectedConceptRight:{handler(e,t){y.a.isEqual(y.a.get(e,"prefLabel"),y.a.get(t,"prefLabel"))||this.insertPrefLabel(!1)},deep:!0},selectedSchemeLeft(e,t){this.$jskos.compare(e,t)||y.a.delay(()=>{this.insertPrefLabel(!1)},50)},locale(e,t){e!=t&&(this.$store.commit({type:"settings/set",prop:"locale",value:e}),y.a.delay(()=>{this.insertPrefLabel(!0),this.insertPrefLabel(!1)},300))},settingsLocale(e){e!=this.locale&&(this.$i18n.locale=e)},user(e,t){if(void 0!==t&&!t&&e){if(this.alert(this.$t("alerts.loggedIn"),null,"success"),this.localMappingsRegistry&&this.$jskos.compare(this.currentRegistry,this.localMappingsRegistry)){const t=this.config.registries.find(t=>this.$jskos.mappingRegistryIsStored(t)&&!this.$jskos.compare(t,this.localMappingsRegistry)&&t.isAuthorizedFor({type:"mappings",action:"create",user:e}));t&&(this.$store.commit({type:"settings/set",prop:"mappingRegistry",value:t.uri}),this.alert(this.$t("alerts.loggedInRegistryChanged",[this.$jskos.prefLabel(t)]),0,"warning",this.$t("alerts.loggedInRegistryChangedUndoButton"),e=>{this.$store.commit({type:"alerts/setCountdown",alert:e,countdown:0}),this.$store.commit({type:"settings/set",prop:"mappingRegistry",value:this.localMappingsRegistry.uri})}))}}else t&&!e&&this.alert(this.$t("alerts.loggedOut"),10,"danger",this.$t("settings.logInButton"),()=>{const e=this.$refs.navbar;e&&e.openSettingsTab&&e.openSettingsTab(0)})},userUris(){this.userUris&&this.userUris.length&&(this.userUris.includes(this.creator.uri)||this.$store.commit({type:"settings/set",prop:"creatorUri",value:this.userUris[0]}))},forceMappingBrowser(e){if(e){let e=this.$refs.mappingBrowserMinimizer;e.minimized=!1}},selected:{handler(){this.selected.scheme[!0]||this.selected.scheme[!1]?this.forceMappingEditor=!1:this.forceMappingEditor=!0},deep:!0},isPageVisible(e){e?this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.start():this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.stop()},"$settings.checkForUpdates"(e){e?this.enableUpdateCheck():(this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.stop(),this.repeatLoadBuildInfo=null)}},created(){this.load(),setTimeout(async()=>{if(this.localMappingsRegistry){const e=await this.getMappings({registry:this.localMappingsRegistry,limit:1});e._totalCount&&e._totalCount>=500&&this.alert(this.$t("general.tooManyMappings",{count:e._totalCount}),0)}},1e4)},methods:{async load(){const e=new Date;this.loadingGlobal=!0,await this.$store.dispatch("loadConfig",y.a.get(this.$route,"query.config")),await this.$store.dispatch("settings/load"),this.config.auth&&await this.$store.dispatch("auth/init",this.config.auth),document.title=this.config.title,this.$i18n.locale=this.settingsLocale,await this.loadSchemes(),await this.$store.dispatch("mapping/loadMappingTrash"),this.loaded=!0,this.loadingGlobal=!1,this.loadFromParametersOnce(!0),this.config.autoRefresh.update&&this.$settings.checkForUpdates&&this.enableUpdateCheck();for(let t of this.config.registries)y.a.isArray(t.schemes)&&(t._jskos.schemes=t.schemes.map(e=>this.schemes.find(t=>this.$jskos.compare(t,e))||e));this.$log.log(`Application loaded in ${(new Date-e)/1e3} seconds.`)},enableUpdateCheck(){this.repeatLoadBuildInfo=ct.a.loadBuildInfo({url:"./build-info.json",buildInfo:this.config.buildInfo,interval:this.config.autoRefresh.update,callImmediately:!1,callback:(e,t,i)=>{!e&&i&&t.gitCommit!=i.gitCommit&&(this.alert(this.$t("alerts.newVersionText"),0,"info",this.$t("alerts.newVersionLink"),()=>{location.reload(!0)}),this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.stop(),this.repeatLoadBuildInfo=null)}})},insertPrefLabel(e){if(!this.$settings.components.ConceptSchemeSelection.insertPrefLabel[!e])return;let t=this.$jskos.prefLabel(this.selected.concept[e],{fallbackToUri:!1}),i=/^[\s\wäüöÄÜÖß]*\w/.exec(t);this.setConceptSearchQuery(e,i?i[0]:"")},setConceptSearchQuery(e,t,i){let s=y.a.get(this,`$refs.conceptSchemeSelection${e?"Right":"Left"}[0]`);s&&s.setConceptSearchQuery(t,i)},refresh(e){"minimize"==e&&(this.itemDetailSettings.left.showTopConceptsInScheme=null!=this.conceptListLeft()&&"1"==this.conceptListLeft().$el.dataset.minimized,this.itemDetailSettings.right.showTopConceptsInScheme=null!=this.conceptListRight()&&"1"==this.conceptListRight().$el.dataset.minimized)},conceptListLeft(){return Array.isArray(this.$refs.conceptListLeft)?this.$refs.conceptListLeft[0]:this.$refs.conceptListLeft},conceptListRight(){return Array.isArray(this.$refs.conceptListRight)?this.$refs.conceptListRight[0]:this.$refs.conceptListRight},swapSides(){let e=this.$route.query;e=Object.assign(e,{from:e.to,fromScheme:e.toScheme,to:e.from,toScheme:e.fromScheme}),this.$router.push({query:e}),this.loadFromParameters(),y.a.delay(()=>{this.insertPrefLabel(!0),this.insertPrefLabel(!1)},300);let t=e=>{let i=y.a.get(e,"__ISOPEN__.true",!1),s=y.a.get(e,"__ISOPEN__.false",!1);if(this.open(e,!0,s),this.open(e,!1,i),e.narrower&&!e.narrower.includes(null))for(let n of e.narrower)t(n)};for(let i of y.a.uniq([e.fromScheme,e.toScheme])){let e=this.topConcepts[i];for(let i of e||[])t(i)}},loadFromParameters(e=!1){this.loading=!0;let t,i=this.$route.query,s=[];try{t=JSON.parse(i["mapping"])}catch(o){t=null}if(t&&e)for(let a of["from","to"])i[a+"Scheme"]||(i[a+"Scheme"]=y.a.get(t[a+"Scheme"],"uri"),this.$jskos.conceptsOfMapping(t,a).length&&(i[a]=y.a.get(this.$jskos.conceptsOfMapping(t,a),"[0].uri")));let n={scheme:{true:i.fromScheme,false:i.toScheme},concept:{true:i.from,false:i.to}};for(let a of[!0,!1]){let e=n.scheme[a],t=null;e&&(t=this.getObject({uri:e}));let i=null;t&&n.concept[a]&&(i=this.saveObject({uri:n.concept[a]},{scheme:t,type:"concept"})),s.push(this.setSelected({concept:i,scheme:t,isLeft:a,noQueryRefresh:!0,noLoading:!0}))}if(i.mapping||i.mappingUri||i.mappingIdentifier){let t=new Promise(e=>{let t=null;try{t=this.$jskos.normalize(JSON.parse(i["mapping"]))}catch(o){}y.a.isEqual(t,{})?e(null):e(t)}),a=(i.mappingUri?this.getMapping({uri:i.mappingUri}):i.mappingIdentifier?this.getMappings({identifier:i.mappingIdentifier}):Promise.resolve([])).then(e=>{if(y.a.isArray(e)||(e=[e].filter(e=>e)),(i.mappingUri||i.mappingIdentifier)&&e.length){let i=e.find(e=>y.a.get(e,"_registry").isAuthorizedFor&&y.a.get(e,"_registry").isAuthorizedFor({type:"mappings",action:"create",user:this.user}))||e[0];return t.then(this.adjustMapping).then(e=>e?[e,i]:[i,i])}return t.then(this.adjustMapping).then(e=>[e])}),r=["from","to"];s.push(a.then(([t,i=null])=>{let s=[];if(t)for(let o of r){const i=t[o+"Scheme"],a=this.$jskos.conceptsOfMapping(t,o),r=Object.keys(t[o]),l="from"==o;if(e&&a.length&&!n.concept[l]){const e=a[0];s.push(this.setSelected({concept:e,scheme:i,isLeft:l,noQueryRefresh:!0,noLoading:!0}))}y.a.forEach(a,(e,n)=>{s.push(this.loadConcepts([e],{scheme:i}).then(([e])=>{t[o][r][n]=e}))})}return Promise.all(s).then(()=>{this.$store.commit({type:"mapping/set",mapping:t,original:i,noQueryRefresh:!0})})}))}Promise.all(s).then(()=>{if(this.loading=!1,Object(qe["b"])(this.$store),e)if(i.search){let e=JSON.parse(i.search);this.forceMappingBrowser=!0,this.searchMappings(e)}else void 0!==i.concordances?this.showConcordances():(i.mappingUri||i.mappingIdentifier)&&(this.forceMappingBrowser=!0,this.searchMappings())}).catch(e=>{this.loading=!1,this.$log.warn(e),this.alert("There was an error loading data from URL.",null,"danger")})},searchMappings(e){let t=this.$refs.mappingBrowser;t&&t.searchWithParams&&t.searchWithParams(e)},showMappingSearch(){this.forceMappingBrowser=!0,this.searchMappings({})},showConcordances(){let e=this.$refs.mappingBrowser;if(e)if(e.concordancesLoaded)null!=e.tabIndexes.concordances&&(this.forceMappingBrowser=!0,e.tab=e.tabIndexes.concordances);else{let t;this.loadingGlobal=!0,t=this.$watch(()=>e.concordancesLoaded,()=>{this.loadingGlobal=!1,null!=e.tabIndexes.concordances&&(this.forceMappingBrowser=!0,e.tab=e.tabIndexes.concordances),t&&t()})}else this.$log.warn("Could not show concordances because MappingBrowser component was not found.")}}},mt=dt,ut=(i("7c55"),Object(u["a"])(mt,n,o,!1,null,null,null)),gt=ut.exports,ft=i("4360"),vt=i("41cb"),yt=i("79fa");i("f9e3"),i("2dd8");i("56d7"),new s["default"]({el:"#app",store:ft["a"],router:vt["a"],components:{App:gt},template:"<App/>",i18n:yt["a"]})},c3e3:function(e,t,i){"use strict";i("a6bd")},c66b:function(e,t,i){"use strict";i("4a6b")},c6cd:function(e,t,i){},c804:function(e,t,i){"use strict";i("398f")},cb24:function(e,t,i){"use strict";i("0229")},cce3:function(e,t,i){},ddf0:function(e,t,i){"use strict";i("5f3b")},f696:function(e,t,i){"use strict";i("65b7")}});
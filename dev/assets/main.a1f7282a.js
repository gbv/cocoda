var ft=Object.defineProperty,vt=Object.defineProperties;var bt=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var Se=(e,s,t)=>s in e?ft(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,$=(e,s)=>{for(var t in s||(s={}))$e.call(s,t)&&Se(e,t,s[t]);if(X)for(var t of X(s))Ce.call(s,t)&&Se(e,t,s[t]);return e},O=(e,s)=>vt(e,bt(s));var k=(e,s)=>{var t={};for(var n in e)$e.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&X)for(var n of X(e))s.indexOf(n)<0&&Ce.call(e,n)&&(t[n]=e[n]);return t};import{f as T,P as yt,n as w,_ as c,g as wt,h as Me,r as ae,j as u,i as re,k as Re,b as W,F as fe,l as _t,a as I,m as Xe,o as P,L as M,p as et,q as tt,B as kt,I as ee,t as St,C as Le,u as $t,v as Ct,T as Mt,w as Rt,x as h,y as Lt,z as xt,A as It,D as Tt,E as Dt,G as Bt,H as At,J as Ft,K as Nt,M as jt,N as Et,O as zt,Q as Ot,R as Pt,S as Ut,U as Wt,W as Vt,X as Ht,Y as Kt,Z as Gt,$ as qt,a0 as Jt,a1 as Zt,a2 as Qt,a3 as Yt,a4 as Xt,a5 as en,a6 as tn,a7 as nn,a8 as sn,a9 as rn,aa as an,ab as on,ac as ln,ad as cn,ae as pn,af as dn,ag as un,ah as hn,ai as gn,aj as mn,ak as fn,al as vn,am as bn,an as yn,ao as wn,ap as _n,aq as kn,ar as Sn,as as $n,at as Cn,au as Mn,av as Rn,aw as Ln,ax as xn,ay as In,az as Tn,aA as Dn,aB as Bn,aC as An,aD as Fn,aE as Nn,aF as jn}from"./vendor.e2187f71.js";const En=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}};En();T.use(yt);var x={computed:{selected(){return this.$store.state.selected},config(){return this.$store.state.config},$settings(){return this.$store.state.settings.settings},settingsLoaded(){return this.$store.state.settings.loaded},configLoaded(){return this.$store.state.configLoaded},componentName(){return this.$options.name},componentSettings(){return this.settingsLoaded?this.$settings.components&&this.$settings.components[this.componentName]||{}:{}},loadingGlobal:{get(){return this.$store.state.loading},set(e){this.$store.commit({type:"setLoading",value:e})}},locale(){return this.$i18n.locale},languages(){return this.$store.getters.languages}}},zn=function(){var e,s=this,t=s.$createElement,n=s._self._c||t;return n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.left",value:s.tooltip?s.$jskos.prefLabel(s.registry,{language:s.locale}):"",expression:"tooltip ? $jskos.prefLabel(registry, { language: locale }) : ''",modifiers:{html:!0,left:!0}}],staticClass:"registry-notation",class:(e={},e[s.isCurrentRegistry?"registry-current-enabled":"registry-enabled"]=!s.disabled,e["registry-notation-current"]=s.isCurrentRegistry,e),style:"width: "+(18+9*(s.$jskos.notation(s.registry).length-1))+"px;"},[s._v(" "+s._s(s.$jskos.notation(s.registry))+" ")])},On=[];const Pn={name:"RegistryNotation",mixins:[x],props:{registry:{type:Object,default:null},disabled:{type:Boolean,default:!1},tooltip:{type:Boolean,default:!0}},computed:{isCurrentRegistry(){return this.$jskos.compareFast(this.registry,this.$store.getters.getCurrentRegistry)}}},xe={};var Un=w(Pn,zn,On,!1,Wn,null,null,null);function Wn(e){for(let s in xe)this[s]=xe[s]}var ve=function(){return Un.exports}(),z={computed:{creator(){return this.$store.getters.creator},creatorName(){return this.$jskos.prefLabel(this.creator,{fallbackToUri:!1})},userName(){return this.$settings.creator},user(){return c.get(this,"$store.state.auth.user")},providers(){return c.get(this,"$store.state.auth.providers")},userUris(){return this.user?[this.user.uri].concat(Object.values(this.user.identities).map(s=>s.uri)).filter(s=>s!=null):null},userIdentityImage(){if(this.userIdentityProvider&&this.userIdentityProvider.image)return this.userIdentityProvider.image},userIdentityProvider(){return this.providerForIdentityUri(this.creator.uri)},authorized(){return c.get(this,"$store.state.auth.authorized")}},methods:{setName(e){return this.$store.dispatch("auth/setName",e)},getNameForIdentity(e){if(e||(this.creator.uri?e=this.creator.uri:e=this.userUris&&this.userUris[0]),!this.user||!e)return null;const s=Object.values(this.user.identities||{}).find(t=>t.uri===e);return s?s.name:this.user.name},providerForIdentityUri(e){let s=null;return c.forEach(this.user&&this.user.identities||{},(t,n)=>{let i=this.providers.find(r=>r.id===n);e===t.uri&&i&&(s=i)}),s},imageForIdentityUri(e){let s=this.providerForIdentityUri(e);return s&&s.image?s.image:null}}},Vn=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{class:{"registry-info-inline":e.inline}},[t("div",[t("registry-notation",{attrs:{registry:e.registry,disabled:e.$store.state.settings.settings.mappingBrowserShowRegistry[e.registry.uri]===!1,tooltip:!1}}),t("span",{class:{"fontWeight-heavy":e.$store.state.settings.settings.mappingBrowserShowRegistry[e.registry.uri]!==!1}},[e._v(" "+e._s(e.$jskos.prefLabel(e.registry,{language:e.locale}))+" ")]),e.showDetails?t("a",{attrs:{href:e.registry.uri,target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"link"}})],1):e._e(),e.showEditable&&e.registry.isAuthorizedFor({type:"mappings",action:"create",user:e.user})?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.$t("registryInfo.canSaveMappings"),expression:"$t('registryInfo.canSaveMappings')"}],staticStyle:{"font-size":"12px","padding-left":"5px"}},[t("font-awesome-icon",{attrs:{icon:"pencil-alt"}})],1):e._e()],1),e.showDetails?t("div",[e._v(" "+e._s(e.$jskos.definition(e.registry,{language:e.locale}).join(" "))+" ")]):e._e(),e.showCapabilities?t("div",[e._l(["schemes","concepts","mappings","annotations","occurrences"],function(n){return t("span",{key:"settings-info-capabilities-"+n},[e.registry.has[n]?t("span",[e.registry.has[n]?t("font-awesome-icon",{staticClass:"text-success",staticStyle:{"margin-left":"5px"},attrs:{icon:"code"}}):e._e(),e._v(" "+e._s(e.$t("registryInfo."+n))+" ")],1):e._e()])}),e.registry.has.auth?t("span",{staticStyle:{"margin-left":"5px"}},[e.registry.isAuthorizedFor({type:"mappings",action:"create",user:e.user})?t("span",{staticClass:"text-success"},[t("font-awesome-icon",{attrs:{icon:"lock-open"}}),e._v(" "+e._s(e.$t("registryInfo.authenticated"))+" ")],1):t("span",{staticClass:"text-danger"},[t("font-awesome-icon",{attrs:{icon:"lock"}}),e._v(" "+e._s(e.$t("registryInfo.notAuthenticated"))+" ")],1)]):e._e()],2):e._e()])},Hn=[];const Kn={name:"RegistryInfo",components:{RegistryNotation:ve},mixins:[z,x],props:{registry:{type:Object,default:null},showDetails:{type:Boolean,default:!0},showCapabilities:{type:Boolean,default:!0},showEditable:{type:Boolean,default:!0},inline:{type:Boolean,default:!1}}},Ie={};var Gn=w(Kn,Vn,Hn,!1,qn,"236a1586",null,null);function qn(e){for(let s in Ie)this[s]=Ie[s]}var oe=function(){return Gn.exports}(),Jn=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.tooltip,delay:e.defaults.delay.medium},expression:"{ title: tooltip, delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[e._v(" "+e._s(e.dateShort)+" ")])},Zn=[];const Qn=wt({props:{date:{type:String,default:""}},setup(e){const s=Me(()=>e.date.slice(0,10)),t=Me(()=>e.date.length>10?e.date.replace("T"," ").replace("Z"," (UTC)"):null);return{dateShort:s,tooltip:t}}}),Te={};var Yn=w(Qn,Jn,Zn,!1,Xn,null,null,null);function Xn(e){for(let s in Te)this[s]=Te[s]}var le=function(){return Yn.exports}();const es=e=>(...s)=>{},_={};for(let e of["log","warn","error"])_[e]=es();const N=ae({}),ue=["narrower","broader","related","previous","next","ancestors","topConcepts","concepts","memberList"],he=["inScheme","topConceptOf","versionOf"],nt=[].concat(ue,he),Z=e=>e&&{uri:e.uri,notation:e.notation};function V(e){if(!e)return null;if(e._registry)return e._registry;const s=m(c.get(e,"inScheme[0]"));return s&&s._registry?s._registry:null}function m(e,{relatedItems:s=!1}={}){let t=null;for(const n of u.getAllUris(e))if(N[n]){t=N[n];break}if(t&&s){t=$({},t);for(const n of nt)t[n]&&(t[n]=t[n].map(i=>m(i)||i))}return t}function st(e,s){return m({uri:e},s)}function ge(e,s){return e.map(t=>m(t,s))}function L(e,s={}){if(!e||!e.uri)throw new Error("Can't save object that is null or undefined or that doesn't have a URI.");const t=e.uri,n=st(t);if(n===e||n&&s.returnIfExists)return n;const i=s.type||(u.isScheme(e)?"scheme":u.isConcept(e)?"concept":null),r=[];for(const o of Object.keys(e))!Array.isArray(e[o])||![].concat(ue,he).includes(o)||(e[o]=e[o].map(d=>d&&d.uri?(he.includes(o)&&(d.__TYPE__="scheme"),ue.includes(o)&&(d.__TYPE__="concept"),r.push(d),{uri:d.uri}):d));if(n){for(let o of Object.keys(e))if((c.isEmpty(n[o])||Array.isArray(n[o])&&n[o].includes(null))&&e[o]!=null&&!c.isEqual(n[o],e[o])||c.isArray(n[o])&&c.isArray(e[o])&&e[o].length>n[o].length)b(n,o,e[o]);else if(!c.isArray(n[o])&&!c.isArray(e[o])&&c.isObject(n[o])&&c.isObject(e[o]))for(let d of Object.keys(e[o]))n[o][d]||b(n,[o,d],e[o][d])}else{if(e.__DETAILSLOADED__=e.__DETAILSLOADED__!=null?e.__DETAILSLOADED__:0,e.__SAVED__=!0,i==="scheme"){const o="http://www.w3.org/2004/02/skos/core#ConceptScheme";e.type=e.type||[],e.type.includes(o)||(e.type=[o].concat(e.type))}if(i==="concept"){const o="http://www.w3.org/2004/02/skos/core#Concept";e.type=e.type||[],e.type.includes(o)||(e.type=[o].concat(e.type)),e.__ISOPEN__={true:!1,false:!1},e.inScheme=e.inScheme||[s.scheme],e.inScheme[0]?e.inScheme=e.inScheme.map(Z):_.warn("saveItem: Saving concept without scheme!!!",e,s)}re(N,t,e);for(const o of e.identifier||[])re(N,o,N[t])}const a=N[t];return r.forEach(l=>{var p=l,{__TYPE__:o}=p,d=k(p,["__TYPE__"]);const g={type:o};o==="concept"&&!(d.inScheme&&d.inScheme[0])&&(i==="concept"?g.scheme=a.inScheme[0]:i==="scheme"&&(g.scheme=a)),L(d,g)}),N[t]}function b(e,s,t){s=c.isArray(s)?s:s.split("."),s.length===1&&nt.includes(s[0])&&Array.isArray(t)&&(t=t.map(Z));const n=s.pop();let i=m(e);for(const r of s)i[r]||re(i,r,{}),i=i[r];re(i,n,t)}const se=ae([]);async function Wr(){for(const e of await W.getSchemes({timeout:1e4}))L(e,{type:"scheme"}),se.find(s=>u.compare(s,e))||se.push({uri:e.uri,identifier:e.identifier});return se}async function De(e,{registry:s,force:t=!1}={}){if(e=m(e)||e,!t&&e.types&&!e.types.includes(null))return e.types;if(s=V(e)||s,!s)throw new Error(`loadTop: Could not find registry for item ${e.uri}`);if(!s.has.types)return b(e,"types",[]),[];try{const n=await s.getTypes({scheme:e});b(e,"types",n)}catch{_.warn(`Error loading types for scheme ${e.uri}; assuming empty types list.`),b(e,"types",[])}return e.types}async function Be(e,{registry:s,force:t=!1}={}){if(e=m(e)||e,!t&&e.topConcepts&&!e.topConcepts.includes(null))return e.topConcepts;if(s=V(e)||s,!s)throw new Error(`loadTop: Could not find registry for item ${e.uri}`);if(!s.has.top)return b(e,"topConcepts",[]),[];try{const n=(await s.getTop({scheme:e})).map(i=>(i.ancestors=[],L(i,{type:"concept",scheme:e})));b(e,"topConcepts",u.sortConcepts(n).map(Z))}catch{_.warn(`Error loading top concepts for scheme ${e.uri}; assuming empty types list.`),b(e,"topConcepts",[])}return e.topConcepts}const A=ae([]),Ae=ae([]);async function q(e,r={}){var a=r,{registry:s,scheme:t,force:n=!1}=a,i=k(a,["registry","scheme","force"]);const o=[];let d=[];e=e.map(p=>m(p,{relatedItems:!0}));for(let p of e.filter(g=>g&&g.uri&&(g.__DETAILSLOADED__<1||n))){const g=V(p)||V(t)||s;if(!g||!n&&[].concat(A,Ae).find(v=>u.compare(v,p)))continue;d=d.concat(u.getAllUris(p)),A.push(p);const f=o.find(v=>v.registry==g&&v.concepts.length<15);f?f.concepts.push(p):o.push({registry:g,concepts:[p]})}const l=o.map(({registry:p,concepts:g})=>p.getConcepts(O($({},i),{concepts:g})).then(f=>{let v=[];for(let y of f)y=L(y,{scheme:t,type:"concept"}),b(y,"__DETAILSLOADED__",1),v=v.concat(u.getAllUris(y));for(let y of v){let S=A.findIndex(D=>u.compareFast(D,{uri:y}));S>=0&&Re(A,S)}}).catch(()=>{}));await Promise.all(l);for(let p of d){let g=A.findIndex(f=>u.compareFast(f,{uri:p}));if(g>=0){let f=A[g];b(f,"__DETAILSLOADED__",-1),Re(A,g),Ae.push(f)}}return e.map(p=>m(p))}async function Fe(e,{registry:s,force:t=!1}={}){if(e=m(e,{relatedItems:!0})||e,!t&&e.narrower&&!e.narrower.includes(null))return e.narrower;if(s=V(e)||s,!s)throw new Error(`loadNarrower: Could not find registry for item ${e.uri}`);if(!s.has.narrower)return b(e,"narrower",[]),[];try{const n=(await s.getNarrower({concept:e})).map(r=>(!e.ancestors||e.ancestors.includes(null)?r.ancestors=[null]:r.ancestors=[e].concat(e.ancestors),(!r.broader||r.broader.includes(null))&&(r.broader=[e]),L(r,{type:"concept",scheme:c.get(e,"inScheme[0]")}))),i=u.sortConcepts(n).map(Z);return b(e,"narrower",i),i}catch(n){return _.error(`Error loading narrower concepts for ${e.uri}`,n),b(e,"narrower",[]),[]}}async function ts(e,{registry:s,force:t=!1}={}){if(e=m(e,{relatedItems:!0})||e,!t&&e.ancestors&&!e.ancestors.includes(null))return e.ancestors;if(s=V(e)||s,!s)throw new Error(`loadAncestors: Could not find registry for item ${e.uri}`);if(!s.has.ancestors)return b(e,"ancestors",[]),[];try{let n=[];const i=(await s.getAncestors({concept:e})).reverse().map(r=>(r.ancestors=n.slice(),n=[{uri:r.uri}].concat(n),L(r,{type:"concept",scheme:c.get(e,"inScheme[0]")}))).map(Z).reverse();return b(e,"ancestors",i),n=[{uri:e.uri}].concat(n),(e.narrower||[]).forEach(r=>{r&&b(r,"ancestors",n.slice())}),i}catch(n){return _.error(`Error loading ancestor concepts for ${e.uri}`,n),b(e,"ancestors",[]),[]}}let ns={},ss={},is=[],rs=[],as=[];var Q={mixins:[x],data(){return{objects:ns,topConcepts:ss,loadingConcepts:is,erroredConcepts:rs,concordances:as}},computed:{schemes(){return se},favoriteSchemes(){let e=[];if(this.schemes.length)for(let s of this.$store.getters.favoriteSchemes){let t=m({uri:s});t&&!this.$jskos.isContainedIn(t,e)&&e.push(t)}return e},favoriteConcepts(){return this.$store.getters.favoriteConcepts},localMappingsRegistry(){return this.config.registries.find(e=>e.constructor.providerName=="LocalMappings")},currentRegistry(){return this.$store.getters.getCurrentRegistry},mappingRegistries(){return this.config.registries.filter(s=>s.has.mappings||s.has.occurrences)},showRegistry(){let e={};for(let s of this.mappingRegistries)Object.defineProperty(e,s.uri,{get:()=>{let t=this.$settings.mappingBrowserShowRegistry[s.uri];return t==null?!0:t},set:t=>{(t||!this.$jskos.compareFast(s,this.currentRegistry))&&(this.$store.commit({type:"settings/set",prop:"mappingBrowserShowRegistry",value:Object.assign({},this.$settings.mappingBrowserShowRegistry,{[s.uri]:t})}),this.$store.commit("mapping/setRefresh",{registry:s.uri}))}});return e}},methods:{getRegistry(e){return e=e||this.currentRegistry,c.isString(e)&&(e={uri:e}),e=this.config.registries.find(s=>u.compareFast(s,e)),e},adjustMapping(e){if(!e)return null;for(let t of["from","to"])if(e[t+"Scheme"]){e[t+"Scheme"]=L(e[t+"Scheme"],{type:"scheme",returnIfExists:!0});let n=e[t+"Scheme"];for(let i of["memberSet","memberList","memberChoice"])c.isArray(e[t][i])&&(e[t][i]=e[t][i].filter(r=>r!=null).map(r=>L(r,{scheme:n,type:"concept",returnIfExists:!0})))}e.partOf&&(e.partOf=e.partOf.map(t=>this.concordances.find(n=>this.$jskos.compare(n,t))||t));const s=c.get(e,"_registry");if(u.mappingRegistryIsStored(s))for(let[t,n]of[["from","to"],["to","from"]]){const i=m(e[`${n}Scheme`]),r=ge(u.conceptsOfMapping(e,t));if(i)for(let a of r){a.__MAPPED__||b(a,"__MAPPED__",[]);const o=a.__MAPPED__.find(d=>u.compareFast(d.registry,s)&&u.compare(d.scheme,i));o&&!o.exist.length?o.exist.push(e.uri):o||a.__MAPPED__.push({registry:s,scheme:i,exist:[e.uri]})}}return this.$store.state.hoveredMapping&&e.uri===this.$store.state.hoveredMapping.uri&&this.$store.commit({type:"setHoveredMapping",mapping:e}),e},prepareMapping(e){if(!e)return null;e=u.copyDeep(e);let s=this.creator;if(s&&(s.uri||s.prefLabel)){const t=(e.contributor||[]).concat(e.creator||[]);e.contributor=[];for(let n of t)!u.compare(n,{identifier:this.userUris||[]})&&!u.isContainedIn(n,e.contributor)&&e.contributor.push(n);e.creator=[s],e.uri&&e.contributor.push(s)}else{e.contributor=e.contributor||[];for(let t of e.creator||[])u.isContainedIn(t,e.contributor)||e.contributor.push(t);this.$delete(e,"creator")}for(let t of["creator","contributor"].filter(n=>e[n])){for(let n of e[t])n.uri===""&&this.$delete(n,"uri"),c.forOwn(n.prefLabel,(i,r)=>{i==""&&this.$delete(n.prefLabel,r)}),c.isEmpty(n.prefLabel)&&this.$delete(n,"prefLabel");e[t]=e[t].filter(n=>!c.isEmpty(n))}return e.creator&&e.creator.length==0&&this.$delete(e,"creator"),e.contributor&&e.contributor.length==0&&this.$delete(e,"contributor"),e},async getMapping(r){var a=r,{registry:e,_adjust:s=!0,uri:t,mapping:n}=a,i=k(a,["registry","_adjust","uri","mapping"]);if(!n&&!t)throw new Error("getMapping: Can't get mapping with neither uri nor mapping.");if(n||(n={uri:t}),e||(e=n._registry||this.config.registries.find(o=>o.has.mappings&&n.uri.startsWith(o._api.mappings))),!e&&n.uri.startsWith("urn:uuid")&&(e=this.localMappingsRegistry),e=this.getRegistry(e),!e)throw new Error("getMappings: No registry to get mappings from.");return n=await e.getMapping($({mapping:n},i)),s&&this.adjustMapping(n),n},async getMappings(n){var i=n,{registry:e,_adjust:s=!0}=i,t=k(i,["registry","_adjust"]);if(e=this.getRegistry(e),!e)throw new Error("getMappings: No registry to get mappings from.");if(!e.has.mappings)throw new Error(`getMappings: Registry ${e.uri} does not support mappings.`);for(const{param:a,relatedItems:o=!1}of[{param:"from",relatedItems:!0},{param:"to",relatedItems:!0},{param:"fromScheme"},{param:"toScheme"}])t[a]&&(t[a]=m(t[a],{relatedItems:o})||t[a]);const r=await e.getMappings(t);if(s)for(let a of r)this.adjustMapping(a);return r},_addIdentityParams(e){e.params=e.params||{},e.params.identity=this.$settings.creatorUri,e.params.identityName=this.$settings.creator},async postMapping(o){var d=o,{registry:e,_adjust:s=!0,_reload:t=!0,_alert:n=!0,_before:i,_after:r}=d,a=k(d,["registry","_adjust","_reload","_alert","_before","_after"]);if(e=this.getRegistry(e||a.mapping._registry),!e)throw new Error("postMapping: No registry to post mapping to.");i&&i();try{a.mapping=this.prepareMapping(a.mapping),this._addIdentityParams(a);const l=await e.postMapping(a);return s&&this.adjustMapping(l),t&&this.$store.commit("mapping/setRefresh",{registry:e.uri}),n&&(this.alert(this.$t("alerts.mappingSaved",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success"),u.compare(e,this.localMappingsRegistry)&&!this.$settings.hasWrittenIntoLocalMappings&&(this.alert(this.$t("alerts.localMappingsFirstSaved"),0,"warning"),this.$store.commit({type:"settings/set",prop:"hasWrittenIntoLocalMappings",value:!0}))),r&&r(),l}catch(l){if(n){let p=`${this.$t("alerts.mappingNotSaved",[u.prefLabel(e,{fallbackToUri:!1})])} ${this.getErrorMessage(l)}`;this.alert(p,null,"danger")}throw r&&r(l),l}},async postMappings(o){var d=o,{registry:e,_adjust:s=!0,_reload:t=!0,_alert:n=!0,_before:i,_after:r}=d,a=k(d,["registry","_adjust","_reload","_alert","_before","_after"]);if(e=this.getRegistry(e),!e)throw new Error("postMappings: No registry to post mappings to.");i&&i();try{a.mappings=a.mappings.map(p=>this.prepareMapping(p)),this._addIdentityParams(a);const l=await e.postMappings(a);if(s)for(let p of l)this.adjustMapping(p);return t&&this.$store.commit("mapping/setRefresh",{registry:e.uri}),n&&this.alert(this.$t("alerts.mappingSaved",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success"),r&&r(),l}catch(l){if(n){let p=`${this.$t("alerts.mappingNotSaved",[u.prefLabel(e,{fallbackToUri:!1})])} ${this.getErrorMessage(l)}`;this.alert(p,null,"danger")}throw r&&r(l),l}},async putMapping(o){var d=o,{registry:e,_adjust:s=!0,_reload:t=!0,_alert:n=!0,_before:i,_after:r}=d,a=k(d,["registry","_adjust","_reload","_alert","_before","_after"]);if(e=this.getRegistry(e||a.mapping._registry),!e)throw new Error("putMapping: No registry to put mapping to.");i&&i();try{a.mapping=this.prepareMapping(a.mapping),this._addIdentityParams(a);const l=await e.putMapping(a);return s&&this.adjustMapping(l),t&&this.$store.commit("mapping/setRefresh",{registry:e.uri}),n&&this.alert(this.$t("alerts.mappingSaved",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success"),r&&r(),l}catch(l){if(n){const p=`${this.$t("alerts.mappingNotSaved",[u.prefLabel(e,{fallbackToUri:!1})])} ${this.getErrorMessage(l)}`;this.alert(p,null,"danger")}throw r&&r(l),l}},async deleteMapping(o){var d=o,{registry:e,_reload:s=!0,_alert:t=!0,_trash:n=!0,_before:i,_after:r}=d,a=k(d,["registry","_reload","_alert","_trash","_before","_after"]);if(e=this.getRegistry(e||a.mapping._registry),!e)throw new Error("deleteMapping: No registry to delete mapping from.");i&&i();try{return await e.deleteMapping(a),this.mappingWasDeleted({mapping:a.mapping,registry:e,_trash:n}),s&&this.$store.commit("mapping/setRefresh",{registry:e.uri}),t&&this.alert(this.$t("alerts.mappingDeleted",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success",this.$t("general.undo"),l=>{this.$store.commit({type:"alerts/setCountdown",alert:l,countdown:0}),this.$store.dispatch({type:"mapping/restoreMappingFromTrash",uri:a.mapping.uri}).then(p=>{p?this.alert(this.$t("alerts.mappingRestored",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success"):this.alert(this.$t("alerts.mappingNotRestored",[u.prefLabel(e,{fallbackToUri:!1})]),null,"danger")})}),r&&r(),!0}catch(l){if(t){const p=`${this.$t("alerts.mappingNotDeleted",[u.prefLabel(e,{fallbackToUri:!1})])} ${this.getErrorMessage(l)}`;this.alert(p,null,"danger")}throw r&&r(l),l}},async deleteMappings(o){var d=o,{registry:e,_reload:s=!0,_alert:t=!0,_trash:n=!0,_before:i,_after:r}=d,a=k(d,["registry","_reload","_alert","_trash","_before","_after"]);if(e=this.getRegistry(e||c.get(a,"mappings[0]._registry")),!e)throw new Error("deleteMapping: No registry to delete mapping from.");i&&i();try{await e.deleteMappings(a);for(let l of a.mappings)this.mappingWasDeleted({mapping:l,registry:e,_trash:n});return s&&this.$store.commit("mapping/setRefresh",{registry:e.uri}),t&&this.alert(this.$t("alerts.mappingDeleted",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success",this.$t("general.undo"),l=>{this.$store.commit({type:"alerts/setCountdown",alert:l,countdown:0}),this.$store.dispatch({type:"mapping/restoreMappingFromTrash",uri:a.mapping.uri}).then(p=>{p?this.alert(this.$t("alerts.mappingRestored",[u.prefLabel(e,{fallbackToUri:!1})]),null,"success"):this.alert(this.$t("alerts.mappingNotRestored",[u.prefLabel(e,{fallbackToUri:!1})]),null,"danger")})}),r&&r(),!0}catch(l){if(t){const p=`${this.$t("alerts.mappingNotDeleted",[u.prefLabel(e,{fallbackToUri:!1})])} ${this.getErrorMessage(l)}`;this.alert(p,null,"danger")}throw r&&r(l),l}},mappingWasDeleted({mapping:e,registry:s,_trash:t}){if(t&&this.$store.commit({type:"mapping/addToTrash",mapping:e,registry:s}),e.uri==this.$store.state.mapping.original.uri&&u.compare(s,this.$store.state.mapping.original.registry)&&this.$store.commit({type:"mapping/set"}),u.mappingRegistryIsStored(s))for(let[n,i]of[["from","to"],["to","from"]]){const r=m(e[`${i}Scheme`]),a=ge(u.conceptsOfMapping(e,n));if(r)for(let o of a){const d=(o.__MAPPED__||[]).find(l=>u.compare(l.registry,s)&&u.compare(l.scheme,r));!d||!d.exist.length||this.$set(d,"exist",d.exist.filter(l=>l!=e.uri))}}},canCreateMapping({registry:e,mapping:s,user:t=this.user}){if(!s||!e)return!1;for(let n of["fromScheme","toScheme"]){if(!s[n])return!1;const i=c.get(e,`config.mappings.${n}Whitelist`);if(i&&!i.find(a=>u.compare(a,s[n]))||c.get(e,"config.mappings.cardinality")=="1-to-1"&&u.conceptsOfMapping(s,"to").length>1)return!1}return!!e.isAuthorizedFor({type:"mappings",action:"create",user:t})},canUpdateMapping({registry:e,mapping:s,user:t=this.user}){return!s||(e=e||s._registry,!e)?!1:e.isAuthorizedFor({type:"mappings",action:"update",user:t,crossUser:!this.$jskos.userOwnsMapping(t,s)})},canDeleteMapping({registry:e,mapping:s,user:t=this.user}){if(!s||(e=e||s._registry,!e))return!1;let n=!u.userOwnsMapping(t,s);return e.isAuthorizedFor({type:"mappings",action:"delete",user:t,crossUser:n})},repeat(...e){return W.repeat(...e)}}};const j={window:null,eventType:null};function it({url:e,eventType:s}){j.window=window.open(e),j.eventType=s}function os({eventType:e}={}){j.window&&j.eventType==e&&setTimeout(()=>{j.window&&j.window.close(),j.window=null},100)}var ls=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("b-modal",{ref:"settingsModal",attrs:{id:"settingsModal",title:e.$t("settings.title"),"hide-footer":"",centered:"",size:"lg"}},[t("b-card",{attrs:{"no-body":"","footer-tag":"footer"}},[t("tabs",{attrs:{fill:"",value:e.tab},on:{change:function(n){return e.$emit("update:tab",n.index)}}},[t("tab",{attrs:{title:e.$t("settingsTabs")[0]}},[e.localSettings?t("div",[e.user&&e.authorized?t("p",[t("span",{staticClass:"text-success"},[e._v(" "+e._s(e.$t("settings.loggedIn"))+" ")]),t("a",{attrs:{href:e.$store.state.auth.about.baseUrl+"account",target:"_blank"}},[e._v(" "+e._s(e.$t("settings.accountPage"))+" ")]),e._v(" \u2022 "),t("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.login(null)}}},[e._v(" "+e._s(e.$t("settings.logOutButton"))+" ")])]):e.config.auth?t("p",[t("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("settings.loggedOut"))+" ")])]):e._e(),e.$store.state.auth.available&&!e.user&&e.providers.length?t("p",e._l(e.providers,function(n){return t("b-button",{key:"login-provider-"+n.id,attrs:{block:"",variant:"light"},on:{click:function(i){return e.login(n)}}},[n.image?t("img",{staticStyle:{"margin-right":"5px"},attrs:{src:n.image,height:"20px"}}):e._e(),e._v(" "+e._s(e.$t("settings.logInButton"))+" via "+e._s(n.name)+" ")])}),1):e._e(),e.$store.state.auth.connected?t("div",[t("p",[t("span",{domProps:{innerHTML:e._s(e.$t("settings.accountInfo",{url:e.config.auth}))}}),e.$store.state.auth.about.urls.imprint?t("a",{attrs:{href:e.$store.state.auth.about.urls.imprint,target:"_blank"}},[e._v(" "+e._s(e.$t("settings.impressum"))+" ")]):e._e(),e._v(" \u2022 "),e.$store.state.auth.about.urls.privacy?t("a",{attrs:{href:e.$store.state.auth.about.urls.privacy,target:"_blank"}},[e._v(" "+e._s(e.$t("settings.privacyPolicy"))+" ")]):e._e()])]):e._e(),t("p",[e._v(" "+e._s(e.$t("settings.creatorInfo"))+" ")]),t("p",[t("b",[e._v(e._s(e.$t("settings.creator")))]),t("b-form-input",{attrs:{placeholder:e.$t("settings.creatorPlaceholder"),type:"text"},model:{value:e.localSettings.creator,callback:function(n){e.$set(e.localSettings,"creator",n)},expression:"localSettings.creator"}})],1),t("p",[t("b",[e._v(e._s(e.$t("settings.creatorUri")))]),!e.user||!e.userUris||!e.userUris.length?t("span",[t("b-form-input",{attrs:{state:!e.localSettings.creatorUri||e.$jskos.isValidUri(e.localSettings.creatorUri),placeholder:"https://",type:"text"},model:{value:e.localSettings.creatorUri,callback:function(n){e.$set(e.localSettings,"creatorUri",n)},expression:"localSettings.creatorUri"}}),e.localSettings.creatorUri&&!e.$jskos.isValidUri(e.localSettings.creatorUri)?t("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.$t("settings.creatorUriInvalid"))+" ")]):e._e()],1):t("span",[t("b-form-select",{model:{value:e.localSettings.creatorUri,callback:function(n){e.$set(e.localSettings,"creatorUri",n)},expression:"localSettings.creatorUri"}},e._l(e.userUris,function(n){return t("option",{key:"settings-uris-"+n,domProps:{value:n}},[e._v(" "+e._s(n)+" ")])}),0)],1)])]):e._e()]),t("tab",{attrs:{title:e.$t("settingsTabs")[1]}},[t("h4",[e._v(e._s(e.$t("settings.mappingRegistries")))]),e._l(e.config.registries.filter(function(n){return e.$jskos.mappingRegistryIsStored(n)}),function(n,i){return t("div",{key:"settingsModal-mapping-registries-"+i,staticClass:"settingsModal-mapping-registry",class:{"selected-registry":e.$jskos.compareFast(n,e.currentRegistry)}},[t("b-form-checkbox",{attrs:{disabled:e.$jskos.compareFast(n,e.currentRegistry)},model:{value:e.showRegistry[n.uri],callback:function(r){e.$set(e.showRegistry,n.uri,r)},expression:"showRegistry[registry.uri]"}}),t("registry-info",{staticClass:"settings-sources",attrs:{registry:n},nativeOn:{click:function(r){return e.$store.commit({type:"settings/set",prop:"mappingRegistry",value:n.uri})}}})],1)}),t("h4",[e._v(e._s(e.$t("settings.otherRegistries")))]),e._l(e.config.registries.filter(function(n){return!e.$jskos.mappingRegistryIsStored(n)}),function(n,i){return t("div",{key:"settingsModal-other-registries-"+i,staticClass:"settingsModal-mapping-registry"},[n.has.mappings?t("b-form-checkbox",{model:{value:e.showRegistry[n.uri],callback:function(r){e.$set(e.showRegistry,n.uri,r)},expression:"showRegistry[registry.uri]"}}):e._e(),t("registry-info",{staticClass:"settings-sources",attrs:{registry:n}})],1)})],2),t("tab",{attrs:{title:e.$t("settingsTabs")[2]}},[t("div",{staticClass:"settingsModal-componentSettings-component"},[e.localSettings?t("div",{staticClass:"form-inline"},[t("label",{staticStyle:{"padding-right":"0.5em"}},[e._v(e._s(e.$t("settings.language"))+":")]),t("b-form-select",{model:{value:e.$i18n.locale,callback:function(n){e.$set(e.$i18n,"locale",n)},expression:"$i18n.locale"}},e._l(e.config.languages,function(n){return t("option",{key:n,domProps:{value:n}},[e._v(" "+e._s(e.$t("languages."+n))+" ")])}),0)],1):e._e(),t("span",{staticClass:"fontSize-small text-lightGrey",domProps:{innerHTML:e._s(e.$t("settings.languageContribution"))}})]),e.localSettings?t("div",{staticClass:"settingsModal-componentSettings-component"},[t("h5",[e._v(e._s(e.$t("settings.preferredLanguages")))]),t("div",[e._v(" "+e._s(e.$t("settings.preferredLanguagesAdd"))+": "),t("b-form-input",{attrs:{size:"sm",list:"languages-datalist"},nativeOn:{keydown:function(n){return e.addLanguageKeydown.apply(null,arguments)},input:function(n){return e.addLanguageInput.apply(null,arguments)}},model:{value:e.languageToAdd,callback:function(n){e.languageToAdd=n},expression:"languageToAdd"}}),t("datalist",{attrs:{id:"languages-datalist"}},e._l(e.allLanguages,function(n){return t("option",{key:n.uri},[e._v(" "+e._s(n.notation[0])+" "+e._s(e.$jskos.prefLabel(n,{language:e.locale}))+" ")])}),0)],1),t("ul",e._l(e.localSettings.preferredLanguages,function(n,i){return t("li",{key:i},[t("div",{staticClass:"button fontSize-verySmall",staticStyle:{display:"inline-block","margin-right":"2px"},on:{click:function(r){return e.removeLanguage(n)}}},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),t("div",{staticClass:"button fontSize-verySmall",staticStyle:{display:"inline-block","margin-right":"2px"},on:{click:function(r){return e.moveLanguage(i,1)}}},[t("font-awesome-icon",{attrs:{icon:"arrow-down"}})],1),t("div",{staticClass:"button fontSize-verySmall",staticStyle:{display:"inline-block"},on:{click:function(r){return e.moveLanguage(i,-1)}}},[t("font-awesome-icon",{attrs:{icon:"arrow-up"}})],1),e._v(" "+e._s(e.$jskos.prefLabel(e.languageConceptByTag(n),{language:e.locale})||n)+" ")])}),0)]):e._e(),t("div",{staticClass:"settingsModal-componentSettings-component"},[t("b-button",{attrs:{variant:"primary"},on:{click:e.resetFlex}},[e._v(" "+e._s(e.$t("settings.resetSizes"))+" ")])],1),e._l(e.components,function(n){return t("div",{key:"settings-componentSettings-"+n.name,staticClass:"settingsModal-componentSettings-component"},[t("h5",[e._v(e._s(n.name))]),e._l(n.settings,function(i){return t("div",{key:"settings-componentSettings-"+n.name+"-"+i.key+"-"+i.isLeft},[i.type=="Boolean"?t("div",[t("b-form-checkbox",{staticStyle:{"user-select":"none"},model:{value:n.settingsValues[i.key+(i.sideDependent?"-"+i.isLeft:"")],callback:function(r){e.$set(n.settingsValues,i.key+(i.sideDependent?"-"+i.isLeft:""),r)},expression:"component.settingsValues[setting.key + (setting.sideDependent ? `-${setting.isLeft}` : '')]"}},[e._v(" "+e._s(e.$jskos.prefLabel(i,{language:e.locale}))+" "+e._s(i.sideDependent?" ("+e.$t("general."+(i.isLeft?"left":"right"))+")":"")+" ")]),t("span",{staticClass:"fontSize-small text-lightGrey"},[e._v(" "+e._s((e.$jskos.languageMapContent(i,"definition",{language:e.locale})||[])[0])+" "+e._s(e.$t("general.default"))+": "+e._s(i.default?e.$t("general.enabled"):e.$t("general.disabled"))+" ")])],1):i.type=="Number"?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.languageMapContent(i,"definition",{language:e.locale}),delay:e.defaults.delay.medium},expression:"{ title: $jskos.languageMapContent(setting, 'definition', { language: locale }), delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[e._v(" "+e._s(e.$jskos.prefLabel(i,{language:e.locale}))+" "+e._s(i.sideDependent?" ("+e.$t("general."+(i.isLeft?"left":"right"))+")":"")+" "),t("b-input",{staticStyle:{display:"inline-block",width:"auto"},attrs:{type:"number",min:i.min,max:i.max,size:"sm"},on:{click:function(r){return r.target.select()}},model:{value:n.settingsValues[i.key+(i.sideDependent?"-"+i.isLeft:"")],callback:function(r){e.$set(n.settingsValues,i.key+(i.sideDependent?"-"+i.isLeft:""),r)},expression:"component.settingsValues[setting.key + (setting.sideDependent ? `-${setting.isLeft}` : '')]"}}),t("br"),t("span",{staticClass:"fontSize-small text-lightGrey"},[e._v(" "+e._s((e.$jskos.languageMapContent(i,"definition",{language:e.locale})||[])[0])+" "+e._s(e.$t("general.default"))+": "+e._s(i.default)+" ")])],1):t("div",{class:i.class},[e._v(" "+e._s(e.$jskos.prefLabel(i,{language:e.locale}))+" ")])])})],2)})],2),e.config.shortcuts&&e.config.shortcuts.length?t("tab",{attrs:{title:e.$t("settingsTabs")[3]}},[t("table",{staticClass:"table table-borderless",staticStyle:{height:"unset"}},[t("tbody",e._l(e.config.shortcuts,function(n){return t("tr",{key:"settingsModal-shortcuts-"+n.id},[t("td",[t("span",{domProps:{innerHTML:e._s(n.keys.split(",").map(function(i){return i.split("+").map(function(r){return"<kbd>"+e.replaceKey(r)+"</kbd>"}).join(" + ")}).join(" "+e.$t("general.or")+" "))}})]),t("td",{staticClass:"text-left"},[e._v(" "+e._s(e.$jskos.prefLabel(n,{language:e.locale})||n.action)+" ")])])}),0)])]):e._e(),e.localMappingsRegistry?t("tab",{attrs:{title:e.$t("settingsTabs")[4]}},[t("div",[t("p",[e._v(e._s(e.$t("settings.localMappingsInfo")))])]),e.localMappingsRegistry&&e.dlAllMappings&&e.dlMappingsReady?t("div",[t("h4",[e._v(e._s(e.$t("settings.localDownload")))]),e._l(e.dlMappings,function(n,i){return t("span",{key:i},[e._v(" "+e._s(n.label)+" ("+e._s(n.mappings.length)+"): "),t("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),e.downloadFile(n.filename+".ndjson",n.ndjson)}}},[e._v(" JSKOS ")]),t("a",{attrs:{href:""},on:{click:function(r){return r.preventDefault(),e.downloadFile(n.filename+".csv",n.csv)}}},[e._v(" CSV ")]),t("br")])}),t("br"),t("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.downloadFile("mappings.ndjson",e.dlAllMappings)}}},[e._v(" "+e._s(e.$t("settings.localDownloadJskos",[e.dlAllMappings.split(`
`).length]))+" ")]),t("br"),t("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.downloadFile("mappings.csv",e.dlAllMappingsCsv)}}},[e._v(" "+e._s(e.$t("settings.localDownloadCsv",[e.dlAllMappingsCsv.split(`
`).length-2]))+" ")])],2):e._e(),t("br"),e.localMappingsRegistry?t("div",[t("h4",[e._v(e._s(e.$t("settings.localUpload")))]),t("b-form-file",{ref:"fileUpload",attrs:{state:Boolean(e.uploadedFile),placeholder:e.$t("settings.localUploadPlaceholder"),accept:".ndjson"},model:{value:e.uploadedFile,callback:function(n){e.uploadedFile=n},expression:"uploadedFile"}}),t("p",[e._v(" "+e._s(e.uploadedFileStatus)+" ")])],1):e._e(),e.localMappingsRegistry&&e.dlAllMappings?t("div",[t("h4",[e._v(e._s(e.$t("settings.localDeleteTitle")))]),t("b-button",{attrs:{disabled:!e.dlAllMappings,variant:"danger","hide-footer":""},on:{click:function(n){e.deleteMappingsButtons=!0}}},[e._v(" "+e._s(e.$t("settings.localDeleteText"))+" ")]),e.deleteMappingsButtons?t("p",[e._v(" "+e._s(e.$t("settings.localDeleteSure"))+" "),t("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:e.deleteMappings_}},[e._v(" "+e._s(e.$t("general.yes"))+" ")]),t("b-button",{attrs:{variant:"success",size:"sm"},on:{click:function(n){e.deleteMappingsButtons=!1}}},[e._v(" "+e._s(e.$t("general.no"))+" ")])],1):e._e()],1):e._e(),t("br"),t("br"),e.localMappingsRegistry&&e.dlAllMappings?t("div",[t("h4",[e._v(e._s(e.$t("settings.creatorRewriteTitle")))]),t("p",{domProps:{innerHTML:e._s(e.$t("settings.creatorRewriteText"))}}),t("p",{staticClass:"fontSize-small"},[t("b",[e._v("Name:")]),e._v(" "+e._s(e.$jskos.prefLabel(e.creator,{language:e.locale}))),t("br"),t("b",[e._v("URI:")]),e._v(" "+e._s(e.creator.uri)+" ")]),t("p",[t("b-button",{attrs:{variant:e.creatorRewritten?"success":"primary"},on:{click:e.rewriteCreator}},[e._v(" "+e._s(e.$t("settings.creatorRewriteButton"))+" ")])],1)]):e._e()]):e._e(),t("span",{staticClass:"settingsModal-footer"},[t("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:["fab","github"]}}),e._v(" GitHub ")],1),e.config.buildInfo.version&&e.config.buildInfo.version!=""?t("span",[e._v(" \u2022 "+e._s(e.$t("settings.version"))+" "+e._s(e.config.buildInfo.version)+" ")]):e._e(),e.config.buildInfo.gitCommit&&e.config.buildInfo.gitCommitShort?t("span",[e._v(" \u2022 "+e._s(e.$t("settings.currentCommit"))+": "),t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.config.buildInfo.gitCommitMessage,delay:e.defaults.delay.short},expression:"{ title: config.buildInfo.gitCommitMessage, delay: defaults.delay.short }",modifiers:{hover:!0}}],attrs:{href:"https://github.com/gbv/cocoda/commit/"+e.config.buildInfo.gitCommit,target:"_blank"}},[e._v(" "+e._s(e.config.buildInfo.gitCommitShort)+" ")])]):e._e(),e.config.buildInfo.buildDate?t("span",[e._v(" \u2022 "+e._s(e.$t("settings.buildDate"))+": "),t("date-string",{attrs:{date:e.config.buildInfo.buildDate}})],1):e._e(),t("br"),t("span",[e._v(" "+e._s(e.$t("settings.suggestions1"))+" "),t("a",{attrs:{href:"https://github.com/gbv/cocoda/issues",target:"_blank"}},[e._v(e._s(e.$t("settings.suggestions2")))]),e._v(e._s(e.$t("settings.suggestions3"))+" ")])])],1)],1)],1)},cs=[];const ps={name:"TheSettings",components:{RegistryInfo:oe,DateString:le},mixins:[z,Q,x],props:{tab:{type:Number,default:0}},data(){return{localSettings:null,creatorRewritten:!1,dlMappingsReady:!1,dlAllMappings:null,dlAllMappingsCsv:null,dlMappings:[],uploadedFile:null,uploadedFileStatus:"",deleteMappingsButtons:!1,updateLocalSettings:c.debounce(()=>{this.$store.commit({type:"settings/save",settings:c.cloneDeep(this.localSettings)}),this.creatorRewritten=!1},200),languagesRegistry:W.initializeRegistry({provider:"ConceptApi",api:"https://bartoc.org/api/",schemes:[{uri:"http://bartoc.org/en/node/20287"}]}),allLanguages:[],languageToAdd:"",addLanguageKeypress:!1}},computed:{availableMappingRegistries(){return this.config.registries.filter(e=>e.isAuthorizedFor({type:"mappings",action:"create",user:this.user}))},components(){let e=[];for(let s of Object.keys(this.$store.state.settings.componentSettings)){let t={name:s,settings:[],settingsValues:{}};for(let n of Object.keys(this.$store.state.settings.componentSettings[s])){let i=this.$store.state.settings.componentSettings[s][n];for(let r of i.sideDependent?[!0,!1]:[void 0])t.settings.push(Object.assign({key:n,isLeft:r},i)),Object.defineProperty(t.settingsValues,n+(i.sideDependent?`-${r}`:""),{get:()=>i.sideDependent?this.$settings.components[s][n][r]:this.$settings.components[s][n],set:a=>{i.type=="Boolean"&&!c.isBoolean(a)&&(a=!!a),i.type=="Number"&&!c.isNumber(a)&&(a=parseInt(a),(isNaN(a)||a<i.min||a>i.max)&&(this.$log.warn(`Tried to save invalid value for setting ${s} -> ${n}, fallback to default value (${i.default}).`),a=i.default)),this.$store.commit({type:"settings/setComponentSetting",component:s,setting:n,isLeft:r,value:a})}})}e.push(t)}return e}},watch:{localSettings:{handler(){this.updateLocalSettings()},deep:!0},uploadedFile(){if(this.uploadedFile&&this.localMappingsRegistry){let e=new FileReader;e.onloadend=s=>{let t,n;t=s.target.result.split(`
`),n={imported:0,skipped:0,error:0,empty:0};let r=[];for(let a of t){if(a===""){n.empty+=1;continue}try{let o=JSON.parse(a);r.push(o)}catch{n.error+=1}}this.postMappings({mappings:r,registry:this.localMappingsRegistry,_alert:!1,_refresh:!1}).then(a=>{n.imported=a.length,n.skipped=t.length-n.imported-n.error-n.empty,this.uploadedFileStatus=`${n.imported} mappings imported, ${n.skipped} skipped, ${n.error} errored`,this.$refs.fileUpload.reset(),this.refreshDownloads(),this.$store.commit("mapping/setRefresh",{registry:this.localMappingsRegistry})}).catch(a=>{this.$log.error("TheSettings - Error uploading mappings",a)})},e.readAsText(this.uploadedFile)}},"localSettings.creatorUri"(e){const s=this.getNameForIdentity(e);s&&(this.localSettings.creator=s)},user(){this.localSettings=c.cloneDeep(this.$settings)}},created(){this.languagesRegistry.getTop({scheme:this.languagesRegistry.schemes[0]}).then(e=>{this.allLanguages=e})},methods:{show(){this.$refs.settingsModal.show(),this.localSettings=c.cloneDeep(this.$settings),this.refreshDownloads()},refreshDownloads(){if(!this.localMappingsRegistry)return;this.dlMappingsReady=!1,this.dlAllMappings=null,this.dlMappings=[];let e=[];this.getMappings({registry:this.localMappingsRegistry}).then(s=>{e=s;let t=[];for(let n of e)for(let i of["from","to"])for(let r of this.$jskos.conceptsOfMapping(n,i)){let a=n[i+"Scheme"];(!r.inScheme||!r.inScheme.length)&&(r.inScheme=[a]),t.push(q([r],{scheme:a}))}return Promise.all(t)}).then(()=>{let s=i=>{let r=this.$jskos.minifyMapping(i);for(let a of this.$jskos.conceptsOfMapping(r)){let o=m(a),d=this.$jskos.languagePreference.selectLanguage(c.get(o,"prefLabel"));d&&(a.prefLabel=c.pick(o.prefLabel,[d]))}return JSON.stringify(r)};this.dlAllMappings=e.map(s).join(`
`);for(let i of e){i.fromScheme=m(i.fromScheme)||i.fromScheme,i.toScheme=m(i.toScheme)||i.toScheme;let r=this.dlMappings.find(a=>this.$jskos.compare(i.fromScheme,a.fromScheme)&&this.$jskos.compare(i.toScheme,a.toScheme));r?r.mappings.push(i):(r={fromScheme:i.fromScheme,toScheme:i.toScheme,mappings:[i]},this.dlMappings.push(r))}let t=this.$jskos.mappingCSV({lineTerminator:`\r
`,labels:!0,creator:!0,language:"de"}),n=[];for(let i of this.dlMappings){i.ndjson=i.mappings.map(s).join(`
`),i.mappings=i.mappings.map(r=>this.$jskos.minifyMapping(r)),n=n.concat(i.mappings);for(let r of i.mappings){for(let a of this.$jskos.conceptsOfMapping(r)){let o=m(a),d=this.$jskos.languagePreference.selectLanguage(c.get(o,"prefLabel"));d&&(a.prefLabel={de:c.get(o.prefLabel,d)})}r.creator&&r.creator[0]&&(r.creator[0].prefLabel={de:this.$jskos.prefLabel(r.creator[0],{fallbackToUri:!1,language:this.locale})})}i.csv=t.fromMappings(i.mappings),i.label=(this.$jskos.notation(c.get(i,"fromScheme"),"scheme")||"?")+" to "+(this.$jskos.notation(c.get(i,"toScheme"),"scheme")||"?"),i.filename=`${this.$jskos.notation(c.get(i,"fromScheme"),"scheme")||"?"}_to_${this.$jskos.notation(c.get(i,"toScheme"),"scheme")||"?"}_${this.localSettings.creator}`}this.dlAllMappingsCsv=t.fromMappings(n),this.dlMappingsReady=!0}).catch(s=>{this.$log.error("TheSettings - Error refreshing local mappings download",s)})},async rewriteCreator(){if(!!this.localMappingsRegistry)try{const e=await this.getMappings({registry:this.localMappingsRegistry});for(let s of e)await this.putMapping({mapping:s,_reload:!1,_alert:!1});this.creatorRewritten=!0,this.$store.commit("mapping/setRefresh",{registry:this.localMappingsRegistry}),this.refreshDownloads()}catch(e){this.$log.error("TheSettings - Error rewriting creator",e)}},resetFlex(){let e=c.cloneDeep(this.localSettings.flex);c.forOwn(e,(s,t)=>{e[t]=""}),this.$store.commit({type:"settings/set",prop:"flex",value:e})},async deleteMappings_(){if(!!this.localMappingsRegistry)try{const e=await this.getMappings({registry:this.localMappingsRegistry});await this.deleteMappings({mappings:e,registry:this.localMappingsRegistry,_alert:!1,_refresh:!1,_trash:!1}),this.$store.commit("mapping/setRefresh",{registry:this.localMappingsRegistry}),this.refreshDownloads(),this.deleteMappingsButtons=!1,this.$store.commit("mapping/clearTrash")}catch(e){this.$log.error("TheSettings - Error deleting local mappings",e)}},login(e){let s,t;e?(s=e.loginURL,t="login"):(s=this.config.auth+"logout",t="logout"),it({url:s,eventType:t})},replaceKey(e){return{shift:"Shift",alt:"Alt",option:"Alt",ctrl:"Ctrl",meta:"Cmd",command:"Cmd"}[e]||e},languageConceptByTag(e){return this.allLanguages.find(s=>s.notation[0]===e)},addLanguageKeydown(e){e.key&&(this.addLanguageKeypress=!0),e.key==="Enter"&&this.addLanguage()},addLanguageInput(){this.addLanguageKeypress||this.addLanguage(),this.addLanguageKeypress=!1},addLanguage(){const e=this.languageToAdd.split(" ")[0];(this.allLanguages.length===0||this.allLanguages.find(s=>s.notation[0]===e))&&(this.localSettings.preferredLanguages.push(e),this.languageToAdd="")},removeLanguage(e){this.localSettings.preferredLanguages=this.localSettings.preferredLanguages.filter(s=>s!==e)},moveLanguage(e,s){const t=e+s;if(t===-1||t===this.localSettings.preferredLanguages.length)return;const n=this.localSettings.preferredLanguages[e];this.localSettings.preferredLanguages.splice(e,1),this.localSettings.preferredLanguages.splice(t,0,n)}}},Ne={};var ds=w(ps,ls,cs,!1,us,"27fb8346",null,null);function us(e){for(let s in Ne)this[s]=Ne[s]}var hs=function(){return ds.exports}(),be={methods:{dragStart(e,s){s.dataTransfer.setData("text",e.uri),this.$store.commit({type:"setDraggedConcept",concept:{uri:e.uri}})},dragEnd(){this.$store.commit({type:"setDraggedConcept",concept:null})},dragOver(e){e.preventDefault()},drop(e,...s){e.preventDefault();let t=e.dataTransfer.getData("text"),n=m(this.$store.state.draggedConcept)||st(t);n&&this.droppedConcept(n,...s),this.dragEnd()},droppedConcept(){}}},gs=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e._item!=null?t("div",{staticClass:"itemName",class:{"itemName-hoverable":!e.preventExternalHover&&e.isValidLink},attrs:{draggable:e.draggable},on:{dragstart:function(n){return e.dragStart(e._item,n)},dragend:e.dragEnd,mouseover:function(n){return e.hovering(!0)},mouseout:function(n){return e.hovering(!1)}}},[t(e.isValidLink?"router-link":"div",{directives:[{name:"b-popover",rawName:"v-b-popover",value:e.showPopover&&(e.itemDetails.length||!e.showText||!e.showNotation)?{placement:"top",trigger:"hover",content:"<div class='fontSize-"+(e.fontSize||"normal")+"'><b>"+e.notation+" "+e.prefLabel+"</b></div><div class='fontSize-small itemName-details'>"+e.itemDetails+"</div>",html:!0,boundary:"window"}:null,expression:"showPopover && (itemDetails.length || !showText || !showNotation) ? {\n      placement: 'top',\n      trigger: 'hover',\n      content: `<div class='fontSize-${fontSize || 'normal'}'><b>${notation} ${prefLabel}</b></div><div class='fontSize-small itemName-details'>${itemDetails}</div>`,\n      html: true,\n      boundary: 'window',\n    } : null"}],tag:"div",class:[{"itemName-hovered":e.isValidLink&&e.isHovered,"itemName-highlighted":e.isHighlighted},"fontSize-"+(e.fontSize||"normal")],attrs:{id:e.tooltipDOMID,to:e.url}},[e._item&&e._item.__DETAILSLOADED__==-1?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.unknownConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.unknownConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"fontSize-small"},[t("font-awesome-icon",{attrs:{icon:"bolt"}})],1):e._e(),e._item&&e._item.type&&e._item.type.includes("http://rdf-vocabulary.ddialliance.org/xkos#CombinedConcept")?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.combinedConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.combinedConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],class:"fontSize-"+(e.fontSize||"normal")},[t("font-awesome-icon",{attrs:{icon:"puzzle-piece"}})],1):e._e(),e.showNotation?t("span",{class:{"fontWeight-heavy":e.showText},domProps:{innerHTML:e._s(e.notation)}}):e._e(),e.showText||!e.notation?t("span",{class:{"fontWeight-medium":!0}},[e._v(" "+e._s(e.prefLabel)+" ")]):e._e()])],1):e._e()},ms=[];const fs={name:"ItemName",mixins:[be],props:{item:{type:Object,default:null},fontSize:{type:String,default:"normal"},showNotation:{type:Boolean,default:!0},showText:{type:Boolean,default:!0},isLink:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!0},showPopover:{type:Boolean,default:!1},isHighlighted:{type:Boolean,default:!1},preventExternalHover:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},forceSide:{type:Boolean,default:!1}},data(){return{tooltipDOMID:this.generateID(),isHoveredFromHere:!1,url:"",isValidLink:!1,interval:null}},computed:{_item(){return m(this.item)||this.item},isHovered(){return this.isHoveredFromHere||!this.preventExternalHover&&this.$jskos.compareFast(this.$store.state.hoveredConcept,this._item)},notation(){return this.getNotation(this._item,null,!0)},prefLabel(){return this.getPrefLabel(this._item)},itemDetails(){let e=this.$jskos.languageMapContent(this._item,"scopeNote");return!e||!e.length?"":[""].concat(e).join("<br>")}},watch:{_item:function(){c.delay(()=>{this.isHoveredFromHere&&this.$refs.tooltip&&this.$refs.tooltip.$emit("open")},50)}},created(){this.hovering=c.debounce(this._hovering,20)},methods:{_hovering(e){e?(this.isHoveredFromHere=!0,this.$store.commit({type:"setHoveredConcept",concept:this._item}),this.url=this.getRouterUrl(this._item,this.isLeft,this.forceSide),this.isLink?this.isValidLink=this.getProvider(this._item)!=null:this.isValidLink=!1,window.clearInterval(this.interval),this.interval=setInterval(()=>{this.isMouseOver()||(this.isHoveredFromHere=!1,window.clearInterval(this.interval))},500)):(this.isHoveredFromHere=!1,this.$store.commit({type:"setHoveredConcept",concept:null}),window.clearInterval(this.interval))},trimTooltip(e){return e.length>80?e.substring(0,75)+"...":e}}},je={};var vs=w(fs,gs,ms,!1,bs,"13609328",null,null);function bs(e){for(let s in je)this[s]=je[s]}var Y=function(){return vs.exports}(),ys=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("flexible-table",{attrs:{items:e.items,fields:e.fields},scopedSlots:e._u([{key:"registry",fn:function(n){var i=n.value;return t("span",{},[t("registry-notation",{attrs:{registry:i,tooltip:!1}})],1)}},{key:"sourceConcepts",fn:function(n){var i=n.value;return t("span",{},e._l(i,function(r){return t("item-name",{key:r.uri,attrs:{item:r,"show-text":e.showLabels,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(a){return function(){return null}.apply(null,arguments)},click:function(a){return function(){return null}.apply(null,arguments)}}})}),1)}},{key:"targetConcepts",fn:function(n){var i=n.value;return t("span",{},e._l(i,function(r){return t("span",{key:r.uri},[t("item-name",{attrs:{item:r,"show-text":e.showLabels,"is-link":!1,"is-highlighted":!1},nativeOn:{mouseover:function(a){return function(){return null}.apply(null,arguments)},click:function(a){return function(){return null}.apply(null,arguments)}}}),t("br")],1)}),0)}},{key:"type",fn:function(n){var i=n.value;return t("span",{},[i!=null?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.prefLabel(i),delay:e.defaults.delay.medium},expression:"{ title: $jskos.prefLabel(value), delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[e._v(" "+e._s(e.$jskos.notation(i))+" ")]):e._e()])}},{key:"actions",fn:function(n){return t("span",{},e._l(e.actions,function(i,r){return t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:i.title,delay:e.defaults.delay.medium,placement:"left"},expression:"{ title: action.title, delay: defaults.delay.medium, placement: 'left' }",modifiers:{hover:!0}}],key:r,staticClass:"button",attrs:{icon:i.icon},on:{click:function(a){return e.$emit("click",{name:i.name,item:n.item})}}})}),1)}}])},[t("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})])},ws=[];const _s={name:"MappingTable",components:{ItemName:Y,FlexibleTable:fe,RegistryNotation:ve},props:{mappings:{type:Array,default:()=>[]},hideDuplicates:{type:Boolean,default:!0},actions:{type:Array,default:()=>[]},showLabels:{type:Boolean,default:!1},showRegistry:{type:Boolean,default:!1}},data(){return{}},computed:{fields(){let e=[{key:"sourceScheme",label:"",width:"8%",minWidth:"",sortable:!1},{key:"sourceConcepts",label:this.$t("mappingBrowser.from"),width:"19%",minWidth:"",sortable:!1,compare:(s,t)=>this.$jskos.compareFunctions.mappingsByConcepts(s.mapping,t.mapping,"from")},{key:"type",label:"",width:"7%",minWidth:"",sortable:!1,compare:(s,t)=>{let n=this.$jskos.prefLabel(c.get(s,"type"),{fallbackToUri:!1}),i=this.$jskos.prefLabel(c.get(t,"type"),{fallbackToUri:!1});return n<i?-1:n>i?1:0}},{key:"targetScheme",label:"",width:"8%",minWidth:"",sortable:!1},{key:"targetConcepts",label:this.$t("mappingBrowser.to"),width:"19%",minWidth:"",sortable:!1,compare:(s,t)=>this.$jskos.compareFunctions.mappingsByConcepts(s.mapping,t.mapping,"to")},{key:"creator",label:this.$t("mappingBrowser.creator"),width:"15%",minWidth:"",sortable:!1},{key:"date",label:this.$t("mappingBrowser.date"),width:"12%",minWidth:"",sortable:!1},{key:"actions",label:"",width:"7%",minWidth:"",sortable:!1}];return this.showRegistry&&(e=[{key:"registry",label:"",width:"5%",minWidth:"",sortable:!1}].concat(e)),e},items(){let e=[],s=[];for(let t of this.mappings){let n=t.identifier?t.identifier.find(i=>i&&i.startsWith("urn:jskos:mapping:content:")):null;if(!this.hideDuplicates||!n||!s.includes(n)){let i={};i.mapping=t,this.showRegistry&&(i.registry=t._registry),i.sourceScheme=this.$jskos.notation(t.fromScheme),i.targetScheme=this.$jskos.notation(t.toScheme),i.sourceConcepts=t.from.memberSet||t.from.memberChoice,i.targetConcepts=t.to.memberSet||t.to.memberChoice,i.creator=t.creator&&t.creator[0]||"?",typeof i.creator=="object"&&(i.creator=this.$jskos.prefLabel(i.creator)),i.type=this.$jskos.mappingTypeByType(t.type),i.date=t.modified||t.created,i.date=i.date&&i.date.slice(0,10),e.push(i),s.push(n)}}return e}},watch:{},methods:{}},Ee={};var ks=w(_s,ys,ws,!1,Ss,"08974476",null,null);function Ss(e){for(let s in Ee)this[s]=Ee[s]}var $s=function(){return ks.exports}(),Cs=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("b-navbar",{attrs:{toggleable:"md",type:"dark"}},[e._l(e.config.logos||[],function(n,i){return t("b-navbar-brand",{key:i,attrs:{href:n.url,target:"_blank"}},[t("img",{staticStyle:{height:"42px"},attrs:{src:"./"+n.file,alt:n.alt||"logo"}})])}),t("b-navbar-brand",{attrs:{href:"https://coli-conc.gbv.de/cocoda/",target:"_blank"}},[e._v(" "+e._s(e.title||e.config.title)+" ")]),t("b-navbar-nav",{staticClass:"ml-auto"},[e._l(e.config.menu,function(n){return t("b-nav-item",{key:n.url,attrs:{href:n.url,target:"_blank"}},[e._v(" "+e._s(e.$jskos.prefLabel(n,{language:e.locale}))+" ")])}),e.reduced?e._e():t("b-nav-item",{attrs:{href:"./user-manual-"+e.locale+".html",target:"_blank"}},[e._v(" "+e._s(e.$t("general.manual"))+" ")]),e.reduced?t("b-nav-item",{attrs:{href:"./"}},[e._v(" Open Cocoda ")]):e._e(),!e.reduced&&e.mappingTrash.length>0?t("b-nav-item-dropdown",{ref:"mappingTrashDropdown",attrs:{id:"mappingTrashDropdown","menu-class":"navbar-dropdown","no-caret":"",right:""},nativeOn:{mouseover:function(n){e.dropdownSetStatus(e.$refs.mappingTrashDropdown,!0),e._dropdownSetStatus(e.$refs.mappingTrashDropdown,!0)},mouseout:function(n){return e.dropdownSetStatus(e.$refs.mappingTrashDropdown,!1)}}},[t("template",{slot:"button-content"},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),t("b-dropdown-header",[e._v(" "+e._s(e.$t("navbar.trashTitle"))+" "),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("navbar.trashClearButtonTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('navbar.trashClearButtonTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{position:"absolute",right:"15px",top:"15px"},on:{click:function(n){return e.$store.commit("mapping/clearTrash")}}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}}),e._v(" "+e._s(e.$t("navbar.trashClearButton"))+" ")],1)]),t("mapping-table",{staticClass:"font-default",staticStyle:{width:"700px"},attrs:{mappings:e.mappingTrash.map(function(n){return n.mapping}),actions:[{title:e.$t("navbar.trashRestoreTooltip"),name:"restore",icon:"recycle"}],"show-labels":!0,"show-popover":!1,"show-registry":!0,"hide-duplicates":!1},on:{click:function(n){e.$store.dispatch({type:"mapping/restoreMappingFromTrash",uri:n.item.mapping.uri}).then(function(i){i?e.alert(e.$t("alerts.mappingRestored",[e.$jskos.prefLabel(n.item.registry,{fallbackToUri:!1})]),null,"success"):e.alert(e.$t("alerts.mappingNotRestored",[e.$jskos.prefLabel(n.item.registry,{fallbackToUri:!1})]),null,"danger")})}}})],2):e._e(),e.reduced?e._e():t("b-nav-item-dropdown",{ref:"favoriteConceptsDropdown",attrs:{id:"favoriteConceptsDropdown","menu-class":"navbar-dropdown favoriteConceptsDropdown","no-caret":"",right:""},on:{hide:e.favoriteConceptsDropdownHide},nativeOn:{dragover:function(n){return e.dragOver.apply(null,arguments)},drop:function(n){return e.drop.apply(null,arguments)},mouseover:function(n){e.dropdownSetStatus(e.$refs.favoriteConceptsDropdown,!0),e._dropdownSetStatus(e.$refs.favoriteConceptsDropdown,!0)},mouseout:function(n){return e.dropdownSetStatus(e.$refs.favoriteConceptsDropdown,!1)}}},[t("template",{slot:"button-content"},[t("font-awesome-icon",{class:e.favoriteCanBeDropped?"favoriteConceptsDropdown-iconTarget":"",attrs:{icon:"star"}})],1),t("b-dropdown-header",[e._v(" "+e._s(e.$t("conceptList.favoriteConcepts"))+" ")]),e._l(e.favoriteConcepts,function(n){return t("div",{key:"theNavbar-"+n.uri+"-favorite",staticClass:"dropdown-item",attrs:{draggable:""},on:{dragstart:function(i){return e.favoriteConceptDragStart(n)},dragend:e.favoriteConceptDragEnd}},[t("div",{staticStyle:{"padding-right":"8px"}},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("navbar.removeFromFavorites"),delay:e.defaults.delay.medium},expression:"{ title: $t('navbar.removeFromFavorites'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button fontSize-verySmall",on:{click:function(i){return e.removeFavoriteConcept(n)}}},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)]),t("div",{staticStyle:{flex:"1"}},[n.inScheme&&n.inScheme[0]?t("item-name",{attrs:{item:n.inScheme[0],"show-text":!1,"is-link":!1,"prevent-external-hover":!0,draggable:!1}}):e._e(),e._v(" \xA0 "),t("item-name",{attrs:{item:n}})],1),t("div",[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("navbar.openLeft"),delay:e.defaults.delay.medium},expression:"{ title: $t('navbar.openLeft'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",on:{click:function(i){return e.setSelected({concept:n,isLeft:!0})}}},[t("font-awesome-icon",{attrs:{icon:"caret-square-left"}})],1),e._v(" \xA0 "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("navbar.openRight"),delay:e.defaults.delay.medium},expression:"{ title: $t('navbar.openRight'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",on:{click:function(i){return e.setSelected({concept:n,isLeft:!1})}}},[t("font-awesome-icon",{attrs:{icon:"caret-square-right"}})],1)])])})],2),e.reduced?e._e():t("b-nav-item-dropdown",{ref:"accountDropdown",attrs:{id:"accountDropdown","menu-class":"navbar-dropdown","no-caret":"",right:""},nativeOn:{mouseover:function(n){e.dropdownSetStatus(e.$refs.accountDropdown,!0),e._dropdownSetStatus(e.$refs.accountDropdown,!0)},mouseout:function(n){return e.dropdownSetStatus(e.$refs.accountDropdown,!1)}}},[t("template",{slot:"button-content"},[t("div",{staticClass:"navbar-settingsButton",on:{click:function(n){return e.openSettingsTab(0)}}},[e.userIdentityImage&&e.creator.uri?t("span",{staticClass:"fontWeight-heavy"},[t("img",{attrs:{src:e.userIdentityImage}}),e._v(" "+e._s(e.creatorName||e.$t("settingsTabs")[0])+" ")]):t("span",[t("font-awesome-icon",{attrs:{icon:"user"}}),t("span",{class:{"fontWeight-heavy":e.authorized}},[e._v(" "+e._s(e.creatorName||e.$t("settingsTabs")[0])+" ")])],1)])]),t("div",{staticClass:"font-default"},[(e.userUris||[e.creator.uri]).filter(function(n){return n!=null}).length?e._l((e.userUris||[e.creator.uri]).filter(function(n){return n!=null}),function(n,i){return t("p",{key:"navbar-switchToIdentity-"+i,class:{"navbar-dropdown-selectable":!0,"navbar-dropdown-selectable-selected":n==e.creator.uri},on:{click:function(r){return e.setIdentity(n)}}},[t("span",{staticClass:"navbar-dropdown-selectable-icon"},[e.imageForIdentityUri(n)?t("img",{attrs:{src:e.imageForIdentityUri(n)}}):t("font-awesome-icon",{attrs:{icon:"user"}})],1),e._v(" "+e._s(e.providerForIdentityUri(n)&&e.providerForIdentityUri(n).name||(e.user&&n==e.user.uri?e.$t("navbar.defaultIdentity"):n))+" ")])}):e._e(),e.authorized?t("p",{staticClass:"navbar-dropdown-selectable",on:{click:function(n){return e.openWindow({url:e.config.auth+"logout",eventType:"logout"})}}},[t("span",{staticClass:"navbar-dropdown-selectable-icon"},[e._v(" "+e._s(e.$t("settings.logOutButton"))+" ")])]):e.config.auth?t("p",{staticClass:"navbar-dropdown-selectable",on:{click:function(n){return e.openSettingsTab(0)}}},[t("span",{staticClass:"navbar-dropdown-selectable-icon"},[e._v(" "+e._s(e.$t("settings.logInButton"))+" ")])]):e._e(),!e.config.auth&&!(e.userUris||[e.creator.uri]).filter(Boolean).length?t("p",{staticClass:"navbar-dropdown-selectable",on:{click:function(n){return e.openSettingsTab(0)}}},[t("span",{staticClass:"navbar-dropdown-selectable-icon"},[e._v(" "+e._s(e.$t("navbar.setIdentity"))+" ")])]):e._e()],2)],2),e.reduced?e._e():t("b-nav-item-dropdown",{ref:"settingsDropdown",attrs:{id:"settingsDropdown","menu-class":"navbar-dropdown","no-caret":"",right:""},nativeOn:{mouseover:function(n){e.dropdownSetStatus(e.$refs.settingsDropdown,!0),e._dropdownSetStatus(e.$refs.settingsDropdown,!0)},mouseout:function(n){return e.dropdownSetStatus(e.$refs.settingsDropdown,!1)}}},[t("template",{slot:"button-content"},[t("font-awesome-icon",{attrs:{icon:"cog"},on:{click:function(n){return e.$refs.settings.show()}}})],1),e._l(e.$t("settingsTabs").slice(1,e.$t("settingsTabs").length-(e.localMappingsRegistry?0:1)),function(n,i){return t("p",{key:"navbar-settingsTabs-"+i,staticClass:"navbar-settingsTabs-row",on:{click:function(r){return e.openSettingsTab(i+1)}}},[e._v(" "+e._s(n)+" ")])}),t("hr"),e.currentRegistry?t("div",{staticClass:"font-default"},[e._l(e.config.registries.filter(function(n){return e.$jskos.mappingRegistryIsStored(n)}),function(n){return t("p",{key:"navbar-mappingRegistry-"+n.uri,class:{"navbar-dropdown-selectable":!0,"navbar-dropdown-selectable-selected":e.$jskos.compareFast(n,e.currentRegistry)},on:{click:function(i){return e.$store.commit({type:"settings/set",prop:"mappingRegistry",value:n.uri})}}},[t("registry-info",{attrs:{registry:n,"show-details":!1,"show-capabilities":!1}})],1)}),t("hr")],2):e._e(),t("p",{staticStyle:{padding:"0 10px"}},[t("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:["fab","github"]}}),e._v(" GitHub ")],1),e.config.buildInfo.version&&e.config.buildInfo.version!=""?t("span",[e._v(" \u2022 "+e._s(e.$t("settings.version"))+" "+e._s(e.config.buildInfo.version)+" ")]):e._e()])],2),t("the-settings",{ref:"settings",attrs:{tab:e.settingsTab},on:{"update:tab":function(n){e.settingsTab=n}}})],2)],2)},Ms=[];const Rs={name:"TheNavbar",components:{TheSettings:hs,RegistryInfo:oe,MappingTable:$s,ItemName:Y},mixins:[z,Q,be,x],props:{title:{type:String,default:null},reduced:{type:Boolean,default:!1}},data(){return{settingsTab:0,openWindow:it}},computed:{draggedConcept:{get(){return this.$store.state.draggedConcept},set(e){this.$store.commit({type:"setDraggedConcept",concept:e})}},favoriteCanBeDropped(){return this.draggedConcept!=null&&!this.$jskos.isScheme(this.draggedConcept)&&!this.$jskos.isContainedIn(this.draggedConcept,this.favoriteConcepts)},mappingTrash(){if(!this.$store.state.configLoaded||!this.schemes.length)return[];let e=this.$store.state.mapping.mappingTrash;e=e.map(s=>Object.assign({},s,{mapping:this.adjustMapping(this.$jskos.copyDeep(s.mapping))}));for(let s of e)s.mapping._registry=this.config.registries.find(t=>this.$jskos.compareFast(t,s.registry));return e}},created(){this.dropdownSetStatus=c.debounce(this._dropdownSetStatus,500)},methods:{favoriteConceptDragStart(e){event.dataTransfer.setData("text",e.uri),this.draggedConcept=e},favoriteConceptDragEnd(e){e.dataTransfer.dropEffect!="none"&&this.$refs.favoriteConceptsDropdown.hide(),this.draggedConcept=null},_dropdownSetStatus(e,s){s?e.show():e.hide()},favoriteConceptsDropdownHide(){this.$refs.favoriteConceptsDropdown.$el.getElementsByClassName("favoriteConceptsDropdown")[0].scrollTop=0},droppedConcept(e){this.$store.dispatch("addConceptToFavorites",e)},removeFavoriteConcept(e){this.$store.dispatch("removeConceptFromFavorites",e)},openSettingsTab(e){this.settingsTab=e,this.$refs.settings.show()},setIdentity(e){this.$store.commit({type:"settings/set",prop:"creatorUri",value:e});const s=this.getNameForIdentity(e);s&&this.$store.commit({type:"settings/set",prop:"creator",value:s})}}},ze={};var Ls=w(Rs,Cs,Ms,!1,xs,"3ce981e7",null,null);function xs(e){for(let s in ze)this[s]=ze[s]}var Vr=function(){return Ls.exports}(),rt={mounted(){document.addEventListener("click",this.handleClick)},destroyed(){document.removeEventListener("click",this.handleClick)},methods:{handleClick(e){for(let s of this.clickHandlers())(s.elements||[]).reduce((n,i)=>n||i&&i.contains(e.target),!1)||s.handler(e)},clickHandlers(){return[]}}},Is=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"componentSettings"},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.tooltip,delay:e.defaults.delay.medium},expression:"{ title: tooltip, delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{id:"componentSettings-icon-"+e.id,icon:"cog"}}),t("b-popover",{attrs:{show:e.isShown,target:"componentSettings-icon-"+e.id,triggers:"click",placement:"bottomright"},on:{"update:show":function(n){e.isShown=n}}},[t("div",{ref:"popover"},[e._t("default",function(){return[e._l(e.settings,function(n){return[n.type=="Boolean"?t("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.languageMapContent(n,"definition",{language:e.locale}),delay:e.defaults.delay.medium},expression:"{ title: $jskos.languageMapContent(setting, 'definition', { language: locale }), delay: defaults.delay.medium }",modifiers:{hover:!0}}],key:"componentSettings-"+n.key+"-"+e.isLeft,staticStyle:{"user-select":"none"},model:{value:e.settingsValues[n.key],callback:function(i){e.$set(e.settingsValues,n.key,i)},expression:"settingsValues[setting.key]"}},[e._v(" "+e._s(e.$jskos.prefLabel(n,{language:e.locale}))+" ")]):n.type=="Number"?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.languageMapContent(n,"definition",{language:e.locale}),delay:e.defaults.delay.medium},expression:"{ title: $jskos.languageMapContent(setting, 'definition', { language: locale }), delay: defaults.delay.medium }",modifiers:{hover:!0}}],key:"componentSettings-"+n.key+"-"+e.isLeft},[e._v(" "+e._s(e.$jskos.prefLabel(n,{language:e.locale}))+" "),t("b-input",{staticStyle:{display:"inline-block",width:"auto"},attrs:{type:"number",min:n.min,max:n.max,size:"sm"},on:{click:function(i){return i.target.select()}},model:{value:e.settingsValues[n.key],callback:function(i){e.$set(e.settingsValues,n.key,i)},expression:"settingsValues[setting.key]"}})],1):t("p",{key:"componentSettings-"+n.key+"-"+e.isLeft,class:n.class},[e._v(" "+e._s(e.$jskos.prefLabel(n,{language:e.locale}))+" ")])]})]})],2)])],1)},Ts=[];const Ds={name:"ComponentSettings",mixins:[rt,x],props:{tooltip:{type:String,default:""}},data(){return{id:"",isShown:!1,parentName:this.$parent.$options.name,isLeft:this.$parent.isLeft}},computed:{settings(){let e=[],s=this.$store.state.settings.componentSettings[this.parentName]||{};for(let t of Object.keys(s))e.push(Object.assign({key:t},s[t]));return e},settingsValues(){let e={};for(let s of Object.keys(this.$store.state.settings.componentSettings[this.parentName])){const t=this.$store.state.settings.componentSettings[this.parentName][s].sideDependent,n=t?this.isLeft:void 0,i=this.$store.state.settings.componentSettings[this.parentName][s].type,r=this.$store.state.settings.componentSettings[this.parentName][s].default,a=this.$store.state.settings.componentSettings[this.parentName][s].min,o=this.$store.state.settings.componentSettings[this.parentName][s].max;Object.defineProperty(e,s,{get:()=>t?this.$settings.components[this.parentName][s][n]:this.$settings.components[this.parentName][s],set:d=>{i=="Boolean"&&!c.isBoolean(d)&&(d=!!d),i=="Number"&&!c.isNumber(d)&&(d=parseInt(d),(isNaN(d)||d<a||d>o)&&(this.$log.warn(`Tried to save invalid value for setting ${this.parentName} -> ${s}, fallback to default value (${r}).`),d=r)),this.$store.commit({type:"settings/setComponentSetting",component:this.parentName,setting:s,isLeft:n,value:d})}})}return e}},created(){this.id=this.generateID()},methods:{clickHandlers(){return[{elements:[this.$refs.popover,document.getElementById(`componentSettings-icon-${this.id}`)],handler:()=>{this.hide()}}]},show(){this.isShown=!0},hide(){this.isShown=!1},toggle(){this.isShown=!this.isShown}}},Oe={};var Bs=w(Ds,Is,Ts,!1,As,"0724c8c3",null,null);function As(e){for(let s in Oe)this[s]=Oe[s]}var Fs=function(){return Bs.exports}(),Ns=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("b-modal",{ref:"dataModal",staticClass:"fontSize-normal",attrs:{title:e.$t("dataModal.title")+" ("+e.numberText+")",centered:"","hide-footer":"",size:"lg"}},[t("table",{staticClass:"dataModal-links"},[e.count>0?t("tr",[t("td",{staticClass:"fontWeight-heavy text-right"},[e._v(" "+e._s(e.$t("dataModal.localDownload"))+" ("+e._s(e.count.toLocaleString())+") ")]),t("td",[t("ul",{staticClass:"list-group list-group-horizontal"},[e.encodedDataCsv?t("li",{staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:"data:text/csv;charset=utf-8,"+e.encodedDataCsv,download:e.filename+".csv",target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .csv ")],1)]):e._e(),t("li",{staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedData,download:e.filename+".json",target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .json ")],1)]),e.encodedDataNdjson?t("li",{staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:"data:application/json;charset=utf-8,"+e.encodedDataNdjson,download:e.filename+".ndjson",target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" .ndjson ")],1)]):e._e(),t("li",{staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:""},on:{click:function(n){return n.preventDefault(),e.copyToClipboard(e.$refs.jsonCode)}}},[t("font-awesome-icon",{attrs:{icon:"clipboard"}}),e._v(" "+e._s(e.$t("dataModal.exportClipboard"))+" ")],1)])])])]):e._e(),e.url?t("tr",[t("td",{staticClass:"fontWeight-heavy text-right"},[e._v(" "+e._s(e.$t("dataModal.apiLinks"))+" ("+e._s((e.totalCount||e.count).toLocaleString())+") ")]),t("td",[t("ul",{staticClass:"list-group list-group-horizontal list-group-flush"},[e._l(Object.keys(e.urls),function(n,i){return t("li",{key:"dataModal-links-urls-"+i,staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:e.urls[n],target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"link"}}),e._v(" "+e._s(n||e.$t("dataModal.apiUrl"))+" ")],1)])}),e._l(e.apiDownloadUrls,function(n,i){return t("li",{key:"dataModal-links-apiDownload-"+i,staticClass:"list-group-item py-2 border-0"},[t("a",{attrs:{href:n.url,target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"download"}}),e._v(" "+e._s(n.title)+" ")],1)])})],2)])]):e._e()]),t("div",{staticClass:"dataModal-json"},[t("pre",[t("code",{ref:"jsonCode",domProps:{innerHTML:e._s(e.jsonHtml)}})])])])},js=[];const Es={name:"DataModal",components:{},mixins:[Q],props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return["concept","scheme","mapping","annotation","concordance"].indexOf(e)!==-1}},url:{type:[String,Object],default:null},totalCount:{type:Number,default:null}},data(){return{preparedData:null}},computed:{_dataFromStore(){return this.isArray?this.data.map(e=>m(e)||e):m(this.data)||this.data},computedType(){return this.type||(this.$jskos.isConcept(this.isArray?this._dataFromStore[0]:this._dataFromStore)?"concept":this.$jskos.isScheme(this.isArray?this._dataFromStore[0]:this._dataFromStore)?"scheme":"resource")},count(){return c.isArray(this.data)?this.data.length:this.data?1:0},numberText(){let e=this.count;return this.totalCount&&e!=this.totalCount?`${e.toLocaleString()} ${this.$t("general.of")} `+this.$tc(`dataModal.${this.computedType}`,this.totalCount,{count:this.totalCount.toLocaleString()}):this.$tc(`dataModal.${this.computedType}`,e,{count:e})},isArray(){return c.isArray(this.data)},filename(){let e=this.computedType;return this.isArray&&(e+="s"),e},jsonData(){return this.preparedData?JSON.stringify(this.preparedData,null,2):""},jsonHtml(){return _t(this.preparedData||{})},encodedData(){return encodeURIComponent(this.jsonData)},encodedDataNdjson(){if(!this.preparedData)return null;let e=this.preparedData;return this.isArray||(e=[this.preparedData]),encodeURIComponent(e.map(s=>JSON.stringify(s)).join(`
`))},encodedDataCsv(){if(!this.computedType.startsWith("mapping")||!this.preparedData)return null;let e=this.preparedData;this.isArray||(e=[e]);let s=this.$jskos.mappingCSV({lineTerminator:`\r
`,labels:!0,creator:!0,language:"de"});e=e.map(t=>this.$jskos.copyDeep(t));for(let t of e){for(let n of this.$jskos.conceptsOfMapping(t)){let i=m(n),r=this.$jskos.languagePreference.selectLanguage(c.get(i,"prefLabel"));r&&(n.prefLabel={de:c.get(i.prefLabel,r)})}t.creator&&t.creator[0]&&(t.creator[0].prefLabel={de:this.$jskos.prefLabel(t.creator[0],{fallbackToUri:!1})})}return encodeURIComponent(s.fromMappings(e))},validated(){let e=this.computedType,s=c.get(this.$jskos.validate,e,this.$jskos.validate&&this.$jskos.validate.resource);if(!this.preparedData||!s)return!1;let t=!0;for(let n of this.isArray?this.preparedData:[this.preparedData])t=t&&s(n);return t},urls(){return c.isObject(this.url)?this.url:{"":this.url}},apiDownloadUrls(){if(!this.url)return[];if(this.type!=="mapping"&&this.type!=="concordance")return[];let e=[];for(let s of["json","ndjson"])for(let t of Object.keys(this.urls)){const n=this.urls[t];try{let i=new URL(n.startsWith("http")?n:location.protocol+n);i.searchParams.set("download",s),e.push({url:i,type:s,title:t?`${t} (.${s})`:`.${s}`})}catch{}}return e}},watch:{},methods:{show(){this.updatePreparedData(),this.$refs.dataModal.show()},updatePreparedData(){if(this._dataFromStore==null){this.preparedData=null;return}let e=this._dataFromStore;this.isArray||(e=[this._dataFromStore]);let s=[];for(let t of e){let n;this.computedType=="mapping"?(n=this.$jskos.minifyMapping(t),n=this.$jskos.addMappingIdentifiers(n)):(n=c.omit(t,Object.keys(t).filter(i=>i.startsWith("_"))),n=c.pick(n,c.keys(n).filter(i=>n[i]!=null))),n&&s.push(n)}this.isArray?this.preparedData=s:this.preparedData=s[0]}}},Pe={};var zs=w(Es,Ns,js,!1,Os,"976a3086",null,null);function Os(e){for(let s in Pe)this[s]=Pe[s]}var at=function(){return zs.exports}(),Ps=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.isValidURL(e.link)?t("a",{staticClass:"u-textBreak",attrs:{href:e.link,target:"_blank"}},[e._v(e._s(e.text||e.link))]):t("span",[e._v(e._s(e.text||e.link))])},Us=[];const Ws={name:"AutoLink",props:{link:{type:String,default:""},text:{type:String,default:null}},methods:{isValidURL(e){try{return new URL(e),!0}catch{return!1}}}},Ue={};var Vs=w(Ws,Ps,Us,!1,Hs,null,null,null);function Hs(e){for(let s in Ue)this[s]=Ue[s]}var ye=function(){return Vs.exports}(),Ks=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"annotationList"},e._l(e.annotations,function(n,i){return t("div",{key:n.uri},[t("div",{staticClass:"fontSize-normal fontWeight-heavy",class:{"text-success":n.bodyValue==="+1","text-danger":n.bodyValue==="-1"}},[n.motivation=="moderating"?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.$t("mappingBrowser.mappingConfirmedTooltip"),expression:"$t('mappingBrowser.mappingConfirmedTooltip')",modifiers:{hover:!0}}]},[t("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check"}})],1):t("span",[e._v(" "+e._s(n.bodyValue)+" ")])]),t("div",{staticClass:"fontSize-verySmall"},[t("date-string",{attrs:{date:n.created}}),t("br"),t("auto-link",{class:{"fontWeight-heavy":e.$jskos.annotationCreatorMatches(n,e.userUris)},attrs:{link:e.$jskos.annotationCreatorUri(n),text:e.$jskos.annotationCreatorName(n)}})],1),t("div",[e.canRemove(n)?t("font-awesome-icon",{staticClass:"button button-delete",attrs:{icon:"trash-alt"},on:{click:function(r){return e.remove(i)}}}):e._e()],1)])}),0)},Gs=[];const qs={name:"AnnotationList",components:{AutoLink:ye,DateString:le},mixins:[z],props:{annotations:{type:Array,default:()=>[]},provider:{type:Object,default:null}},methods:{canRemove(e){return this.$jskos.annotationCreatorMatches(e,this.userUris)},async remove(e){if(!this.provider)return!1;const s=this.annotations[e];this.$emit("loading",!0);let t;try{t=await this.provider.deleteAnnotation({annotation:s})}catch(n){t=!1,this.alert(`${this.$t("alerts.annotationNotRemoved")} ${this.getErrorMessage(n)}`,null,"danger")}return this.$emit("loading",!1),s.id!=this.annotations[e].id||!t?!1:(this.$delete(this.annotations,e),this.alert(this.$t("alerts.annotationRemoved"),null,"success"),t)}}},We={};var Js=w(qs,Ks,Gs,!1,Zs,"558fa70c",null,null);function Zs(e){for(let s in We)this[s]=We[s]}var ot=function(){return Js.exports}(),Qs=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("b-modal",{ref:"mappingDetail",staticClass:"fontSize-normal",attrs:{title:e.$t("mappingDetail.title"),centered:"","hide-footer":"","no-enforce-focus":"",size:"lg"}},[e.mapping?t("div",[t("b-container",{staticClass:"mappingDetail-container",attrs:{fluid:""}},[t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.sourceScheme"))+": ")]),t("b-col",[t("item-name",{attrs:{draggable:!1,item:e.mapping.fromScheme}})],1)],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$tc("mappingDetail.sourceConcept",e.$jskos.conceptsOfMapping(e.mapping,"from").length))+": ")]),t("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"from"),function(n){return t("p",{key:"mappingDetail-from-"+n.uri},[t("item-name",{attrs:{draggable:!1,item:n}})],1)}),0)],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.targetScheme"))+": ")]),t("b-col",[t("item-name",{attrs:{draggable:!1,item:e.mapping.toScheme}})],1)],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$tc("mappingDetail.targetConcept",e.$jskos.conceptsOfMapping(e.mapping,"to").length))+": ")]),t("b-col",e._l(e.$jskos.conceptsOfMapping(e.mapping,"to"),function(n){return t("p",{key:"mappingDetail-to-"+n.uri},[t("item-name",{attrs:{draggable:!1,item:n}})],1)}),0)],1),e.mapping.type&&e.mapping.type.length?t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.mappingType"))+": ")]),t("b-col",[t("a",{attrs:{href:e.$jskos.mappingTypeByType(e.mapping.type).uri,target:"_blank"}},[e._v(" "+e._s(e.$jskos.prefLabel(e.$jskos.mappingTypeByType(e.mapping.type),{language:e.locale}))+" ("+e._s(e.$jskos.notation(e.$jskos.mappingTypeByType(e.mapping.type)))+") ")])])],1):e._e(),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.creator"))+": ")]),t("b-col",e._l(e.mapping.creator||[],function(n,i){return t("p",{key:"mappingDetail-creator-"+i},[t("auto-link",{attrs:{link:n.url||n.uri,text:e.$jskos.prefLabel(n)}})],1)}),0)],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.created"))+": ")]),t("b-col",[t("date-string",{attrs:{date:e.mapping.created}})],1)],1),t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.modified"))+": ")]),t("b-col",[t("date-string",{attrs:{date:e.mapping.modified}})],1)],1),e.mapping.annotations&&e.mapping.annotations.length?t("b-row",{staticStyle:{position:"relative"}},[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.annotations"))+": ")]),t("b-col",[t("annotation-list",{attrs:{annotations:e.mapping.annotations,provider:e.mapping._registry}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("dataModal.button"),delay:e.defaults.delay.medium},expression:"{ title: $t('dataModal.button'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"dataModalButton",on:{click:function(n){return e.$refs.dataModalAnnotations.show()}}},[t("font-awesome-icon",{attrs:{icon:"code"}})],1)],1):e._e(),e.mapping.partOf?t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.partOf"))+": ")]),t("b-col",e._l(e.mapping.partOf,function(n,i){return t("p",{key:"mappingDetail-partOf-"+i},[t("auto-link",{attrs:{link:n.uri,text:e.displayNameForConcordance(n)}})],1)}),0)],1):e._e(),e.mapping.uri||e.mapping.identifier?t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.identifier"))+": ")]),t("b-col",e._l([e.mapping.uri].concat(e.mapping.identifier).filter(function(n){return n!=null}),function(n,i){return t("p",{key:"mappingDetail-identifier-"+i},[t("auto-link",{class:{"fontWeight-heavy":n==e.mapping.uri},attrs:{link:n}})],1)}),0)],1):e._e(),e.catalogEnrichmentLink?t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("mappingDetail.catalogEnrichment"))+": ")]),t("b-col",[t("auto-link",{attrs:{link:e.catalogEnrichmentLink}})],1)],1):e._e(),e.mapping._registry?t("b-row",[t("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.$t("schemeSelection.registryFilter"))+": ")]),t("b-col",[t("registry-info",{attrs:{registry:e.mapping._registry,"show-details":!1,"show-capabilities":!1}})],1)],1):e._e()],1)],1):e._e(),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("dataModal.button"),delay:e.defaults.delay.medium},expression:"{ title: $t('dataModal.button'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"dataModalButton",on:{click:function(n){return e.$refs.dataModal.show()}}},[t("font-awesome-icon",{attrs:{icon:"code"}})],1)]),e.mapping?t("data-modal",{ref:"dataModal",attrs:{data:e.mapping,url:e.mapping.uri,type:"mapping"}}):e._e(),e.mapping&&e.mapping.annotations&&e.mapping.annotations.length?t("data-modal",{ref:"dataModalAnnotations",attrs:{data:e.mapping.annotations,type:"annotation"}}):e._e()],1)},Ys=[];const Xs={name:"MappingDetail",components:{DataModal:at,ItemName:Y,AutoLink:ye,AnnotationList:ot,RegistryInfo:oe,DateString:le},mixins:[x],props:{mapping:{type:Object,default:null}},computed:{catalogEnrichmentLink(){return!this.mapping||!this.mapping.uri||!this.mapping.uri.startsWith("https://coli-conc.gbv.de/api/mappings/")?null:"https://opac.k10plus.de/DB=2.299/CMD?ACT=SRCHA&IKT=8659&TRM="+this.mapping.uri.replace(/[\W_]+/g,"+")}},methods:{show(){this.$refs.mappingDetail.show()},displayNameForConcordance(e){if(!e)return"";let s=this.$jskos.prefLabel(e,{fallbackToUri:!1})||this.$jskos.languageMapContent(e,"scopeNote")||e.uri||"";if(e.creator&&e.creator.length){let t=this.$jskos.prefLabel(e.creator[0],{fallbackToUri:!1});t&&(s+=` (${t})`)}return s}}},Ve={};var ei=w(Xs,Qs,Ys,!1,ti,"232e3ecf",null,null);function ti(e){for(let s in Ve)this[s]=Ve[s]}var ni=function(){return ei.exports}(),si=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"loader",class:"loader-"+e.size})},ii=[];const ri={name:"LoadingIndicator",props:{size:{type:String,default:"md"}}},He={};var ai=w(ri,si,ii,!1,oi,"63cac48d",null,null);function oi(e){for(let s in He)this[s]=He[s]}var lt=function(){return ai.exports}(),li=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"fillAndCenter loadingIndicatorFull"},[t("div",[t("loading-indicator",{staticClass:"loadingIndicatorFull-indicator",style:e.size=="sm"?"display: inline-block;":"margin: 0 auto;",attrs:{size:e.size}}),t("div",{staticClass:"loadingIndicatorFull-text fontWeight-heavy",style:e.size=="sm"?"display: inline-block;":""},[e._v(" "+e._s(e.$t("general.loading"))+" ")])],1)])},ci=[];const pi={name:"LoadingIndicatorFull",components:{LoadingIndicator:lt},props:{size:{type:String,default:"lg"}}},Ke={};var di=w(pi,li,ci,!1,ui,null,null,null);function ui(e){for(let s in Ke)this[s]=Ke[s]}var ct=function(){return di.exports}(),pt={computed:{mousePosition(){return this.$store.state.mousePosition}},watch:{mousePosition({x:e,y:s}){this.handleMousePositionChange(e,s)}},methods:{isMouseInsideElement(e,{delta:s,x:t,y:n}={}){if(s=s||0,t=t||this.mousePosition.x,n=n||this.mousePosition.y,e){let{top:i,bottom:r,left:a,right:o}=e.getBoundingClientRect();if(n<r+s&&n>i-s&&t<o+s&&t>a-s)return!0}return!1},handleMousePositionChange(e,s){for(let t of this.hoverHandlers()){let n=!1,i=t.delta||0;for(let r of t.elements)this.isMouseInsideElement(r,{delta:i,x:e,y:s})&&(n=!0);t.handler(n,t)}},hoverHandlers(){return[]}}},hi=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"annotationPopoverTop",attrs:{id:"annotationPopoverTop-"+e.iid}},[e.enable?t("b-popover",{ref:"annotationPopover",attrs:{target:e.element,show:e.show,boundary:"window",placement:"lefttop"},on:{"update:show":function(n){e.show=n}}},[e.loading?t("loading-indicator-full",{staticStyle:{"z-index":"1100"}}):e._e(),t("div",{ref:"annotationPopoverDiv",staticClass:"annotationPopover"},[t("div",{staticClass:"annotationPopover-upper"},[e.annotations.length?t("div",{staticClass:"annotationPopover-left"},[t("annotation-list",{staticClass:"annotationPopover-history",attrs:{annotations:e.annotations,provider:e.provider},on:{loading:function(n){e.loading=n}}})],1):e._e(),t("div",{staticClass:"annotationPopover-voting"},[t("div"),t("div",[t("font-awesome-icon",{class:{"annotationPopover-voting-button-current":e.ownScore=="+1",button:e.canSaveAnnotation,"button-disabled":!e.canSaveAnnotation,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-up"},on:{click:function(n){e.canSaveAnnotation&&e.assessing("+1")}}})],1),t("div",{staticClass:"annotationPopover-score"},[t("span",{staticClass:"fontWeight-heavy",class:{"text-success":e.score.startsWith("+"),"text-danger":e.score.startsWith("-")}},[e._v(" "+e._s(e.score)+" ")])]),t("div",[t("font-awesome-icon",{class:{"annotationPopover-voting-button-current":e.ownScore=="-1",button:e.canSaveAnnotation,"button-disabled":!e.canSaveAnnotation,"annotationPopover-voting-button":!0},attrs:{icon:"thumbs-down"},on:{click:function(n){e.canSaveAnnotation&&e.assessing("-1")}}})],1)])]),e.canConfirm?t("div",{staticClass:"annotationPopover-lower"},[t("b-button",{staticClass:"bbutton-small",attrs:{variant:"primary"},on:{click:e.confirm}},[e._v(" "+e._s(e.$t("annotationPopover.addConfirmation"))+" ")])],1):e._e()])],1):e._e()],1)},gi=[];const mi={name:"AnnotationPopover",components:{LoadingIndicatorFull:ct,AnnotationList:ot},mixins:[z,pt],props:{id:{type:String,default:null},idPrefix:{type:String,default:""},mapping:{type:Object,default:null}},data(){return{show:!1,loading:!1}},computed:{iid(){return this.id},imapping(){return this.mapping},enable(){return this.iid&&this.element},elementId(){return this.idPrefix+(this.iid||"")},element(){return document.getElementById(this.elementId)},annotations(){return c.get(this.imapping,"annotations")||[]},score(){let e=0;for(let{bodyValue:t}of this.annotations.filter(n=>n.motivation=="assessing"))e+=parseInt(t)||0;return`${e>0?"+":e<0?"-":"\xB1"}${Math.abs(e)}`},ownAssessment(){return!this.userUris&&this.creator.uri?this.provider.isAuthorizedFor({type:"annotations",action:"update",user:this.user,crossUser:!0})&&this.provider.isAuthorizedFor({type:"annotations",action:"delete",user:this.user,crossUser:!0})?this.annotations.find(e=>e.motivation=="assessing"&&e.creator&&e.creator.id==this.creator.uri):null:this.annotations.find(e=>e.motivation=="assessing"&&this.$jskos.annotationCreatorMatches(e,this.userUris))},ownScore(){return c.get(this.ownAssessment,"bodyValue")},provider(){return c.get(this.imapping,"_registry")},canSaveAnnotation(){return this.provider?this.provider.isAuthorizedFor({type:"annotations",action:"create",user:this.user}):!1},canConfirm(){if(!this.provider||this.annotations.find(e=>e.motivation=="moderating"&&this.$jskos.annotationCreatorMatches(e,this.userUris)))return!1;if(this.provider.isAuthorizedFor({type:"annotations",action:"create",user:this.user})){const e=c.get(this.provider,"_config.annotations.moderatingIdentities")||[];if(c.intersection(e,this.userUris).length>0)return!0}return!1}},watch:{show(e,s){e&&!s?this.$emit("show"):s&&!e&&this.$emit("hide"),this.scrollToBottom()},annotations(){this.scrollToBottom()},iid(){this.scrollToBottom(),this.show&&(this.show=!1,this.$nextTick(()=>{this.show=!0}))}},methods:{hoverHandlers(){return[{elements:[this.$refs.annotationPopoverDiv,this.element],delta:5,handler:e=>{this.show=e}}]},scrollToBottom(){this.show&&c.delay(()=>{if(this.$refs.annotationPopoverDiv){let e=this.$refs.annotationPopoverDiv.getElementsByClassName("annotationPopover-history")[0];e&&(e.scrollTop=2e4)}},50)},assessing(e){let s=this.provider;if(!s||!s.has.annotations){this.$log.warn("No provider found to add annotation."),this.alert(this.$t("alerts.annotationError"),null,"danger");return}const t=this.imapping,n=c.get(t,"uri");if(!n){this.$log.warn("No URI found to add annotation."),this.alert(this.$t("alerts.annotationError"),null,"danger");return}this.loading=!0;const i=(o,d)=>{this.alert(`${this.$t("alerts."+d)} ${this.getErrorMessage(o)}`,null,"danger")};let r;const a=this.ownAssessment;if(a)if(this.ownScore!=e){if(!this.provider.isAuthorizedFor({type:"annotations",action:"update",user:this.user})){this.alert(this.$t("alerts.annotationNotSaved"),null,"danger"),this.loading=!1;return}r=s.patchAnnotation({annotation:{id:a.id,bodyValue:e}}).then(o=>{o?(a.bodyValue=e,this.alert(this.$t("alerts.annotationSaved"),null,"success"),this.$emit("refresh-annotations",{uri:n,annotations:t.annotations})):this.alert(this.$t("alerts.annotationNotSaved"),null,"danger")}).catch(o=>i(o,"annotationNotSaved"))}else{if(!this.provider.isAuthorizedFor({type:"annotations",action:"delete",user:this.user})){this.alert(this.$t("alerts.annotationNotRemoved"),null,"danger"),this.loading=!1;return}r=this.remove(t.annotations.indexOf(a),t).then(o=>{o?(this.alert(this.$t("alerts.annotationRemoved"),null,"success"),this.$emit("refresh-annotations",{uri:n,annotations:t.annotations})):this.alert(this.$t("alerts.annotationNotRemoved"),null,"danger")}).catch(o=>i(o,"annotationNotRemoved"))}else{if(!this.canSaveAnnotation){this.alert(this.$t("alerts.annotationNotSaved"),null,"danger"),this.loading=!1;return}let o={target:n,motivation:"assessing",bodyValue:e};this.creator&&this.creator.uri&&(o.creator={id:this.creator.uri},this.creatorName&&(o.creator.name=this.creatorName)),r=s.postAnnotation({annotation:o}).then(d=>{if(d)this.alert(this.$t("alerts.annotationSaved"),null,"success");else{this.alert(this.$t("alerts.annotationNotSaved"),null,"danger");return}t.annotations.push(d),this.$emit("refresh-annotations",{uri:n,annotations:t.annotations})}).catch(d=>i(d,"annotationNotSaved"))}r.catch(o=>{this.$log.error("AnnotationPopover - Error adding annotation",o),this.alert(this.$t("alerts.annotationError"),null,"danger")}).then(()=>{this.loading=!1})},remove(e,s=this.imapping){let t=this.provider,n=c.get(s,`annotations[${e}]`);if(!!n)return this.loading=!0,t.deleteAnnotation({annotation:n}).then(i=>(this.loading=!1,i?(this.$delete(s.annotations,e),i):!1))},async confirm(){const e=this.provider;if(!e||!e.has.annotations){this.$log.warn("No provider found to add annotation."),this.alert(this.$t("alerts.annotationError"),null,"danger");return}const s=c.get(this.imapping,"uri");if(!s){this.$log.warn("No URI found to add annotation."),this.alert(this.$t("alerts.annotationError"),null,"danger");return}let t={target:s,motivation:"moderating"};this.creator&&this.creator.uri&&(t.creator={id:this.creator.uri},this.creatorName&&(t.creator.name=this.creatorName)),this.loading=!0;try{t=await e.postAnnotation({annotation:t})}catch{t=null}this.loading=!1;const n=c.get(this.imapping,"uri");if(s!=n||!t){this.alert(this.$t("alerts.annotationNotSaved"),null,"danger");return}else this.alert(this.$t("alerts.annotationSaved"),null,"success");this.imapping.annotations.push(t),this.$emit("refresh-annotations",{uri:s,annotations:this.annotations})}}},Ge={};var fi=w(mi,hi,gi,!1,vi,"010228f7",null,null);function vi(e){for(let s in Ge)this[s]=Ge[s]}var bi=function(){return fi.exports}(),yi=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("dataModal.button"),delay:e.defaults.delay.medium},expression:"{ title: $t('dataModal.button'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"dataModalButton",style:"right: "+e.positionRight+"px; bottom: "+e.positionBottom+"px;",on:{click:e.openDataModal}},[t("font-awesome-icon",{attrs:{icon:"code"}})],1),t("data-modal",{ref:"dataModal",attrs:{data:e.data,type:e.type,url:e.url,"total-count":e.totalCount}})],1)},wi=[];const _i={name:"DataModalButton",components:{DataModal:at},props:{data:{type:[Object,Array],default:null},type:{type:String,default:null,validator:function(e){return["concept","scheme","mapping","annotation","concordance"].indexOf(e)!==-1}},url:{type:[String,Object],default:null},totalCount:{type:Number,default:null},positionRight:{type:Number,default:5},positionBottom:{type:Number,default:0}},methods:{openDataModal(){this.$refs.dataModal.show()}}},qe={};var ki=w(_i,yi,wi,!1,Si,null,null,null);function Si(e){for(let s in qe)this[s]=qe[s]}var dt=function(){return ki.exports}(),$i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"mappingBrowser-table-container"},[e._t("default"),t("flexible-table",{staticClass:"mappingBrowser-table",attrs:{sections:e.sections,fields:e.fields,"hide-header":!0},on:{hover:e.hover},scopedSlots:e._u([{key:"sourceScheme",fn:function(n){var i=n.value;return t("span",{},[t("item-name",{staticClass:"fontWeight-heavy",attrs:{item:i,"show-text":!1,"is-link":!0,"is-left":!0,"font-size":"sm"}}),i===null?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v(' " ')]):e._e(),i===void 0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],1)}},{key:"sourceConcepts",fn:function(n){var i=n.value;return t("span",{},[e._l(i,function(r){return t("span",{key:r.uri},[e.$jskos.isContainedIn(r,e.loadingConcepts)?t("loading-indicator",{attrs:{size:"sm"}}):t("item-name",{attrs:{item:r,"show-text":!1,"show-popover":!0,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(r,e.selected.concept[!0])||e.$jskos.compare(r,e.selected.concept[!1])}})],1)}),i.length===0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],2)}},{key:"sourceConceptsLong",fn:function(n){var i=n.value;return t("span",{},[e._l(i,function(r){return t("span",{key:r.uri},[e.$jskos.isContainedIn(r,e.loadingConcepts)?t("loading-indicator",{attrs:{size:"sm"}}):t("item-name",{attrs:{item:r,"show-text":!0,"show-popover":!0,"is-link":!0,"is-left":!0,"is-highlighted":e.$jskos.compare(r,e.selected.concept[!0])||e.$jskos.compare(r,e.selected.concept[!1])}})],1)}),i.length===0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],2)}},{key:"targetScheme",fn:function(n){var i=n.value;return t("span",{},[t("item-name",{staticClass:"fontWeight-heavy",attrs:{item:i,"show-text":!1,"is-link":!0,"is-left":!1,"font-size":"sm"}}),i===null?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopLeftAdjustment"},[e._v(' " ')]):e._e(),i===void 0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingTopAdjustment mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],1)}},{key:"targetConcepts",fn:function(n){var i=n.value;return t("span",{},[e._l(i,function(r){return t("span",{key:r.uri},[e.$jskos.isContainedIn(r,e.loadingConcepts)?t("loading-indicator",{attrs:{size:"sm"}}):t("span",[t("item-name",{attrs:{item:r,"show-text":!1,"show-popover":!0,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(r,e.selected.concept[!1])||e.$jskos.compare(r,e.selected.concept[!0])}}),t("br")],1)],1)}),i.length===0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],2)}},{key:"targetConceptsLong",fn:function(n){var i=n.value;return t("span",{},[e._l(i,function(r){return t("span",{key:r.uri},[e.$jskos.isContainedIn(r,e.loadingConcepts)?t("loading-indicator",{attrs:{size:"sm"}}):t("span",[t("item-name",{attrs:{item:r,"show-text":!0,"show-popover":!0,"is-link":!0,"is-left":!1,"is-highlighted":e.$jskos.compare(r,e.selected.concept[!1])||e.$jskos.compare(r,e.selected.concept[!0])}}),t("br")],1)],1)}),i.length===0?t("div",{staticClass:"mappingBrowser-table-light mappingBrowser-table-paddingLeftAdjustment"},[e._v(" \u2014 ")]):e._e()],2)}},{key:"type",fn:function(n){var i=n.value;return t("span",{},[i!=null&&e.$jskos.notation(i)!="\u2192"?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.prefLabel(i,{fallbackToUri:!1}),delay:e.defaults.delay.medium},expression:"{ title: $jskos.prefLabel(value, { fallbackToUri: false }), delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[e._v(" "+e._s(e.$jskos.notation(i))+" ")]):e._e()])}},{key:"creator",fn:function(n){var i=n.item;return t("span",{},[e.$settings.components.MappingBrowser.showIdentityWarning&&i.mapping&&i.mapping.creator&&i.mapping.creator[0]&&i.mapping.creator[0].uri&&e.userUris&&e.userUris.includes(i.mapping.creator[0].uri)&&(e.$jskos.prefLabel(i.mapping.creator[0])!=e.$jskos.prefLabel(e.creator)||i.mapping.creator[0].uri!=e.creator.uri)?t("span",[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:e.$t("mappingBrowser.creatorIsDifferent"),expression:"$t('mappingBrowser.creatorIsDifferent')",modifiers:{hover:!0}}],staticClass:"text-warning",attrs:{icon:"exclamation"}})],1):e._e(),i.creator!=null?t("span",{attrs:{id:"mappingBrowserTable-item-"+i.uniqueId+"-creator"}},[e._v(" "+e._s(i.creator)+" ")]):e._e(),i.creator!=null?t("b-popover",{attrs:{target:"mappingBrowserTable-item-"+i.uniqueId+"-creator",show:e.popoverShown["creator-"+i.uniqueId],triggers:"hover",delay:e.defaults.delay.medium,placement:"auto"},on:{"update:show":function(r){return e.$set(e.popoverShown,"creator-"+i.uniqueId,r)},hide:function(r){return e.popoverHide(r,"creator-"+i.uniqueId)}}},[t("div",{staticClass:"font-default"},[t("p",{staticClass:"fontWeight-heavy"},[e._v(e._s(i.creator))]),i.mapping.creator&&i.mapping.creator[0]&&i.mapping.creator[0].uri?[t("p",{staticClass:"fontSize-small"},[t("auto-link",{attrs:{link:i.mapping.creator[0].uri}})],1),t("p",{staticClass:"button",on:{click:function(r){e.$set(e.popoverShown,"creator-"+i.uniqueId,!1),e.searchForCreator(i.mapping.creator[0].uri)}}},[t("font-awesome-icon",{staticClass:"fontSize-small",attrs:{icon:"search"}}),e._v(" "+e._s(e.$t("mappingBrowser.searchForMappingsByCreator"))+" ")],1)]:e._e()],2)]):e._e()],1)}},{key:"actions",fn:function(n){return t("span",{},[n.item.mapping&&n.item.mapping.annotations?t("div",{staticClass:"button fontWeight-heavy",staticStyle:{display:"inline-block",position:"relative","min-width":"18px"},style:"color: "+e.annotationButtonColor(n.item.mapping.annotations)+";",attrs:{id:"mappingBrowser-hoveredMapping-annotationButton-"+n.item.uniqueId}},[n.item.mapping.annotations.find(function(i){return i.motivation=="moderating"})?t("span",[t("font-awesome-icon",{staticClass:"text-success",attrs:{icon:"check"}})],1):t("span",[e._v(" "+e._s(e.annotationsScore(n.item.mapping.annotations).sign)+e._s(e.annotationsScore(n.item.mapping.annotations).score)+" ")])]):e._e(),n.item.mapping?t("div",{staticClass:"mappingBrowser-toolbar-button"},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showDetail"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.showDetail'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"info-circle"},on:{click:function(i){(e.mappingDetailMapping=n.item.mapping)&&e.$refs.mappingDetail.show()}}})],1):e._e(),e.showEditingTools?t("div",{staticClass:"mappingBrowser-toolbar-button",style:"margin-left: 1px;"},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canUpdateMapping({mapping:n.item.mapping,user:e.user})?e.$t("mappingBrowser.edit",[e.$jskos.prefLabel(n.item.registry)]):e.$t("mappingBrowser.clone",[e.$jskos.prefLabel(e.currentRegistry)]),delay:e.defaults.delay.medium},expression:"{ title: canUpdateMapping({ mapping: data.item.mapping, user }) ? $t('mappingBrowser.edit', [$jskos.prefLabel(data.item.registry)]) : $t('mappingBrowser.clone', [$jskos.prefLabel(currentRegistry)]), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:e.canUpdateMapping({mapping:n.item.mapping,user:e.user})?"edit":"clone"},on:{click:function(i){return e.edit(n)}}})],1):e._e(),e.showEditingTools&&!e.$jskos.compareFast(n.item.registry,e.$store.getters.getCurrentRegistry)?t("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canCreateMapping({registry:e.currentRegistry,mapping:n.item.mapping})?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.saveAsMapping",[e.$jskos.prefLabel(e.currentRegistry)]),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.saveAsMapping', [$jskos.prefLabel(currentRegistry)]), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"save"},on:{click:function(i){e.postMapping({mapping:n.item.mapping,registry:e.currentRegistry,_before:function(){e.loadingGlobal=!0},_after:function(){e.loadingGlobal=!1}})}}}):e._e()],1):e.showEditingTools?t("div",{staticClass:"mappingBrowser-toolbar-button"},[e.canDeleteMapping({mapping:n.item.mapping,user:e.user})?t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.delete"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.delete'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button-delete",attrs:{icon:"trash-alt"},on:{click:function(i){e.deleteMapping({mapping:n.item.mapping,_before:function(){e.loadingGlobal=!0},_after:function(){e.loadingGlobal=!1}})}}}):e._e()],1):e._e(),e.showCocodaLink?t("div",{staticClass:"mappingBrowser-toolbar-button"},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.openInCocoda"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.openInCocoda'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"external-link-square-alt"},on:{click:function(i){return e.openInCocoda(n.item.mapping)}}})],1):e._e()])}},{key:"ITEM_ROW",fn:function(n){var i=n.item;return t("span",{},[i.type=="loading"?t("loading-indicator",{attrs:{size:"sm"}}):e._e(),i.type=="noItems"?t("span",[e._v(" "+e._s(e.$t("mappingBrowser.noItems"))+" ")]):e._e()],1)}},{key:"extra",fn:function(n){return t("span",{},[n.item.occurrence==null?t("date-string",{attrs:{date:n.value.date}}):n.item.occurrence.count==-1?t("span",[e._v("-")]):t("span",[t("auto-link",{attrs:{link:n.item.occurrence.url,text:String(n.item.occurrence.count)}})],1)],1)}},{key:"BEFORE_SECTION",fn:function(n){var i=n.section;return t("span",{},[t("div",{staticStyle:{display:"flex",position:"relative"}},[t("div",{class:{"fontWeight-heavy":!0,"mappingBrowser-registry-selectable":e.$jskos.mappingRegistryIsStored(i.registry)},staticStyle:{flex:"1","padding-left":"5px"},on:{click:function(r){return e.useRegistryForSaving(i.registry)}}},[t("registry-info",{attrs:{registry:i.registry,"show-details":!1,"show-capabilities":!1}})],1),i.totalCount>e.searchLimit?t("b-pagination",{staticClass:"mappingBrowser-pagination justify-content-center",class:{"pagination-hide-goToLast":i.totalCount>5e4},attrs:{value:i.page,"total-rows":i.totalCount,"per-page":e.searchLimit,size:"sm"},on:{input:function(r){return e.$emit("pageChange",{registry:i.registry,page:r,userInitiated:!1})},change:function(r){return e.$emit("pageChange",{registry:i.registry,page:r,userInitiated:!0})}}}):e._e(),t("div",{staticClass:"mappingBrowser-pagination-number fontSize-small"},[i.items.length<i.totalCount?t("span",[e._v(" "+e._s(i.items.length)+" "+e._s(e.$t("general.of"))+" "+e._s(i.totalCount.toLocaleString())+" ")]):e._e(),i.totalCount===0?t("span",[e._v(" "+e._s(e.$t("mappingBrowser.noItems"))+" ")]):e._e(),e.registryHasErrored[i.registry.uri]?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.registryHasErrored"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.registryHasErrored'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"registry-has-errored-indicator"},[e._v(" \u{1F534} ")]):e._e()]),t("data-modal-button",{staticStyle:{"margin-left":"3px"},attrs:{data:i.items.map(function(r){return r.mapping}).filter(function(r){return r!=null}),url:i.url,"total-count":i.totalCount,"position-bottom":-1,type:"mapping"}})],1),i.loading?t("loading-indicator-full",{attrs:{size:"sm"}}):e._e()],1)}}])},[t("span",{attrs:{slot:"HEAD_actions"},slot:"HEAD_actions"})]),t("mapping-detail",{ref:"mappingDetail",attrs:{mapping:e.mappingDetailMapping}}),t("annotation-popover",{attrs:{id:e.hoveredId,mapping:e.$store.state.hoveredMapping,"id-prefix":"mappingBrowser-hoveredMapping-annotationButton-"},on:{"refresh-annotations":e.refreshAnnotations,show:function(n){e.annotationPopoverShown=!0},hide:function(n){e.annotationPopoverShown=!1}}})],2)},Ci=[];const Mi={name:"MappingBrowser",components:{ItemName:Y,AutoLink:ye,LoadingIndicator:lt,LoadingIndicatorFull:ct,FlexibleTable:fe,RegistryInfo:oe,MappingDetail:ni,AnnotationPopover:bi,DataModalButton:dt,DateString:le},mixins:[z,Q,x,pt],props:{sections:{type:Array,default:()=>[]},searchLimit:{type:Number,default:5},showEditingTools:{type:Boolean,default:!0},showCocodaLink:{type:Boolean,default:!1},registryHasErrored:{type:Object,default:()=>({})}},data(){return{hoveredId:null,mappingDetailMapping:null,popoverShown:{},currentPopovers:{},annotationPopoverShown:!1}},computed:{fields(){return[{key:"sourceScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"sourceConcepts",label:this.$t("mappingBrowser.from"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:(e,s)=>this.$jskos.compareFunctions.mappingsByConcepts(e.mapping,s.mapping,"from"),class:"mappingBrowser-table-concepts"},{key:"sourceConceptsLong",label:this.$t("mappingBrowser.from"),width:"22%",minWidth:"",align:"left",sortable:!1,compare:(e,s)=>this.$jskos.compareFunctions.mappingsByConcepts(e.mapping,s.mapping,"from"),class:"mappingBrowser-table-conceptsLong"},{key:"type",label:"",width:"4%",minWidth:"",sortable:!1,compare:(e,s)=>{let t=this.$jskos.prefLabel(c.get(e,"type"),{fallbackToUri:!1}),n=this.$jskos.prefLabel(c.get(s,"type"),{fallbackToUri:!1});return t<n?-1:t>n?1:0}},{key:"targetScheme",label:"",width:"4%",minWidth:"",align:"left",sortable:!1,class:"fontSize-small"},{key:"targetConcepts",label:this.$t("mappingBrowser.to"),width:"10%",minWidth:"",align:"left",sortable:!1,compare:(e,s)=>this.$jskos.compareFunctions.mappingsByConcepts(e.mapping,s.mapping,"to"),class:"mappingBrowser-table-concepts"},{key:"targetConceptsLong",label:this.$t("mappingBrowser.to"),width:"22%",minWidth:"",align:"left",sortable:!1,compare:(e,s)=>this.$jskos.compareFunctions.mappingsByConcepts(e.mapping,s.mapping,"to"),class:"mappingBrowser-table-conceptsLong"},{key:"creator",label:this.$t("mappingBrowser.creator"),width:"10%",minWidth:"",align:"left",sortable:!1,class:"mappingBrowser-table-creator"},{key:"extra",label:this.$t("mappingBrowser.date"),width:"10%",minWidth:"",align:"center",sortable:!1,class:"mappingBrowser-table-extra",compare:(e,s)=>{let t=c.get(e,"occurrence.count",-1),n=c.get(s,"occurrence.count",-1);return t==-1&&n==-1&&(t=c.get(e,"extra"),n=c.get(s,"extra")),t<n?-1:t>n?1:0}},{key:"actions",label:"",width:"12%",minWidth:"",align:"right",sortable:!1}]}},created(){this.hover=c.debounce(this._hover,20)},mounted(){let e=document.getElementsByClassName("table");for(let s of e){let t=s.getElementsByTagName("thead")[0],n=s.getElementsByTagName("tbody")[0];n.onscroll=()=>{t.scrollLeft=n.scrollLeft}}},methods:{edit(e){const s=this.canUpdateMapping({mapping:e.item.mapping,user:this.user});s&&this.useRegistryForSaving(e.item.registry);let n=(i=>{let r=this.$jskos.copyDeep(i);return r.from.memberSet=i.from.memberSet.slice(),r.to.memberSet?r.to.memberSet=i.to.memberSet.slice():r.to.memberList?r.to.memberList=i.to.memberList.slice():r.to.memberChoice&&(r.to.memberChoice=i.to.memberChoice.slice()),r._registry=i._registry,r.fromScheme=i.fromScheme,r.toScheme=i.toScheme,s||(r.identifier=[].concat(r.identifier,r.uri),delete r.uri),r})(e.item.mapping);this.$store.commit({type:"mapping/empty"}),this.$store.commit({type:"mapping/set",mapping:n,original:s?e.item.mapping:null})},annotationsScore(e){let s=0;for(let{bodyValue:n}of e.filter(i=>i.motivation=="assessing"))s+=parseInt(n)||0;let t=s>0?"+":s<0?"-":"\xB1";return s=Math.abs(s),{score:s,sign:t}},annotationButtonColor(e){let s=3,{score:t,sign:n}=this.annotationsScore(e),i=Math.min(t/s,1)*150,r=85,a=85,o=85;return n=="-"?(r+=i,a-=50,o-=50):n=="+"&&(a+=i,r-=50,o-=50),`rgb(${r}, ${a}, ${o})`},_hover(e){this.annotationPopoverShown&&!(e&&e.mapping)||(this.$store.commit({type:"setHoveredMapping",mapping:e&&e.mapping}),this.hoveredId=e&&e.uniqueId)},canUseRegistryForSaving(e){return this.config.registries.find(s=>e.isAuthorizedFor({type:"mappings",action:"create",user:this.user})&&this.$jskos.compareFast(s,e))!=null},useRegistryForSaving(e){this.$jskos.mappingRegistryIsStored(e)&&this.$store.commit({type:"settings/set",prop:"mappingRegistry",value:e.uri})},popoverHide(e,s){this.popoverShown[s]&&(e.preventDefault(),this.currentPopovers[s]=e)},hoverHandlers(){let e=[];return c.forEach(this.currentPopovers,(s,t)=>{e.push({elements:[s.target,s.relatedTarget],delta:5,handler:n=>{n||(this.$set(this.popoverShown,t,!1),this.$delete(this.currentPopovers,t))}})}),e},searchForCreator(e){let s=this.$parent;for(;s&&s.$options.name!="MappingBrowser";)s=s.$parent;s&&s.searchWithParams&&s.searchWithParams({fromScheme:"",fromNotation:"",toScheme:"",toNotation:"",creator:e,direction:"",type:null,partOf:null})},refreshAnnotations({uri:e,annotations:s}){for(let t of this.sections)for(let n of t.items)n.mapping&&n.mapping.uri==e&&(n.mapping.annotations=s)},openInCocoda(e){let s="./?";for(let t of["from","to"]){const n=this.$jskos.conceptsOfMapping(e,t)[0];n&&n.uri&&(s+=`${t}=${encodeURIComponent(n.uri)}&`);const i=e[`${t}Scheme`];i&&i.uri&&(s+=`${t}Scheme=${encodeURIComponent(i.uri)}&`)}window.open(s.substring(0,s.length-1),"_self")}}},Je={};var Ri=w(Mi,$i,Ci,!1,Li,"a97a4fe4",null,null);function Li(e){for(let s in Je)this[s]=Je[s]}var xi=function(){return Ri.exports}();let E,J;typeof document.hidden!="undefined"?(E="hidden",J="visibilitychange"):typeof document.msHidden!="undefined"?(E="msHidden",J="msvisibilitychange"):typeof document.webkitHidden!="undefined"&&(E="webkitHidden",J="webkitvisibilitychange");var Ii={data(){return{isPageVisible:!0}},created(){E&&document.addEventListener(J,this.handleVisibilityChangeInternal,!1),this.isPageVisible=!document[E]},beforeDestroy(){E&&document.removeEventListener(J,this.handleVisibilityChangeInternal,!1)},methods:{handleVisibilityChangeInternal(){this.isPageVisible=!document[E]}}},Ti=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"mappingBrowser"}},[t("component-settings",{attrs:{tooltip:e.$t("mappingBrowser.settingsButton")}}),t("tabs",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},attrs:{fill:""},model:{value:e.tab,callback:function(n){e.tab=n},expression:"tab"}},[e.concordancesShown?t("tab",{attrs:{title:e.$t("mappingBrowser.concordances")},on:{click:e.handleClick}},[e.concordances&&e.concordances.length?[t("div",{staticStyle:{display:"flex",padding:"0px 4px"}},e._l(e.concordanceTableFields,function(n){return t("div",{key:n.key,style:"padding: 0px 10px 0px 0px; flex: 0 0 "+n.width},[n.key=="from"?t("b-input",{staticStyle:{width:"55%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:e.$t("mappingBrowser.from")},model:{value:e.concordanceFilter.from,callback:function(i){e.$set(e.concordanceFilter,"from",i)},expression:"concordanceFilter.from"}}):e._e(),n.key=="to"?t("b-input",{staticStyle:{width:"75%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:e.$t("mappingBrowser.to")},model:{value:e.concordanceFilter.to,callback:function(i){e.$set(e.concordanceFilter,"to",i)},expression:"concordanceFilter.to"}}):e._e(),n.key=="creator"?t("b-input",{staticStyle:{width:"80%",display:"inline-block"},attrs:{type:"text",size:"sm",placeholder:e.$t("mappingBrowser.creator")},model:{value:e.concordanceFilter.creator,callback:function(i){e.$set(e.concordanceFilter,"creator",i)},expression:"concordanceFilter.creator"}}):e._e(),e.concordanceFilter[n.key]!=null?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:"clear filter",delay:e.defaults.delay.medium},expression:"{ title: 'clear filter', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button mappingBrowser-from650",attrs:{icon:"times"},on:{click:function(i){e.concordanceFilter[n.key]=""}}},[e._v(" x ")]):e._e(),n.key=="from"?t("b-button",{staticClass:"mappingBrowser-from750",staticStyle:{"padding-right":"0","margin-right":"-5px"},attrs:{variant:"link",size:"sm",tabindex:"-1"},on:{click:function(i){var r;r=[e.concordanceFilter.to,e.concordanceFilter.from],e.concordanceFilter.from=r[0],e.concordanceFilter.to=r[1]}}},[t("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1):e._e()],1)}),0),t("div",{staticStyle:{flex:"1",height:"0",position:"relative"}},[t("flexible-table",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},attrs:{fields:e.concordanceTableFields,items:e.concordanceTableItems},scopedSlots:e._u([{key:"download",fn:function(n){var i=n.value;return t("span",{},e._l(i,function(r,a){return t("span",{key:a},[e.nameOfDistribution(r)?t("a",{attrs:{href:r.download}},[e._v(" "+e._s(e.nameOfDistribution(r))+" ")]):e._e()])}),0)}},{key:"mappings",fn:function(n){var i=n.value;return t("span",{},[e._v(" "+e._s((parseInt(i)||"?").toLocaleString())+" ")])}},{key:"actions",fn:function(n){var i=n.item;return t("span",{},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showMappings"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.showMappings'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"external-link-square-alt"},on:{click:function(r){return e.showMappingsForConcordance(i.concordance)}}})],1)}},{key:"from",fn:function(n){var i=n.value;return t("span",{},[t("item-name",{attrs:{item:i,"show-text":!1,"is-link":i.__SAVED__===!0,"is-left":!0,"font-size":"sm"}})],1)}},{key:"to",fn:function(n){var i=n.value;return t("span",{},[t("item-name",{attrs:{item:i,"show-text":!1,"is-link":i.__SAVED__,"is-left":!1,"font-size":"sm"}})],1)}}],null,!1,775637004)})],1),t("div",{staticStyle:{display:"flex"}},[t("p",{staticStyle:{"font-weight":"bold",flex:"1","padding-left":"5px"}},[e._v(" "+e._s(e.concordanceTableItems.length)+" "+e._s(e.$t("mappingBrowser.concordances"))+" ")]),t("p",{staticStyle:{"text-align":"right","font-weight":"bold","padding-right":"45px"}},[e._v(" "+e._s(e.$t("mappingBrowser.total"))+": "+e._s(e.concordanceTableItems.reduce(function(n,i){return n+parseInt(i.mappings)||0},0).toLocaleString())+" "+e._s(e.$t("general.of"))+" "+e._s(e.totalNumberOfMappings&&e.totalNumberOfMappings.toLocaleString()||"?")+" ")]),e.concordances&&e.concordances.length>0?t("data-modal-button",{attrs:{data:e.concordances,"position-right":20,url:e.concordanceUrls,type:"concordance"}}):e._e()],1)]:e._e()],2):e._e(),t("tab",{attrs:{title:e.$t("mappingBrowser.mappingSearch")},on:{click:e.handleClick}},[t("div",{staticStyle:{flex:"none",padding:"0px 4px"}},[t("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},[t("b-input",{staticStyle:{flex:"1",margin:"3px","min-width":"40px"},attrs:{state:e.searchFilterInput.fromScheme==""?null:e.searchFromScheme!=null,size:"sm",placeholder:e.$t("mappingBrowser.searchSourceScheme")},on:{drop:function(n){!e.lockScheme[!0]&&e.drop(n,{scheme:"searchFilterInput.fromScheme",concept:"searchFilterInput.fromNotation"})}},nativeOn:{keyup:[function(n){e.lockScheme[!0]=!1},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}]},model:{value:e.searchFilterInput.fromScheme,callback:function(n){e.$set(e.searchFilterInput,"fromScheme",n)},expression:"searchFilterInput.fromScheme"}}),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.lockScheme[!0]?e.$t("mappingBrowser.unlockScheme"):e.$t("mappingBrowser.lockScheme"),expression:"lockScheme[true] ? $t('mappingBrowser.unlockScheme') : $t('mappingBrowser.lockScheme')"}],staticClass:"button",staticStyle:{flex:"none","font-size":"12px",margin:"auto 8px auto 2px"},on:{click:function(n){e.lockScheme[!0]=!e.lockScheme[!0]}}},[t("font-awesome-icon",{attrs:{icon:e.lockScheme[!0]?"lock":"lock-open"}})],1),t("b-input",{staticStyle:{flex:"2",margin:"3px","min-width":"60px"},attrs:{size:"sm",placeholder:e.$t("mappingBrowser.searchSourceNotation")},on:{drop:function(n){return e.drop(n,{scheme:e.lockScheme[!0]?null:"searchFilterInput.fromScheme",concept:"searchFilterInput.fromNotation"})}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.fromNotation,callback:function(n){e.$set(e.searchFilterInput,"fromNotation",n)},expression:"searchFilterInput.fromNotation"}}),t("div",{staticClass:"button",staticStyle:{flex:"none","font-size":"16px",margin:"auto 5px"},on:{click:e.swapClicked}},[t("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),t("b-input",{staticStyle:{flex:"1",margin:"3px","min-width":"40px"},attrs:{state:e.searchFilterInput.toScheme==""?null:e.searchToScheme!=null,size:"sm",placeholder:e.$t("mappingBrowser.searchTargetScheme")},on:{drop:function(n){!e.lockScheme[!1]&&e.drop(n,{scheme:"searchFilterInput.toScheme",concept:"searchFilterInput.toNotation"})}},nativeOn:{keyup:[function(n){e.lockScheme[!1]=!1},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}]},model:{value:e.searchFilterInput.toScheme,callback:function(n){e.$set(e.searchFilterInput,"toScheme",n)},expression:"searchFilterInput.toScheme"}}),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:e.lockScheme[!1]?e.$t("mappingBrowser.unlockScheme"):e.$t("mappingBrowser.lockScheme"),expression:"lockScheme[false] ? $t('mappingBrowser.unlockScheme') : $t('mappingBrowser.lockScheme')"}],staticClass:"button",staticStyle:{flex:"none","font-size":"12px",margin:"auto 8px auto 2px"},on:{click:function(n){e.lockScheme[!1]=!e.lockScheme[!1]}}},[t("font-awesome-icon",{attrs:{icon:e.lockScheme[!1]?"lock":"lock-open"}})],1),t("b-input",{staticStyle:{flex:"2",margin:"3px","min-width":"60px"},attrs:{size:"sm",placeholder:e.$t("mappingBrowser.searchTargetNotation")},on:{drop:function(n){return e.drop(n,{scheme:e.lockScheme[!1]?null:"searchFilterInput.toScheme",concept:"searchFilterInput.toNotation"})}},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.toNotation,callback:function(n){e.$set(e.searchFilterInput,"toNotation",n)},expression:"searchFilterInput.toNotation"}}),t("b-button",{staticStyle:{flex:"none",margin:"3px"},attrs:{variant:"primary",size:"sm"},on:{click:e.searchClicked}},[t("font-awesome-icon",{attrs:{icon:"search"}}),e._v(e._s(e.$t("mappingBrowser.searchSubmit"))+" ")],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:e.$t("mappingBrowser."+(e.searchFilterExtended?"searchCollapse":"searchExtend")),placement:e.searchFilterExtended?"left":"bottom"},expression:"{\n              title: $t(`mappingBrowser.${searchFilterExtended ? 'searchCollapse' : 'searchExtend'}`),\n              placement: searchFilterExtended ? 'left' : 'bottom',\n            }"}],staticClass:"button fontSize-large",staticStyle:{flex:"none",margin:"3px",position:"relative",width:"20px"},on:{click:function(n){e.searchFilterExtended=!e.searchFilterExtended}}},[e.searchFilterExtended?t("font-awesome-icon",{staticStyle:{"vertical-align":"-0.3em"},attrs:{icon:"chevron-up"}}):t("font-awesome-icon",{staticStyle:{"vertical-align":"-0.3em"},attrs:{icon:"filter"}}),!e.searchFilterExtended&&(e.searchFilterInput.creator||e.searchFilterInput.type||e.searchFilterInput.partOf)?t("span",{staticClass:"text-success",staticStyle:{position:"absolute",top:"-9px",right:"-3px"}},[e._v(" \u2022 ")]):e._e()],1),e.searchFilterExtended?[t("div",{staticStyle:{"flex-basis":"100%",height:"0"}}),t("div",{staticStyle:{"text-align":"right",flex:"none",margin:"auto 5px"}},[e._v(" "+e._s(e.$t("mappingBrowser.creator"))+": ")]),t("div",{staticStyle:{flex:"2",margin:"3px",display:"flex","align-items":"center"}},[t("b-input",{attrs:{size:"sm",placeholder:e.$t("mappingBrowser.creator")},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.creator,callback:function(n){e.$set(e.searchFilterInput,"creator",n)},expression:"searchFilterInput.creator"}}),e.authorized&&e.searchFilterInput.creator!=e.userUris.join("|")?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.searchInsertSelfIntoCreator"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.searchInsertSelfIntoCreator'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{"margin-left":"2px"},on:{click:function(n){e.searchFilterInput.creator=e.userUris.join("|")}}},[t("font-awesome-icon",{attrs:{icon:"user"}})],1):e._e()],1),t("div",{staticStyle:{"text-align":"right",flex:"none",margin:"auto 5px"}},[e._v(" "+e._s(e.$t("mappingBrowser.searchType"))+": ")]),t("b-select",{staticStyle:{flex:"3",margin:"3px"},attrs:{size:"sm",options:e.typeOptions},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.type,callback:function(n){e.$set(e.searchFilterInput,"type",n)},expression:"searchFilterInput.type"}}),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.searchBidirectionalTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.searchBidirectionalTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticStyle:{"text-align":"right",flex:"none",margin:"auto 5px"}},[e._v(" "+e._s(e.$t("mappingBrowser.searchBidirectional"))+": "),t("b-form-checkbox",{staticStyle:{display:"inline-block"},attrs:{size:"sm",value:"both","unchecked-value":""},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.direction,callback:function(n){e.$set(e.searchFilterInput,"direction",n)},expression:"searchFilterInput.direction"}})],1),t("div",{staticStyle:{"flex-basis":"100%",height:"0"}}),t("div",{staticStyle:{"text-align":"right",flex:"none",margin:"auto 5px"}},[e._v(" "+e._s(e.$t("mappingBrowser.concordance"))+": ")]),t("b-form-select",{staticStyle:{flex:"2",margin:"3px"},attrs:{size:"sm",options:e.concordanceOptions},nativeOn:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.searchClicked.apply(null,arguments)}},model:{value:e.searchFilterInput.partOf,callback:function(n){e.$set(e.searchFilterInput,"partOf",n)},expression:"searchFilterInput.partOf"}}),e._l(e.searchRegistries,function(n){return t("registry-notation",{key:n.uri,staticClass:"mappingBrowser-search-registryNotation",class:{pointer:!e.$jskos.compareFast(n,e.currentRegistry)},attrs:{registry:n,disabled:!e.showRegistry[n.uri]},nativeOn:{click:function(i){e.showRegistry[n.uri]=!e.showRegistry[n.uri]},mouseover:function(i){e.hoveredRegistry=n},mouseout:function(i){e.hoveredRegistry=null}}})}),t("b-button",{staticStyle:{flex:"none",margin:"3px"},attrs:{variant:"danger",size:"sm"},on:{click:e.clearSearchFilter}},[t("font-awesome-icon",{attrs:{icon:"ban"}}),e._v(" "+e._s(e.$t("mappingBrowser.searchClear"))+" ")],1)]:e._e()],2)]),e.searchSections.length?t("mapping-browser-table",{staticClass:"mappingBrowser-search-table",attrs:{sections:e.searchSections,"search-limit":e.componentSettings.resultLimit,"show-editing-tools":e.showEditingTools,"show-cocoda-link":e.showCocodaLink,"registry-has-errored":e.registryHasErrored},on:{pageChange:function(n){return e.changePage("search",n)}}}):t("div",{staticClass:"fontWeight-heavy",staticStyle:{"text-align":"center","margin-top":"20px"}},[e._v(" "+e._s(e.$t("search.noResults"))+" ")]),t("div",{staticClass:"button",attrs:{id:"mappingBrowser-search-shareButton"}},[t("font-awesome-icon",{attrs:{icon:"share-alt-square"}}),e._v(" "+e._s(e.$t("mappingBrowser.searchShareLabel"))+" ")],1),t("b-popover",{attrs:{show:e.searchShareShow,target:"mappingBrowser-search-shareButton",triggers:"click",placement:"bottomleft"},on:{"update:show":function(n){e.searchShareShow=n}}},[t("div",{ref:"searchSharePopover"},[t("p",[t("b",[e._v(e._s(e.$t("mappingBrowser.searchShareTitle")))])]),t("p",{staticStyle:{"user-select":"none"}},[t("b-form-checkbox",{model:{value:e.searchShareIncludeSelected,callback:function(n){e.searchShareIncludeSelected=n},expression:"searchShareIncludeSelected"}},[e._v(" "+e._s(e.$t("mappingBrowser.searchShareInclude"))+" ")])],1),t("p",{attrs:{id:"mappingBrowser-search-shareLinkInput"}},[t("pre",[t("code",[e._v(e._s(e.searchShareLink))])])]),t("p",{staticStyle:{"text-align":"right"}},[t("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(n){return e.copyToClipboard("mappingBrowser-search-shareLinkInput")}}},[e._v(" "+e._s(e.$t("mappingBrowser.searchShareCopy"))+" ")])],1)])])],1),e.showNavigator?t("tab",{attrs:{title:e.$t("mappingBrowser.mappingNavigator")},on:{click:e.handleClick}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.selected.concept[!0]&&!e.selected.concept[!1],expression:"!selected.concept[true] && !selected.concept[false]"}],staticClass:"noItems fontWeight-heavy"},[e._v(" "+e._s(e.$t("mappingBrowser.chooseConcept"))+" ")]),e.selected.concept[!0]||e.selected.concept[!1]?t("div",{staticClass:"mappingBrowser-navigator-results"},e._l(e.registryGroups,function(n){return t("div",{key:"mappingBrowser-registryGroup-"+n.stored,staticClass:"mappingBrowser-registryGroup"},[t("div",{staticClass:"mappingBrowser-registryGroup-header"},[t("span",{staticClass:"mappingBrowser-registryGroup-title fontWeight-heavy",attrs:{id:"registryGroup-"+n.stored}},[e._v(" "+e._s(n.label)+" ")]),t("span",{staticStyle:{"white-space":"nowrap",float:"right"}},e._l(n.registries.filter(function(i){return e.$jskos.isContainedIn(i,e.navigatorRegistries)}),function(i){return t("registry-notation",{key:i.uri,staticClass:"mappingBrowser-registryGroup-notation",class:{pointer:!e.$jskos.compareFast(i,e.currentRegistry)},attrs:{registry:i,disabled:!e.showRegistry[i.uri]},nativeOn:{click:function(r){e.showRegistry[i.uri]=!e.showRegistry[i.uri]},mouseover:function(r){e.hoveredRegistry=i},mouseout:function(r){e.hoveredRegistry=null}}})}),1)]),(n.stored?e.navigatorSectionsDatabases:e.navigatorSectionsRecommendations).length?t("mapping-browser-table",{attrs:{sections:n.stored?e.navigatorSectionsDatabases:e.navigatorSectionsRecommendations,"search-limit":e.componentSettings.resultLimit,"registry-has-errored":e.registryHasErrored},on:{pageChange:function(i){return e.changePage("navigator",i)}}}):e.selected.concept[!0]||e.selected.concept[!1]?t("div",{staticClass:"fontWeight-heavy",staticStyle:{"text-align":"center","margin-top":"20px"}},[e._v(" "+e._s(e.$t("search.noResults"))+" ")]):e._e()],1)}),0):e._e()]):e._e()],1)],1)},Di=[];const Bi={name:"MappingBrowser",components:{FlexibleTable:fe,MappingBrowserTable:xi,RegistryNotation:ve,ItemName:Y,ComponentSettings:Fs,DataModalButton:dt},mixins:[z,Q,be,rt,x,Ii],props:{showNavigator:{type:Boolean,default:!0},showEditingTools:{type:Boolean,default:!0},showCocodaLink:{type:Boolean,default:!1}},data(){return{tab:0,concordancesLoaded:!1,totalNumberOfMappings:null,hasSwitchedToNavigator:!1,searchShareShow:!1,searchShareLinkPart:"",searchShareIncludeSelected:!1,registryGroupShow:{},concordanceFilter:{from:"",to:"",creator:""},searchFilterInput:null,searchFilter:null,searchFilterExtended:!1,searchPages:{},searchResults:{},searchLoading:{},searchCancelToken:{},searchNeedsRefresh:[],lockScheme:{[!0]:!0,[!1]:!0},previousSelected:{concept:{[!0]:null,[!1]:null},scheme:{[!0]:null,[!1]:null}},navigatorPages:{},navigatorResults:{},navigatorLoading:{},navigatorNeedsRefresh:[],navigatorCancelToken:{},hoveredRegistry:null,searchRepeatManagers:{},navigatorRepeatManagers:{},registryHasErrored:{}}},computed:{concordanceTableFields(){return[{key:"from",label:this.$t("mappingBrowser.from"),width:"13%",minWidth:"",sortable:!0,align:"left",titleClass:"test"},{key:"to",label:this.$t("mappingBrowser.to"),width:"9%",minWidth:"",sortable:!0,align:"left"},{key:"description",label:this.$t("mappingBrowser.description"),width:"24%",minWidth:"",sortable:!0,align:"left",class:"mappingBrowser-from750"},{key:"creator",label:this.$t("mappingBrowser.creator"),width:"16%",minWidth:"",sortable:!0,align:"left"},{key:"date",label:this.$t("mappingBrowser.date"),width:"10%",minWidth:"",sortable:!0,align:"left",class:"mappingBrowser-from550"},{key:"download",label:this.$t("mappingBrowser.download"),width:"11%",minWidth:"",sortable:!1,align:"left",class:"mappingBrowser-from650"},{key:"mappings",label:this.$t("registryInfo.mappings"),width:"13%",minWidth:"",sortable:!0,align:"right",compare:(e,s)=>(parseInt(e.mappings)||0)-(parseInt(s.mappings)||0)},{key:"actions",label:"",width:"4%",sortable:!1,align:"right"}]},concordanceTableItems(){let e=[];for(let s of this.concordances||[]){let t={concordance:s};t.from=c.get(s,"fromScheme"),t.from=m(t.from)||t.from,t.fromNotation=this.$jskos.notation(t.from)||"-",t.to=c.get(s,"toScheme"),t.to=m(t.to)||t.to,t.toNotation=this.$jskos.notation(t.to)||"-",t.description=(this.$jskos.languageMapContent(s,"scopeNote")||[])[0]||"-",t.creator=this.$jskos.prefLabel(c.get(s,"creator[0]"),{fallbackToUri:!1})||"-",t.date=c.get(s,"modified")||c.get(s,"created")||"",t.download=c.get(s,"distributions",[]),t.mappings=c.get(s,"extent"),t.fromNotation.toLowerCase().startsWith(this.concordanceFilter.from.toLowerCase())&&t.toNotation.toLowerCase().startsWith(this.concordanceFilter.to.toLowerCase())&&t.creator.toLowerCase().startsWith(this.concordanceFilter.creator.toLowerCase())&&e.push(t)}return e},concordancesShown(){return!this.concordances||this.concordances&&this.concordances.length},tabIndexes(){let e={concordances:this.concordancesShown?0:null,search:this.concordancesShown?1:0,navigator:this.concordancesShown?2:1};return this.showNavigator||delete e.navigator,e},typeOptions(){let e=[{text:this.$t("mappingBrowser.searchAllTypes"),value:null}];for(let s of this.$jskos.mappingTypes)e.push({text:`${this.$jskos.notation(s)} ${this.$jskos.prefLabel(s)}`,value:s.uri});return e},concordanceOptions(){let e=[{value:null,text:this.$t("mappingBrowser.searchAllConcordances")}];for(let s of this.concordanceTableItems){let t=`${s.fromNotation} to ${s.toNotation} (${s.description})`;e.push({value:s.concordance.uri,text:t})}return e},searchFromScheme(){return this.getSchemeForFilter(this.searchFilterInput.fromScheme)},searchToScheme(){return this.getSchemeForFilter(this.searchFilterInput.toScheme)},needsRefresh(){return this.$store.state.mapping.mappingsNeedRefresh},searchRegistries(){return c.get(this.registryGroups.find(e=>e.stored),"registries",[])},mappingRegistriesSorted(){return c.flatten(this.registryGroups.map(e=>e.registries))},navigatorRegistries(){return this.mappingRegistriesSorted.filter(e=>e.supportsScheme&&e.supportsScheme(m(this.selected.scheme[!0]))||e.supportsScheme&&e.supportsScheme(m(this.selected.scheme[!1])))},registryGroups(){let e=[{stored:!0,label:this.$t("general.storedMappings"),registries:[]},{stored:!1,label:this.$t("general.recommendedMappings"),registries:[]}];for(let s of this.mappingRegistries)e.find(n=>n.stored===this.$jskos.mappingRegistryIsStored(s)).registries.push(s);e=e.filter(s=>s.registries.length>0);for(let s of e)s.registries=s.registries.sort((t,n)=>this.$jskos.compareFast(t,this.currentRegistry)?-1:this.$jskos.compareFast(n,this.currentRegistry)?1:0);return e},searchSections(){return this.resultsToSections(this.searchResults,this.searchPages,this.searchLoading,"mappingSearch-")},navigatorSections(){return this.resultsToSections(this.navigatorResults,this.navigatorPages,this.navigatorLoading,"mappingNavigator-")},navigatorSectionsDatabases(){return this.navigatorSections.filter(e=>this.$jskos.mappingRegistryIsStored(e.registry))},navigatorSectionsRecommendations(){return this.navigatorSections.filter(e=>!this.$jskos.mappingRegistryIsStored(e.registry))},searchShareLink(){let e=this.searchShareIncludeSelected?window.location.href:window.location.href.split("?")[0];return e+=`${e.includes("?")?"&":"?"}${this.searchShareLinkPart}`,e},concordanceRegistries(){return this.config.registries.filter(e=>e.has.concordances)},concordanceUrls(){let e={};for(let s of this.concordanceRegistries)s.has.concordances&&s._api.concordances&&(e[this.$jskos.prefLabel(s)]=s._api.concordances);return e},autoRefresh(){let e=this.componentSettings.autoRefresh===void 0?this.config.autoRefresh.mappings:this.componentSettings.autoRefresh*1e3;return e&&(e=Math.max(e,5e3)),e}},watch:{tab(e,s){if(e==this.tabIndexes.search){for(let t of Object.values(this.searchRepeatManagers))t&&t.isPaused&&t.start();if(this.searchNeedsRefresh.length){if(this.searchNeedsRefresh.length==1){this.search(this.searchNeedsRefresh[0].registryUri,this.searchNeedsRefresh[0].page);return}if(this.searchNeedsRefresh.find(t=>!t.registryUri))this.search();else{let t=c.uniq(this.searchNeedsRefresh.map(n=>n.registryUri));for(let n of t)this.search(n,this.searchPages[n])}}}else if(e==this.tabIndexes.navigator){for(let t of Object.values(this.navigatorRepeatManagers))t&&t.isPaused&&t.start();this.navigatorRefresh()}if(s==this.tabIndexes.search)for(let t of Object.values(this.searchRepeatManagers))t&&!t.isPaused&&t.stop();if(s==this.tabIndexes.navigator)for(let t of Object.values(this.navigatorRepeatManagers))t&&!t.isPaused&&t.stop()},isPageVisible(e){if(e){if(this.tab==this.tabIndexes.search)for(let s of Object.values(this.searchRepeatManagers))s&&s.isPaused&&s.start();else if(this.tab==this.tabIndexes.navigator)for(let s of Object.values(this.navigatorRepeatManagers))s&&s.isPaused&&s.start()}else for(let s of[].concat(Object.values(this.searchRepeatManagers),Object.values(this.navigatorRepeatManagers)))s&&!s.isPaused&&s.stop()},navigatorNeedsRefresh(e){e.length>0&&this.tab==this.tabIndexes.navigator&&this.navigatorRefresh()},selected:{handler(){this.$jskos.compareFast(this.selected.concept[!0],this.previousSelected.concept[!0])&&this.$jskos.compareFast(this.selected.concept[!1],this.previousSelected.concept[!1])&&this.$jskos.compareFast(this.selected.scheme[!0],this.previousSelected.scheme[!0])&&this.$jskos.compareFast(this.selected.scheme[!1],this.previousSelected.scheme[!1])||this.selectedChangedHandler()},deep:!0},needsRefresh(e){if(e){let s=this.$store.state.mapping.mappingsNeedRefreshRegistry;s?(this.navigatorNeedsRefresh.push(s),this.search(s,this.searchPages[s])):(this.navigatorNeedsRefresh.push(null),this.search()),this.$store.commit("mapping/setRefresh",{refresh:!1})}},currentRegistry(e){if(!!e){this.showRegistry[e.uri]=!0;for(let s of document.getElementsByClassName("flexibleTable-body"))s.scrollTop=0}},locale(e,s){if(e!=s)for(let t of this.navigatorRegistries.filter(n=>!this.$jskos.mappingRegistryIsStored(n)&&this.showRegistry[n.uri]))this.navigatorNeedsRefresh.push(t.uri)},lockScheme:{handler(){let e=!1;for(let[s,t]of[["from",!0],["to",!1]])if(this.lockScheme[t]){const n=m(this.selected.scheme[t]);this.searchFilterInput[`${s}Scheme`]=n?this.$jskos.notation(n):"",e=!0}e&&this.searchClicked()},deep:!0},"componentSettings.resultLimit"(e,s){let t;if(this.tab==this.tabIndexes.search?t="search":this.tab==this.tabIndexes.navigator&&(t="navigator"),t)for(let n of Object.keys(this[`${t}Results`])){let r=((this[`${t}Pages`][n]||1)-1)*s,a=Math.floor(r/e)+1;t=="search"?this.search(n,a):(this.$set(this.navigatorPages,n,a),this.navigatorNeedsRefresh.push(n))}},"componentSettings.showAllSchemes"(){this.$store.commit("mapping/setRefresh")},"componentSettings.navigatorShowResultsForLeft"(){this.$store.commit("mapping/setRefresh")},"componentSettings.navigatorShowResultsForRight"(){this.$store.commit("mapping/setRefresh")},autoRefresh(){let e;if(this.tab==this.tabIndexes.search?e="search":this.tab==this.tabIndexes.navigator&&(e="navigator"),e)for(let s of Object.keys(this[`${e}Results`]))e=="search"?this.search(s,this.searchPages[s]):this.navigatorNeedsRefresh.push(s)}},created(){this.navigatorRefresh=c.debounce(this._navigatorRefresh,100),this.clearSearchFilter(),this.tab=this.tabIndexes.search},async mounted(){if(!this.concordances||!this.concordances.length){try{const e=c.flatten(await Promise.all(this.concordanceRegistries.map(s=>s.getConcordances())));c.forEach(e,(s,t)=>{this.$set(this.concordances,t,s)}),this.concordances.length=e.length,this.totalNumberOfMappings=(await Promise.all(this.concordanceRegistries.map(s=>s.getMappings({limit:1})))).reduce((s,t)=>s+t._totalCount,0)}catch(e){this.$log.error("MappingBrowser - Error loading concordances",e)}this.concordancesLoaded=!0}this.selectedChangedHandler()},beforeDestroy(){for(let e of[].concat(Object.values(this.searchRepeatManagers),Object.values(this.navigatorRepeatManagers)))e&&!e.isPaused&&e.stop()},methods:{clickHandlers(){let e=[];for(let s of this.registryGroups)e.push({elements:[c.get(this.$refs[`registryGroup-${s.stored}-popover`],"[0]"),document.getElementById(`registryGroup-${s.stored}`)],handler:()=>{this.$set(this.registryGroupShow,s.stored,!1)}});return e.push({elements:[this.$refs.searchSharePopover,document.getElementById("mappingBrowser-search-shareButton")],handler:()=>{this.searchShareShow=!1}}),e},selectedChangedHandler(){this.navigatorPages={},this.navigatorResults={},this.navigatorNeedsRefresh.push(null);let e=!1;for(let[s,t]of[["from",!0],["to",!1]])if(this.lockScheme[t]&&!this.$jskos.compareFast(this.selected.scheme[t],this.previousSelected.scheme[t])){const n=m(this.selected.scheme[t]);this.searchFilterInput[`${s}Scheme`]=n?this.$jskos.notation(n):"",e=!0}e&&this.searchClicked(),this.previousSelected={},this.previousSelected.concept={[!0]:this.selected.concept[!0]?{uri:this.selected.concept[!0].uri}:null,[!1]:this.selected.concept[!1]?{uri:this.selected.concept[!1].uri}:null},this.previousSelected.scheme={[!0]:this.selected.scheme[!0]?{uri:this.selected.scheme[!0].uri}:null,[!1]:this.selected.scheme[!1]?{uri:this.selected.scheme[!1].uri}:null},!this.hasSwitchedToNavigator&&(this.selected.concept[!0]||this.selected.concept[!1])&&(this.tab=this.tabIndexes.navigator,this.hasSwitchedToNavigator=!0)},generateCancelToken(){return I.CancelToken.source()},showMappingsForConcordance(e){this.tab=this.tabIndexes.search,this.clearSearchFilter({ignoredLock:!0}),this.searchFilterInput.partOf=e.uri,this.searchClicked()},nameOfDistribution(e){let s=e.mimetype;return s.includes("json")?"JSKOS":s.includes("csv")?"CSV":null},getSchemeForFilter(e){return ge(this.schemes).find(s=>e&&(this.$jskos.compare(s,{uri:e})||this.$jskos.notation(s).toLowerCase()==e.toLowerCase()))},clearSearchFilter({ignoredLock:e=!1}={}){this.searchFilterInput={fromScheme:this.searchFilterInput&&this.searchFilterInput.fromScheme||"",fromNotation:"",toScheme:this.searchFilterInput&&this.searchFilterInput.toScheme||"",toNotation:"",creator:"",direction:"",type:null,partOf:null},(e||!this.lockScheme[!0])&&(this.searchFilterInput.fromScheme=""),(e||!this.lockScheme[!1])&&(this.searchFilterInput.toScheme=""),this.searchFilterExtended=!1,this.searchResults={},this.searchClicked()},searchWithParams(e){this.tab=this.tabIndexes.search,c.forOwn(e,(s,t)=>{s!=null&&(this.searchFilterInput[t]=s)}),this.searchClicked()},searchClicked(){this.searchFilter=c.cloneDeep(this.searchFilterInput),this.search(null,1)},search(e=null,s){if(this.tab!=this.tabIndexes.search){this.searchNeedsRefresh.push({registryUri:e,page:s});return}if(this.searchNeedsRefresh=[],this.searchFilter.partOf){let r=[];for(let a of this.concordances.filter(o=>this.$jskos.compare(o,{uri:this.searchFilter.partOf}))){let o=c.get(a,"_registry.uri");o&&!r.includes(o)&&r.push(o)}if(r.length>0)for(let a of r)this.showRegistry[a]=!0}let t=this.searchRegistries.filter(r=>e==null||r.uri==e);for(let r of t){this.searchCancelToken[r.uri]&&this.searchCancelToken[r.uri].cancel("There was a newer refresh operation.");const a=this.searchRepeatManagers[r.uri];if(a&&!a.isPaused&&a.stop(),!this.showRegistry[r.uri]){this.$delete(this.searchResults,r.uri);continue}let o=this.generateCancelToken();this.searchCancelToken[r.uri]=o,this.$set(this.searchPages,r.uri,s),this.$set(this.searchLoading,r.uri,!0);const d=()=>this.getMappings({from:this.searchFilter.fromNotation,to:this.searchFilter.toNotation,fromScheme:this.getSchemeForFilter(this.searchFilter.fromScheme),toScheme:this.getSchemeForFilter(this.searchFilter.toScheme),creator:this.searchFilter.creator,type:this.searchFilter.type,direction:this.searchFilter.direction,partOf:this.searchFilter.partOf,registry:r.uri,offset:((this.searchPages[r.uri]||1)-1)*this.componentSettings.resultLimit,limit:this.componentSettings.resultLimit,cancelToken:o.token}),l=p=>{if(o==this.searchCancelToken[r.uri]){if(!p){this.$set(this.registryHasErrored,r.uri,!0),(!this.searchResults[r.uri]||this.searchResults[r.uri].includes(null))&&this.$set(this.searchResults,r.uri,[]),this.$set(this.searchLoading,r.uri,!1);return}this.$set(this.registryHasErrored,r.uri,!1),s=s||this.searchPages[r.uri]||1,p.length==0&&s>1?this.search(r.uri,s-1):(this.$set(this.searchResults,r.uri,p),this.$set(this.searchLoading,r.uri,!1),this.$set(this.searchPages,r.uri,s))}};if(this.autoRefresh){const p=this.repeat({function:()=>d(),interval:this.autoRefresh,callback:(g,f)=>{g&&this.$log.warn("Mapping Browser (Search): Error during refresh",g),l(f)}});this.$set(this.searchRepeatManagers,r.uri,p)}else d().then(l)}let n={};c.forOwn(this.searchFilter,(r,a)=>{r&&(n[a]=r)});let i=encodeURIComponent(JSON.stringify(n));this.searchShareLinkPart=`search=${i}`},_navigatorRefresh(){if(!this.navigatorNeedsRefresh.length)return;let e;this.navigatorNeedsRefresh.includes(null)?e=null:e=c.uniq(this.navigatorNeedsRefresh),this.navigatorNeedsRefresh=[];let s={direction:"both",mode:"or",selected:{scheme:{[!0]:m(this.selected.scheme[!0]),[!1]:m(this.selected.scheme[!1])}}},t=this.componentSettings.navigatorShowResultsForLeft?c.get(this,"selected.concept[true]"):null,n=this.componentSettings.navigatorShowResultsForRight?c.get(this,"selected.concept[false]"):null;if(t&&(s.from=t),n&&(s.to=n),!t&&!n){this.navigatorResults={};return}e||(this.navigatorPages={});for(let i of this.navigatorRegistries){if(e&&!e.includes(i.uri))continue;if(!this.showRegistry[i.uri]){this.$delete(this.navigatorResults,i.uri);continue}const r=this.navigatorRepeatManagers[i.uri];r&&!r.isPaused&&r.stop(),this.navigatorCancelToken[i.uri]&&this.navigatorCancelToken[i.uri].cancel("There was a newer refresh operation.");let a=this.generateCancelToken();this.navigatorCancelToken[i.uri]=a,e||this.$set(this.navigatorResults,i.uri,[null]);const o=()=>this.getMappings(O($({},s),{registry:i.uri,limit:this.$jskos.mappingRegistryIsStored(i)?100:this.componentSettings.resultLimit,cancelToken:a.token})),d=l=>{if(a==this.navigatorCancelToken[i.uri]){if(!l){this.$set(this.registryHasErrored,i.uri,!0),(!this.navigatorResults[i.uri]||this.navigatorResults[i.uri].includes(null))&&this.$set(this.navigatorResults,i.uri,[]);return}this.$set(this.registryHasErrored,i.uri,!1),l=l.sort((p,g)=>{if(p._occurrence||g._occurrence)return c.get(g,"_occurrence.count",0)-c.get(p,"_occurrence.count",0);let f={a:10,b:10};return c.forOwn({a:p,b:g},(v,y)=>{let S=this.$jskos.conceptsOfMapping(v,"from"),D=this.$jskos.conceptsOfMapping(v,"to"),B=this.$jskos.isContainedIn(this.selected.concept[!0],S),H=this.$jskos.isContainedIn(this.selected.concept[!1],D);if(B&&H)return;f[y]-=1;let _e=this.$jskos.isContainedIn(this.selected.concept[!0],D),ke=this.$jskos.isContainedIn(this.selected.concept[!1],S);_e&&ke||(f[y]-=1,B||(f[y]-=4),H||(f[y]-=3),ke||(f[y]-=2),_e||(f[y]-=1))}),f.b-f.a!=0?f.b-f.a:l.indexOf(p)-l.indexOf(g)}),l._totalCount=void 0,this.componentSettings.showAllSchemes||(l=l.filter(p=>{if(this.selected.scheme[!0]&&this.selected.scheme[!1]){let g=!0;for(let f of[p.fromScheme,p.toScheme]){let v=!1;for(let y of[!0,!1])this.$jskos.compare(f,this.selected.scheme[y])&&(v=!0);g=g&&v}return g}return!0})),this.$set(this.navigatorResults,i.uri,l),this.navigatorPages[i.uri]>1&&l.length<(this.navigatorPages[i.uri]-1)*this.componentSettings.resultLimit+1&&this.$set(this.navigatorPages,i.uri,this.navigatorPages[i.uri]-1)}};if(this.autoRefresh){const l=this.repeat({function:()=>o(),interval:this.autoRefresh,callback:(p,g)=>{p&&this.$log.warn("Mapping Browser (Navigator): Error during refresh",p),d(g)}});this.$set(this.navigatorRepeatManagers,i.uri,l)}else o().then(d)}},swapClicked(){this.lockScheme[!0]=!1,this.lockScheme[!1]=!1,[this.searchFilterInput.fromScheme,this.searchFilterInput.fromNotation,this.searchFilterInput.toScheme,this.searchFilterInput.toNotation]=[this.searchFilterInput.toScheme,this.searchFilterInput.toNotation,this.searchFilterInput.fromScheme,this.searchFilterInput.fromNotation],this.searchClicked()},resultsToSections(e,s,t,n){let i=[];for(let r of this.mappingRegistriesSorted.filter(a=>e[a.uri])){let a={};a.registry=r,this.$jskos.compareFast(r,this.currentRegistry)&&(a._class="mappingBrowser-table-currentRegistrySection"),a.items=[],a.loading=t[r.uri],a.page=s[r.uri]||1;let o=e[r.uri]||[];a.totalCount=o._totalCount||o.length,o.length==1&&o[0]==null&&(a.loading=!0),o._url&&(a.url=o._url),q(c.flatten(o.map(l=>this.$jskos.conceptsOfMapping(l))));let d=0;for(let l of o){if(!this.$jskos.mappingRegistryIsStored(r)){const S=this.currentRegistry&&e[this.currentRegistry.uri]||[],D=B=>B&&B.identifier.find(H=>H&&H.startsWith("urn:jskos:mapping:members:"));if(S.find(B=>D(B)==D(l))){d+=1;continue}}let p={mapping:l,registry:r};if(p.sourceScheme=c.get(l,"fromScheme")||void 0,p.targetScheme=c.get(l,"toScheme")||void 0,p.sourceConcepts=this.$jskos.conceptsOfMapping(l,"from").filter(S=>S!=null),p.targetConcepts=this.$jskos.conceptsOfMapping(l,"to").filter(S=>S!=null),p.sourceConceptsLong=p.sourceConcepts,p.targetConceptsLong=p.targetConcepts,!c.get(l,"from")&&p.sourceConcepts.length==0&&(p.sourceScheme=void 0),!c.get(l,"to")&&p.targetConcepts.length==0&&(p.targetScheme=void 0),p.sourceConcepts.length+p.targetConcepts.length==0){d+=1;continue}let g=this.$jskos.mappingMembersIdentifier({from:{memberSet:[this.selected.concept[!0]]},to:{memberSet:[this.selected.concept[!1]]}}),f=this.$jskos.mappingMembersIdentifier(this.$store.state.mapping.mapping),v=l.identifier.includes(g)||l.identifier.includes(f);p._rowClass="",v&&(p._rowClass="mappingBrowser-table-row-match");let y=c.get(this.$store.state.mapping.original,"uri");y&&l.uri==y&&(p._rowClass="mappingBrowser-table-row-edited"),p.creator=l.creator&&l.creator[0]||"",typeof p.creator=="object"&&(p.creator=this.$jskos.prefLabel(p.creator)),p.extra={date:l.modified||l.created},p.source=this.$jskos.prefLabel(r),p.sourceShort=this.$jskos.notation(r),p.type=this.$jskos.mappingTypeByType(l.type),p.occurrence=l._occurrence,p.uniqueId=this.hash(n+r.uri+JSON.stringify(c.omit(this.$jskos.copyDeep(l)))),this.$jskos.compareFast(p.registry,this.hoveredRegistry)&&(p._rowClass+=" mappingBrowser-hoveredRegistry"),a.items.push(p)}o._totalCount===void 0&&(a.items=a.items.slice((a.page-1)*this.componentSettings.resultLimit,a.page*this.componentSettings.resultLimit)),a.totalCount-=d,i.push(a)}return i},droppedConcept(e,s){c.forOwn(s,(t,n)=>{let i="";n=="scheme"?this.$jskos.isScheme(e)?i=c.get(e,"notation[0]"):i=c.get(e,"inScheme[0].notation[0]"):n=="concept"&&this.$jskos.isConcept(e)&&(i=c.get(e,"notation[0]")),i&&c.set(this,t,i)})},changePage(e,{registry:s,page:t,userInitiated:n}){let i=this[`${e}Pages`][s.uri];n?(this.$set(this[`${e}Pages`],s.uri,t),e=="search"&&this.search(s.uri,t)):t!=i&&(this.$set(this[`${e}Pages`],s.uri,t),this.$nextTick(()=>{this.$set(this[`${e}Pages`],s.uri,i)}))}}},Ze={};var Ai=w(Bi,Ti,Di,!1,Fi,"3cc0d614",null,null);function Fi(e){for(let s in Ze)this[s]=Ze[s]}var Hr=function(){return Ai.exports}();T.use(Xe);const K=new Xe({mode:"history"}),Ni=e=>{e.subscribe(s=>{s.type.startsWith("mapping")&&!s.type.endsWith("setIdentifier")&&e.commit("mapping/setIdentifier")})},ji="cocoda-mappingTrash--"+window.location.pathname,Ei=e=>{e.subscribe(s=>{["mapping/addToTrash","mapping/removeFromTrash","mapping/clearTrash"].includes(s.type)&&e.state.mapping.mappingTrashLoaded&&P.setItem(ji,e.state.mapping.mappingTrash)})},zi=e=>{let s=["scheme","concept"],t={true:"from",false:"to"},n={};for(let a of s)for(let o of[!0,!1]){let d=t[o]+(a=="scheme"?"Scheme":""),l=e.state.selected[a][o];l&&l.uri&&(n[d]=l.uri)}u.conceptsOfMapping(e.state.mapping.mapping).length&&(e.getters["mapping/hasChangedFromOriginal"]&&(n.mapping=JSON.stringify(u.minifyMapping(e.state.mapping.mapping))),e.state.mapping.original&&(e.state.mapping.original.uri?n.mappingUri=e.state.mapping.original.uri:e.state.mapping.original.identifier&&(n.mappingIdentifier=e.state.mapping.original.identifier.find(a=>a&&a.startsWith("urn:jskos:mapping:content:"))))),K.currentRoute.query.config&&(n.config=K.currentRoute.query.config);let i=!0;for(let a of s)for(let o of[!0,!1]){let d=t[o]+(a=="scheme"?"Scheme":"");n[d]!=K.currentRoute.query[d]&&(i=!1)}let r;return i?r=K.replace({query:n}):r=K.push({query:n}),r.catch(()=>null)},Oi=e=>{e.subscribe(s=>{if(["selected/clear","selected/set","mapping/add","mapping/remove","mapping/removeAll","mapping/set","mapping/setType","mapping/switch","mapping/empty"].includes(s.type)){if(s.payload&&s.payload.noQueryRefresh)return;zi(e)}})};let Pi=[Ni,Ei,Oi];const Ui={scheme:{true:null,false:null},concept:{true:null,false:null},loadingId:{true:"",false:""},previousConcept:{true:null,false:null},nextConcept:{true:null,false:null}},Wi={clear(e,{kind:s,isLeft:t}){e[s][t]=null,s=="scheme"&&(e.concept[t]=null)},set(e,{kind:s,isLeft:t,value:n,concept:i,scheme:r}){s=="both"?(e.scheme[t]=r&&c.pick(r,["uri"]),e.concept[t]=i&&c.pick(i,["uri"])):e[s][t]=c.pick(n,["uri"])},setLoadingId(e,{isLeft:s,loadingId:t}={}){e.loadingId[s]=t},setPreviousConcept(e,{isLeft:s,concept:t}){const n=t&&t.uri;e.previousConcept[s]=n?{uri:n}:null},setNextConcept(e,{isLeft:s,concept:t}){const n=t&&t.uri;e.nextConcept[s]=n?{uri:n}:null}};var Vi={namespaced:!0,state:Ui,mutations:Wi};const Hi="cocoda-mappingTrash--"+window.location.pathname,ut={from:{memberSet:[]},to:{memberSet:[]},fromScheme:null,toScheme:null,type:[u.defaultMappingType.uri]},Ki={mapping:u.copyDeep(ut),original:{uri:null,mapping:null,registry:null},mappingsNeedRefresh:!1,mappingsNeedRefreshRegistry:null,mappingTrash:[],mappingTrashLoaded:!1},C={fromTo(e){return e?"from":"to"},fromToScheme(e){return C.fromTo(e)+"Scheme"}},U={canAdd:e=>(s,t,n)=>!(s==null||U.added(e)(s,n)),added:e=>(s,t)=>{let n=C.fromTo(t);return c.findIndex(e.mapping[n].memberSet,r=>u.compare(r,s))!=-1},checkScheme:e=>(s,t)=>{let n=U.getScheme(e)(t);return n==null?!0:u.compare(n,s)},getConcepts:e=>s=>{if(c.isBoolean(s)){let t=C.fromTo(s);return u.conceptsOfMapping(e.mapping,t)}else return u.conceptsOfMapping(e.mapping)},getScheme:e=>s=>e.mapping[C.fromToScheme(s)],hasChangedFromOriginal:(e,s,t,n)=>{if(!e.mapping)return!1;if(!e.original.uri)return!0;const i=n.getCurrentRegistry;if(!u.compareFast(e.original.registry,i))return!0;const r=e.original.mapping;let a=(o,d)=>{if(!o&&!d)return!0;if((o||[]).length!=(d||[]).length)return!1;let l=o&&o[0],p=d&&d[0];return!l&&!p?!0:!(l&&!p||!l&&p||l.uri!=p.uri||u.prefLabel(l)!=u.prefLabel(p))};return!i.isAuthorizedFor({type:"mappings",action:"anonymous",user:t.auth.user})&&!a(e.mapping.creator,r.creator)?!0:!u.compareMappings(r,e.mapping)},mappingTrash:(e,s,t)=>{let n=t.config,i=[];for(let r of e.mappingTrash){let a=n.registries.find(o=>u.compareFast(o,r.registry));i.push(Object.assign({},r,{registry:a}))}return i},canCreate:(e,s,t,n)=>{const i=n.getCurrentRegistry;return i?i.isAuthorizedFor({type:"mappings",action:"create",user:t.auth.user})&&!!e.mapping.fromScheme&&!!e.mapping.toScheme:!1},canUpdate:(e,s,t,n)=>{const i=n.getCurrentRegistry;if(!i||!u.compareFast(i,e.original.registry)||!e.mapping||!e.original.uri)return!1;const r=!u.userOwnsMapping(t.auth.user,e.original.mapping);return i.isAuthorizedFor({type:"mappings",action:"update",user:t.auth.user,crossUser:r})&&!!e.mapping.fromScheme&&!!e.mapping.toScheme},canDelete:(e,s,t,n)=>{const i=n.getCurrentRegistry;if(!i||!u.compareFast(i,e.original.registry)||!e.mapping||!e.original.uri)return!1;const r=!u.userOwnsMapping(t.auth.user,e.original.mapping);return i.isAuthorizedFor({type:"mappings",action:"delete",user:t.auth.user,crossUser:r})}},ht={add(e,{concept:s,scheme:t,isLeft:n,cardinality:i="1-to-n"}){if(t=t||s.inScheme&&s.inScheme[0],!t||U.added(e)(s,n))return;let r=C.fromTo(n);r=="from"&&e.mapping.from.memberSet.length!=0||!U.checkScheme(e)(t,n)?e.mapping[r].memberSet=[s]:r=="to"&&i=="1-to-1"?e.mapping[r].memberSet=[s]:e.mapping[r].memberSet.push(s),e.mapping[C.fromToScheme(n)]=t},remove(e,{concept:s,isLeft:t}){let n=C.fromTo(t),i=c.findIndex(e.mapping[n].memberSet,r=>u.compare(r,s));i!=-1&&(e.mapping[n].memberSet.splice(i,1),e.mapping[n].memberSet.length==0&&n=="from"&&(e.mapping[C.fromToScheme(t)]=null),u.conceptsOfMapping(e.mapping).length===0&&ht.empty(e))},removeAll(e,{isLeft:s}){let t=C.fromTo(s);e.mapping[t].memberSet=[],e.mapping[C.fromToScheme(s)]=null},set(e,{mapping:s=null,original:t=null,registry:n=null}){s&&(e.mapping=s),n=n||c.get(t,"_registry"),t&&n?(e.original.uri=t.uri,e.original.mapping=t,e.original.registry=n):s||(e.original.uri=null)},empty(e){e.mapping=u.copyDeep(ut),e.original.uri=null},setType(e,{uri:s}){e.mapping.type=[s]},setCreator(e,{creator:s}){s&&!c.isArray(s)&&(s=[s]),!s||s.length==0?T.delete(e.mapping,"creator"):e.mapping.creator=s},setContributor(e,{contributor:s}){s&&!c.isArray(s)&&(s=[s]),!s||s.length==0?T.delete(e.mapping,"contributor"):e.mapping.contributor=s},setScheme(e,{isLeft:s=!0,scheme:t}){U.getConcepts(e)(s).length==0&&(e.mapping[C.fromToScheme(s)]=t)},switch(e){Object.assign(e.mapping,{from:e.mapping.to,to:e.mapping.from,fromScheme:e.mapping.toScheme,toScheme:e.mapping.fromScheme}),e.mapping.type[0]=="http://www.w3.org/2004/02/skos/core#narrowMatch"?e.mapping.type[0]="http://www.w3.org/2004/02/skos/core#broadMatch":e.mapping.type[0]=="http://www.w3.org/2004/02/skos/core#broadMatch"&&(e.mapping.type[0]="http://www.w3.org/2004/02/skos/core#narrowMatch")},setIdentifier(e){e.mapping.fromScheme&&e.mapping.toScheme&&(e.mapping=u.addMappingIdentifiers(e.mapping))},setRefresh(e,{refresh:s=!0,registry:t}={}){s&&t?e.mappingsNeedRefreshRegistry=t:e.mappingsNeedRefreshRegistry=null,e.mappingsNeedRefresh=s},setTrash(e,{trash:s}={}){e.mappingTrash=s,e.mappingTrashLoaded=!0},addToTrash(e,{mapping:s,registry:t}={}){let n={mapping:u.minifyMapping(s),registry:{uri:t.uri}};e.mappingTrash=[n].concat(e.mappingTrash),e.mappingTrash.length>10&&(e.mappingTrash=e.mappingTrash.slice(0,10))},removeFromTrash(e,{uri:s}={}){e.mappingTrash=e.mappingTrash.filter(t=>t.mapping.uri!=s)},clearTrash(e){e.mappingTrash=[]}},Gi={loadMappingTrash({commit:e}){return P.getItem(Hi).then(s=>{e(s?{type:"setTrash",trash:s}:{type:"setTrash",trash:[]})})},restoreMappingFromTrash({state:e,rootState:s,commit:t},{uri:n}){const{registries:i}=s.config,r=e.mappingTrash.find(p=>p.mapping.uri==n),a=i.find(p=>u.compareFast(p,r&&r.registry));if(!r||!a)return _.warn("Tried to restore mapping from trash, but could not find item or determine provider.",r),Promise.resolve(null);const o=c.get(r.mapping,"creator[0].uri")||s.settings.settings.creatorUri,d=u.prefLabel(c.get(r.mapping,"creator[0]"),{fallbackToUri:!1})||s.settings.settings.creator,l={mapping:r.mapping,params:{identity:o,identityName:d}};return a.postMapping(l).then(p=>(p&&(t({type:"removeFromTrash",uri:n}),t({type:"setRefresh",registry:a.uri})),p))}};var qi={namespaced:!0,state:Ki,getters:U,mutations:ht,actions:Gi};const Ji={alerts:[]},Zi={add(e,s){s.variant=s.variant||"warning",s.countdown=s.countdown!=null?s.countdown:5;let t=!0;(!s.countdown||s.countdown==-1)&&(t=!1),s.shouldCountdown=t,e.alerts.push(s)},setCountdown(e,{alert:s,countdown:t}){s.countdown=t,s.shouldCountdown=!0}};var Qi={namespaced:!0,state:Ji,mutations:Zi};let te;const Yi={available:!1,authorized:!1,user:void 0,connected:!1,providers:[],about:{},tokenTimeout:null},Xi={set(e,{prop:s,value:t=null}){e[s]=t}},er={init({commit:e,state:s,rootState:t},n){return new Promise(i=>{let r=n.startsWith("https");n=n.replace("http://","").replace("https://",""),te=new M(n,{ssl:r});let a=t.config.registries.filter(o=>o.has.auth);te.addEventListener(null,o=>{switch(os({eventType:o.type}),o.type){case M.events.connect:i(),e({type:"set",prop:"connected",value:!0});break;case M.events.disconnect:i(),e({type:"set",prop:"connected",value:!1});break;case M.events.login:e({type:"set",prop:"user",value:o.user});break;case M.events.logout:e({type:"set",prop:"user",value:null}),e({type:"set",prop:"authorized",value:!1});break;case M.events.update:e({type:"set",prop:"user",value:o.user});break;case M.events.about:o.type=void 0,e({type:"set",prop:"about",value:o});for(let d of a)d.setAuth({key:o.publicKey});break;case M.events.providers:e({type:"set",prop:"providers",value:o.providers});break;case M.events.token:s.tokenTimeout&&clearTimeout(s.tokenTimeout);for(let d of a)d.setAuth({bearerToken:o.token});e({type:"set",prop:"authorized",value:!0}),e({type:"set",prop:"tokenTimeout",value:setTimeout(()=>{e({type:"set",prop:"authorized",value:!1});for(let d of a)d.setAuth({bearerToken:null})},o.expiresIn*1e3)});break;case M.events.error:i(),_.error("LoginClient error:",o.error);break}}),te.connect(),e({type:"set",prop:"available",value:!0})})},setName(e,s){return te.setName(s).then(()=>!0).catch(()=>!1)}};var tr={namespaced:!0,state:Yi,mutations:Xi,actions:er};const nr={insertPrefLabel:{prefLabel:{en:"Copy selected concept label from opposite side into search field",de:"Ausgew\xE4hltes Konzept der gegen\xFCberliegenden Seite in Suchfeld eintragen"},definition:{en:["When turned on, the label of the selected concept on the opposite side will be inserted in the concept search whenever the selected concept changes."],de:["Falls eingeschaltet wird das Label vom ausgew\xE4hlten Konzept der gegen\xFCberliegenden Seite in das Suchfeld einf\xFCgt, sobald das Konzept sich \xE4ndert."]},type:"Boolean",default:!0,sideDependent:!0}},sr={showAllAncestors:{prefLabel:{en:"Always show all ancestors in concept details",de:"\xDCbergeordneten Konzepte immer anzeigen"},type:"Boolean",default:!1}},ir={addToMappingSelectsConcept:{prefLabel:{en:"Select concept when added to mapping",de:"Konzept beim Hinzuf\xFCgen zu Mapping ausw\xE4hlen"},type:"Boolean",default:!0},loadConceptsMappedStatus:{prefLabel:{en:"Mark mapped concepts",de:"Gemappte Konzepte markieren"},definition:{en:["Concepts with at least one mapping in the currently selected mapping database to the opposite concept scheme will be marked with a green bar."],de:["Es wird ein gr\xFCner Balken rechts von Konzepten angezeigt, die in der ausgew\xE4hlten Mapping-Datenbank mindestens ein Mapping auf das gegen\xFCberstehende Vokabular haben."]},type:"Boolean",default:!0}},rr={clearOnSave:{prefLabel:{en:"Clear on save",de:"Leere Editor nach Speichern"},definition:{en:["When turned on, the editor will be cleared after a mapping was saved."],de:["Falls eingeschaltet wird der Editor nach dem Speichern eines Mappings geleert."]},type:"Boolean",default:!0},only1to1mappings:{prefLabel:{en:"Only allow 1-to-1 mappings (1-to-n otherwise)",de:"Nur 1-zu-1 Mappings erlauben (sonst 1-zu-n)"},definition:{en:["When turned on, only 1-to-1 mappings will be allowed. When turned off, 1-to-n mappings will be allowed."],de:["Falls eingeschaltet, werden nur 1-zu-1 Mappings erlaubt. Falls ausgeschaltet, werden 1-zu-n Mappings erlaubt."]},type:"Boolean",default:!1}},ar={resultLimit:{prefLabel:{en:"Results per page:",de:"Ergebnisse pro Seite:"},type:"Number",default:5,min:1,max:20},autoRefresh:{prefLabel:{en:"Automatically refresh (seconds):",de:"Automatisch aktualiseren (Sekunden):"},definition:{en:["Determines how often mappings are refreshed from the API. A value below 10 is not recommended. 0 disables automatic refresh."],de:["Bestimmt, wie h\xE4ufig Mappings von der API aktualisiert werden. Ein Wert unter 10 ist nicht empfohlen. 0 deaktiviert die automatische Aktualisierung."]},type:"Number",min:0,max:1e4},showIdentityWarning:{prefLabel:{en:"Show warning for mismatch in mapping identity",de:"Hinweis bei abweichender Identit\xE4t"},definition:{en:["When enabled, a warning sign will be shown if one of your own mappings contains an identity different from the one currently selected."],de:["Falls eingeschaltet wird eine Warnung angezeigt, falls in einem deiner Mappings eine von der aktuell ausgew\xE4hlten abweichende Identit\xE4t gespeichert ist."]},type:"Boolean",default:!0},navigatorDivider:{prefLabel:{en:"Navigator"},class:"fontWeight-heavy"},showAllSchemes:{prefLabel:{en:"Show results of all concept schemes",de:"Alle Vokabulare ber\xFCcksichtigen"},definition:{en:["When turned off, only the results of the currently selected concept schemes will be shown."],de:["Falls ausgeschaltet werden nur Ergebnisse der Vokabulare angezeigt, die aktuell ausgew\xE4hlt sind."]},type:"Boolean",default:!0},navigatorShowResultsForLeft:{prefLabel:{en:"Results related to selected concept on the left side",de:"Mappings mit linkem Konzept anzeigen"},type:"Boolean",default:!0},navigatorShowResultsForRight:{prefLabel:{en:"Results related to selected concept on the right side",de:"Mappings mit rechtem Konzept anzeigen"},type:"Boolean",default:!0}};var F={ConceptSchemeSelection:nr,ItemDetail:sr,ConceptListWrapper:ir,MappingEditor:rr,MappingBrowser:ar};const ie="cocoda-settings--"+window.location.pathname;let R={creator:"",creatorUri:"",mappingBrowserShowRegistry:{},minimized:{},flex:{},typesForSchemes:{},locale:"en",preferredLanguages:[],favoriteConcepts:[],favoriteSchemes:null,mappingRegistry:null,conceptListChoice:{[!0]:0,[!1]:0},components:{},hasWrittenIntoLocalMappings:!1};for(let e of Object.keys(F)){R.components[e]={};for(let s of Object.keys(F[e]))F[e][s].sideDependent?(R.components[e][s]={},R.components[e][s][!0]=F[e][s].default,R.components[e][s][!1]=F[e][s].default):R.components[e][s]=F[e][s].default}const or={settings:R,componentSettings:F,loaded:!1},lr={save(e,{settings:s}){e.loaded?(e.settings=s,P.setItem(ie,s)):_.warn("Tried to save settings before they were loaded.")},set(e,{prop:s,value:t}){e.loaded?(c.set(e.settings,s,t),P.setItem(ie,e.settings)):_.warn("Tried to save settings before they were loaded.")},setComponentSetting(e,{component:s,setting:t,isLeft:n,value:i}){e.loaded?(n!==void 0?c.set(e.settings.components[s][t],n,i):c.set(e.settings.components[s],t,i),P.setItem(ie,e.settings)):_.warn("Tried to save settings before they were loaded.")},loaded(e,{loaded:s=!0}){e.loaded=s}},cr={load({commit:e}){return P.getItem(ie).then(s=>{let t=Object.assign({},R,s||{});e({type:"loaded"});for(let n of Object.keys(R.components)){t.components[n]||(t.components[n]={});for(let i of Object.keys(R.components[n]))t.components[n][i]===void 0&&(t.components[n][i]=R.components[n][i])}t.preferredLanguages||(t.preferredLanguages=[]),e({type:"save",settings:t})})}};var pr={namespaced:!0,state:or,mutations:lr,actions:cr};const dr=[{provider:"ConceptApi",uri:"http://coli-conc.gbv.de/registry/gnd-concepts",data:"https://coli-conc.gbv.de/services/gnd.php",suggest:"https://ws.gbv.de/suggest/gnd/?searchterm={searchTerms}",types:"https://ws.gbv.de/suggest/gnd/types",schemes:[{uri:"http://bartoc.org/en/node/430",concepts:[null],topConcepts:[]}],notation:["G"],prefLabel:{de:"Gemeinsame Normdatei",en:"Integrated Authority File"},definition:{en:["Access to a copy of GND at VZG"],de:["Zugriff auf eine GND-Kopie an der VZG"]}},{provider:"ConceptApi",uri:"http://coli-conc.gbv.de/registry/wikidata-concepts",data:"https://coli-conc.gbv.de/services/wikidata/concept/",suggest:"https://coli-conc.gbv.de/services/wikidata/suggest?search={searchTerms}",schemes:[{uri:"http://bartoc.org/en/node/1940",notation:["WD"],concepts:[null],topConcepts:[]}],notation:["WD"],prefLabel:{en:"Wikidata"},definition:{en:["Access to Wikidata in JSKOS format"],de:["Zugriff auf Wikidata im JSKOS-Format"]}},{provider:"ConceptApi",uri:"http://coli-conc.gbv.de/registry/coli-conc-rvk",status:"https://coli-conc.gbv.de/rvk/api/status",notation:["RVK"],prefLabel:{de:"Regensburger Verbundklassifikation"}},{provider:"ConceptApi",uri:"http://coli-conc.gbv.de/registry/coli-conc-concepts",status:"https://coli-conc.gbv.de/api/status",notation:["J"],prefLabel:{en:"JSKOS Server"},definition:{en:["central JSKOS server instance of coli-conc"],de:["zentrale JSKOS-Server Instanz von coli-conc"]}},{provider:"ConceptApi",uri:"http://coli-conc.gbv.de/registry/dante-concepts",status:"https://api.dante.gbv.de/status",notation:["D"],prefLabel:{en:"DANTE"},definition:{en:["DANTE API with vocabularies at VZG"],de:["DANTE-API der VZG"]}},{provider:"SkosmosApi",uri:"http://coli-conc.gbv.de/registry/skosmos-zbw",api:"https://zbw.eu/beta/skosmos/rest/v1/",prefLabel:{en:"Skosmos ZBW"},notation:["S_ZBW"],schemes:[{uri:"http://zbw.eu/stw",identifier:["http://bartoc.org/en/node/313"],VOCID:"stw"}]},{provider:"SkosmosApi",uri:"http://coli-conc.gbv.de/registry/skosmos-bartoc",api:"https://bartoc-skosmos.unibas.ch/rest/v1/",prefLabel:{en:"Skosmos BARTOC"},notation:["S_BRTC"],schemes:[{uri:"http://eurovoc.europa.eu/domains",identifier:["http://bartoc.org/en/node/15"],notation:["EUROVOC"],VOCID:"EuroVoc",topConcepts:[]},{uri:"https://bartoc.org/ILC/1",VOCID:"ILC",notation:["ILC"]}]},{provider:"MeshApi",uri:"http://coli-conc.gbv.de/registry/mesh-concepts",prefLabel:{en:"Medical Subject Headings (MeSH)"},notation:["MeSH"]},{provider:"LocApi",uri:"http://coli-conc.gbv.de/registry/loc-concepts",notation:["LoC"],prefLabel:{en:"Library of Congress"},definition:{en:["Access to Library of Congress vocabularies via their linked data service."]}},{provider:"LocalMappings",uri:"http://coli-conc.gbv.de/registry/local-mappings",notation:["L"],prefLabel:{de:"Lokal",en:"Local"},definition:{en:["Mappings saved locally in the browser"],de:["Mappings, die lokal im Browser gespeichert wurden"]}},{provider:"MappingsApi",uri:"http://coli-conc.gbv.de/registry/coli-conc-mappings",status:"https://coli-conc.gbv.de/api/status",notation:["C"],prefLabel:{de:"Konkordanz-Register",en:"Concordance Registry"},definition:{en:["Central concordance registry of coli-conc"],de:["Zentrale Konkordanz-Datenbank von coli-conc"]}},{provider:"MappingsApi",uri:"http://coli-conc.gbv.de/registry/wikidata-mappings",status:"https://coli-conc.gbv.de/services/wikidata/status",notation:["W"],prefLabel:{en:"Wikidata-Mappings"},definition:{en:["Access to Wikidata mappings in JSKOS format"],de:["Zugriff auf Wikidata-Mappings im JSKOS-Format"]}},{provider:"LabelSearchSuggestion",uri:"http://coli-conc.gbv.de/registry/coli-conc-recommendations",excludedSchemes:[{uri:"http://bartoc.org/en/node/1940"},{uri:"http://bartoc.org/en/node/430"},{uri:"http://nomisma.org/id/"}],notation:["CR"],prefLabel:{en:"coli-conc Recommendations",de:"coli-conc Vorschl\xE4ge"}},{provider:"MappingsApi",uri:"http://coli-conc.gbv.de/registry/ccmapper-mapping-recommendations",status:"https://coli-conc.gbv.de/ccmapper/api/status",schemes:[{uri:"http://dewey.info/scheme/edition/e23/"},{uri:"http://uri.gbv.de/terminology/rvk/"}],stored:!1,notation:["CC"],prefLabel:{en:"ccmapper Mapping Recommendations",de:"ccmapper Mapping-Vorschl\xE4ge"}},{provider:"ReconciliationApi",uri:"http://coli-conc.gbv.de/registry/wikidata-reconciliation",api:"https://tools.wmflabs.org/openrefine-wikidata/{language}/api",schemes:[{uri:"http://bartoc.org/en/node/1940"}],notation:["WR"],prefLabel:{de:"Wikidata-Reconciliation",en:"Wikidata Reconciliation"},definition:{en:["Wikidata Reconciliation API"],de:["Wikidata-Reconciliation API"]}},{provider:"ReconciliationApi",uri:"http://coli-conc.gbv.de/registry/gnd-reconciliation",api:"https://lobid.org/gnd/reconcile",schemes:[{uri:"http://bartoc.org/en/node/430"}],notation:["GR"],prefLabel:{de:"GND-Reconciliation",en:"GND Reconciliation"},definition:{en:["GND Reconciliation API (lobid.org)"],de:["GND-Reconciliation API (lobid.org)"]}},{provider:"ReconciliationApi",uri:"http://coli-conc.gbv.de/registry/nomisma-reconciliation",api:"https://coli-conc.gbv.de/nomisma-reconciliation/",schemes:[{uri:"http://nomisma.org/id/"}],notation:["NR"],prefLabel:{de:"Nomisma-Reconciliation",en:"Nomisma Reconciliation"},definition:{en:["Nomisma Reconciliation API"],de:["Nomisma-Reconciliation API"]}}],ur=!1,hr=[{prefLabel:{en:"Netherlands Institute for Art History"},schemeUris:["http://bartoc.org/en/node/459"],url:"https://rkd.nl/en/explore/images#filters%5Biconclass_code%5D={notation}"},{prefLabel:{en:"finto"},schemeUris:["http://bartoc.org/en/node/459"],url:"https://finto.fi/ic/en/page/{notation}"},{prefLabel:{de:"Erdteilallegorien"},schemeUris:["http://bartoc.org/en/node/459"],url:"https://erdteilallegorien.univie.ac.at/iconclass/{notation}"},{prefLabel:{de:"ccmapper"},url:"https://ccmapper-de.pansoft.de/m/mapping.html?id={notation}",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{de:"Wikipedia (de)"},url:"https://de.wikipedia.org/w/index.php?title=Special:Search&search={prefLabel}"},{prefLabel:{de:"Wikipedia (en)"},url:"https://en.wikipedia.org/w/index.php?title=Special:Search&search={prefLabel}"},{prefLabel:{de:"Wikipedia"},url:"https://{language}.wikipedia.org/w/index.php?title=Special:Search&search={prefLabel}"},{prefLabel:{de:"RVK Online"},url:"https://rvk.uni-regensburg.de/regensburger-verbundklassifikation-online#notation/{notation}",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{en:"WebDewey Search"},url:"https://deweysearchde.pansoft.de/webdeweysearch/executeSearch.html?query={notation}",schemeUris:["http://bartoc.org/en/node/241"]},{prefLabel:{en:"K10plus"},url:"https://opac.k10plus.de/DB=2.299/CMD?ACT=SRCHA&IKT=8533&TRM=gnd+{notation}",schemeUris:["http://bartoc.org/en/node/430"]},{prefLabel:{en:"K10plus"},url:"https://opac.k10plus.de/DB=2.299/CMD?ACT=SRCHA&TRM=bkl+{notation}",schemeUris:["http://bartoc.org/en/node/18785"]},{prefLabel:{en:"WebGND"},url:"http://gnd.eurospider.com/s?q={notation}",schemeUris:["http://bartoc.org/en/node/430"]},{prefLabel:{de:"Bremer Online Systematik"},url:"https://suche.suub.uni-bremen.de/cgi-bin/CiXbase/brewis/CiXbase_search?act=search&term={notation}?&LAN=DE&IHITS=30&FHITS=30&XML_STYLE=/styles/cns-DE.xml&index=C&n_dtyp=1L&n_rtyp=ceEdX&RELEVANCE=55&INDEXINFO=awCN&forward=1&section=ms",schemeUris:["https://bartoc.org/de/node/730"]},{prefLabel:{de:"GEPRIS"},url:"https://gepris.dfg.de/gepris/OCTOPUS?task=doSearchExtended&context=projekt&fachlicheZuordnung={notation}",schemeUris:["http://uri.gbv.de/terminology/dfg/"]},{prefLabel:{de:"DFG-Fachkollegien"},url:"https://www.dfg.de/dfg_profil/gremien/fachkollegien/liste/index.jsp?id={notation}",schemeUris:["http://uri.gbv.de/terminology/dfg/"]},{prefLabel:{en:"K10plus"},url:"https://opac.k10plus.de/DB=2.299/CLK?IKT=3002&NOABS=Y&TRM={notation}",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{en:"SWB"},url:"https://swb.bsz-bw.de/DB=2.1/CMD?ACT=SRCHA&IKT=3002&TRM={notation}",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{de:"Bibliotheksverbund Bayern (BVB)"},url:"https://bvbat01.bib-bvb.de/TP61/start.do?Query=0080%3D%22{notation}%22+IN+%5B1%5D",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{de:"\xD6sterreichischer Bibliothekenverbund (OBV)"},url:"https://search.obvsg.at/primo-explore/search?vid=OBV&query=lsr06%2Cexact%2C{notation}%2CAND&mode=advanced",schemeUris:["http://bartoc.org/en/node/533"]},{prefLabel:{en:"K10plus"},url:"https://opac.k10plus.de/DB=2.299/CMD?ACT=SRCHA&IKT=8506&TRM={notation}",schemeUris:["http://bartoc.org/en/node/454","http://bartoc.org/en/node/18536"]}],gr=["http://uri.gbv.de/terminology/bk/","http://bartoc.org/en/node/18785","http://uri.gbv.de/terminology/rvk/","http://bartoc.org/en/node/533","http://bartoc.org/en/node/430","http://dewey.info/scheme/edition/e23/","http://bartoc.org/en/node/241","http://bartoc.org/en/node/1940"],mr=[{id:"saveMapping",action:"saveMapping",component:"MappingEditor",keys:"ctrl+s,command+s",prefLabel:{en:"Save current mapping",de:"Aktuelles Mapping speichern"}},{id:"clearMapping",action:"clearMapping",component:"MappingEditor",keys:"ctrl+shift+c,command+shift+c",prefLabel:{en:"Clear current mapping",de:"Aktuelles Mapping leeren"}},{id:"addConceptLeft",action:"addConcept",component:"MappingEditor",keys:"ctrl+a,command+a",prefLabel:{en:"Add left concept to current mapping",de:"Linkes Konzept zu aktuellem Mapping hinzuf\xFCgen"},isLeft:!0},{id:"addConceptRight",action:"addConcept",component:"MappingEditor",keys:"ctrl+d,command+d",prefLabel:{en:"Add right concept to current mapping",de:"Rechtes Konzept zu aktuellem Mapping hinzuf\xFCgen"},isLeft:!1},{id:"nextConceptLeft",action:"nextConcept",component:"ConceptDetail",keys:"alt+n,alt+keyCode:78",prefLabel:{en:"Open next concept (left)",de:"N\xE4chstes Konzept \xF6ffnen (links)"},isLeft:!0},{id:"nextConceptRight",action:"nextConcept",component:"ConceptDetail",keys:"alt+m,alt+\xB5",prefLabel:{en:"Open next concept (right)",de:"N\xE4chstes Konzept \xF6ffnen (rechts)"},isLeft:!1},{id:"openSchemeSelectionLeft",action:"openSchemeSelection",component:"ConceptSchemeSelection",keys:"ctrl+shift+f,command+shift+f",prefLabel:{en:"Open concept scheme selection (left)",de:"Vokabularauswahl \xF6ffnen (links)"},isLeft:!0},{id:"openSchemeSelectionRight",action:"openSchemeSelection",component:"ConceptSchemeSelection",keys:"ctrl+shift+g,command+shift+g",prefLabel:{en:"Open concept scheme selection (right)",de:"Vokabularauswahl \xF6ffnen (rechts)"},isLeft:!1},{id:"openConceptSearchLeft",action:"openConceptSearch",component:"ConceptSchemeSelection",keys:"ctrl+f,command+f",prefLabel:{en:"Open concept search (left)",de:"Konzeptsuche \xF6ffnen (links)"},isLeft:!0},{id:"openConceptSearchRight",action:"openConceptSearch",component:"ConceptSchemeSelection",keys:"ctrl+g,command+g",prefLabel:{en:"Open concept search (right)",de:"Konzeptsuche \xF6ffnen (rechts)"},isLeft:!1}],fr=["en","de"],vr=[{file:"coli-conc-logo.svg",url:"https://coli-conc.gbv.de/",alt:"coli-conc"}],br="Cocoda Mapping Tool",yr=[{url:"https://www.gbv.de/impressum",prefLabel:{en:"Imprint",de:"Impressum"}},{url:"https://github.com/gbv/cocoda/wiki/Barrierefreiheit",prefLabel:{en:"Accessibility",de:"Barrierefreiheit"}},{url:"https://www.gbv.de/datenschutz",prefLabel:{en:"Privacy Policy",de:"Datenschutz"}},{url:"https://github.com/gbv/cocoda/issues/new",prefLabel:{en:"Feedback"}}],wr=[{fromScheme:{uri:"http://bartoc.org/en/node/1940"},toScheme:{uri:"http://uri.gbv.de/terminology/bk/"},url:"https://github.com/gbv/cocoda/wiki/Wikidata-Basisklassifikation"},{fromScheme:{uri:"http://bartoc.org/en/node/1940"},toScheme:{uri:"http://bartoc.org/en/node/430"},url:"https://github.com/gbv/cocoda/wiki/Wikidata-GND"}],_r=[],kr={mappings:1e4,update:12e4};var G={registries:dr,overrideRegistries:ur,searchLinks:hr,favoriteSchemes:gr,shortcuts:mr,languages:fr,logos:vr,title:br,menu:yr,guidelines:wr,conceptLists:_r,autoRefresh:kr,"coli-ana":"https://coli-conc.gbv.de/coli-ana/app/"};const Sr={general:{welcome:"Welcome to Cocoda!",manual:"Manual",documentation:"Documentation",github:"GitHub",feedback:"Feedback is welcome!",feedback2:"Please report any questions, ideas or bugs!",swapSides:"swap sides",clearScheme:"clear scheme",addToMapping:"add concept to mapping",yes:"Yes",no:"No",loading:"Loading...",cancel:"Cancel",authNecessary:"Authentication necessary.",or:"or",of:"of",left:"left",right:"right",enabled:"enabled",disabled:"disabled",default:"Default",all:"all",resizingSlider:"drag to resize cards",malformedConfig:"The configuration file {configFile} could not be loaded!",showConcordances:"Show Concordances",showMappingSearch:"Show Mapping Search",tooManyMappings:"There are {count} local mappings stored in your browser. A large number of local mappings can impact performance of the tool.",undo:"undo",type:"Type",noRegistries:"The configuration contains no providers. Please consult the <a href='https://gbv.github.io/cocoda/#configuration' target='_blank'>documentation</a> how to configure providers!",storedMappings:"Mappings",recommendedMappings:"Recommendations"},navbar:{trashTitle:"Recently Deleted Mappings",trashClearButton:"Clear",trashClearButtonTooltip:"Permanently removes all mappings from the trash.",trashRestoreTooltip:"restore mapping",openLeft:"open on left side",openRight:"open on right side",removeFromFavorites:"remove from favorites",setIdentity:"Configure a mapping identity",defaultIdentity:"Default Identity"},schemeSelection:{source:"Source Scheme",target:"Target Scheme",filter:"Filter",filtersRemove:"Remove all filters",filterSelectAll:"select all",filterDeselectAll:"deselect all",filterOnlyFavorites:"Show only favorites",languageFilter:"Language",typeFilter:"Scheme Type",filterOther:"Other",registryFilter:"Source",schemeFilterPlaceholder:"search for schemes...",starAdd:"add to favorites",starRemove:"remove from favorites",popoverShow:"show scheme selection",popoverHide:"hide scheme selection",showAllSchemes:"Show all {count} schemes"},search:{placeholder:"Type to search...",results:"result | results",noResults:"No results...",error:"Error performing the search."},conceptDetail:{showAllAncestors:"show all ancestors",showLessAncestors:"show less ancesters",created:"Created",modified:"Modified",issued:"Issued",altLabels:"Alternative Labels",definition:"Definition",relevance:"Relevance",relevanceVeryHigh:"very high",relevanceHigh:"high",relevanceMedium:"medium",relevanceLow:"low",relevanceGeneric:"generic",info:"Info",labels:"Labels",editorial:"Editorial",scope:"Scope",gnd:"GND",coliAnaIncomplete:"This DDC number could not be fully analyzed. Either it was not built following current DDC number building rules or analysis is yet to be completed.",coliAnaInfo:'Go to the <a href="{url}" target="_blank">coli-ana web interface</a> for more details and information.',searchLinks:"Search Links",clearConcept:"clear concept",previousConceptTooltip:"previous concept",nextConceptTooltip:"next concept"},schemeDetail:{noTopConcepts:"No top concepts",languages:"Languages",availableMappings:"mappings",registry:"Sources"},conceptList:{noItems:"No Concepts available",favoriteConcepts:"Favorite Concepts",favoriteConceptsShort:"Favorites",topConcepts:"Top concepts of current concept scheme in a hierarchical view",topConceptsShort:"Hierarchical View"},itemDetail:{pleaseSelect:"Please select a scheme or concept.",combinedConcept:"combined concept",unknownConcept:"unknown concept"},mappingEditor:{title:"Mapping Editor",guidelines:"open mapping guidelines",placeholder:"Drag and drop a concept here.",placeholderDragging:"Drop concept here.",saveMapping:"save mapping into {0}",deleteMapping:"delete mapping",clearMapping:"clear mapping",cloneMapping:"clone mapping",swapMapping:"swap source and target concepts",deleteTitle:"Delete Mapping",deleteText:"Do you really want to delete this mapping?",deleteChangesText:"Note: There are unsaved changes in the mapping.",deleteConfirm:"Delete original mapping",cancel:"@:general.cancel",removeConceptFromMapping:"remove concept from mapping",settingsButton:"Mapping Editor Settings",saved:"saved",notSaved:"not saved",invalidMissing:"Missing {0}",invalidWhitelist:"{0} not allowed in {1}",invalid1to1:"Only 1-to-1 mappings allowed in {0}.",warningNoRegistry:"There is no writable mapping registry configured in this Cocoda instance.",warningUpdateRegistry:"Mapping will not be updated in {0}, but saved as a new mapping in {1}.",warningUpdateNotAllowed:"Mapping can't be updated and will therefore be saved as a new mapping.",warningUpdateScheme:"Updated mapping will be saved with a different {0}, are you sure this is intented? If not, you can clone the mapping (button to the right of the delete button)."},mappingBrowser:{title:"Mapping Browser",edit:"edit in {0}",clone:"copy into Mapping Editor",saveAsMapping:"save as mapping in {0}",delete:"delete",showDetail:"show mapping details",showMore:"@:conceptDetail.showMore",noItems:"no results",from:"From",to:"To",creator:"Creator",chooseConcept:"Select a concept to see mappings and mapping recommendations",settingsButton:"Mapping Browser Settings",creatorIsDifferent:"This is your mapping, but the contained identity does not match your selected identity. Edit and save it again to update the identity.",concordance:"Concordance",concordances:"Concordances",mappingSearch:"Search",mappingNavigator:"Navigator",description:"Description",date:"Date",download:"Download",showMappings:"Show Mappings",total:"Total",searchSourceScheme:"source scheme",searchSourceNotation:"source notation/URI",searchTargetScheme:"target scheme",searchTargetNotation:"target notation/URI",searchType:"@:general.type",searchAllTypes:"all mapping types",searchAllConcordances:"all concordances",searchClear:"Clear",searchSubmit:"Search",searchBidirectional:"Bidirectional",searchBidirectionalTooltip:"If checked, mappings in both directions will be searched.",searchShareLabel:"Link",searchShareTitle:"Share link to this search",searchShareInclude:"Include selected schemes and concepts",searchShareCopy:"Copy link to clipboard",searchInsertSelfIntoCreator:"Insert my own identities",searchForMappingsByCreator:"Search mappings from this creator",searchExtend:"show extended search",searchCollapse:"hide extended search",mappingConfirmedTooltip:"Confirmed",openInCocoda:"open in Cocoda",lockScheme:"lock search scheme to selected scheme",unlockScheme:"unlock search scheme from selected scheme",registryHasErrored:"There has been an error when trying to load mappings from this registry. The shown results can be inaccurate."},mappingDetail:{title:"Mapping Details",sourceScheme:"Source Scheme",sourceConcept:"Source Concept | Source Concepts",targetScheme:"Target Scheme",targetConcept:"Target Concept | Target Concepts",mappingType:"Mapping Type",creator:"@:mappingBrowser.creator",created:"@:conceptDetail.created",modified:"@:conceptDetail.modified",annotations:"Annotations",note:"Note",identifier:"Identifier",partOf:"Part of Concordance",catalogEnrichment:"Search for Enrichment in K10plus"},minimizer:{minimize:"minimize card",maximize:"maximize card"},settingsTabs:["Account","Data Sources","User Interface","Shortcuts","Local Mappings"],settings:{title:"Settings",language:"Interface Language",languageContribution:"To contribute to the translation of Cocoda, see these <a href='https://gbv.github.io/cocoda/#translation' target='_blank'>instructions in the documentation</a>.",preferredLanguages:"Preferred vocabulary languages",preferredLanguagesAdd:"Add language",resetSizes:"reset sizes",creator:"Name",creatorUrl:"Homepage (optional)",creatorPlaceholder:"Enter your name",creatorRewriteTitle:"Rewrite Creator",creatorRewriteText:"Clicking the button below will rewrite the creator for all local mappings with the following information:",creatorRewriteButton:"Rewrite creator for all local mappings",localDownload:"Download Local Mappings",localDownloadJskos:"Download all {0} mappings as JSKOS",localDownloadCsv:"Download all {0} mappings as CSV",localUpload:"Upload Local Mappings (JSKOS)",localUploadPlaceholder:"Choose a file...",localDeleteTitle:"Delete Local Mappings",localDeleteText:"Delete all local mappings",localDeleteSure:"This action deletes all local mappings (including all mappings in the trash) and cannot be undone! Are you sure?",suggestions1:"For issues and suggestions, please use the",suggestions2:"GitHub issue tracker",suggestions3:".",version:"Version",currentCommit:"Current Commit",buildDate:"Build Date",impressum:"Imprint",creatorUri:"Identity (must be an URI, is automatically filled after login)",creatorUriInvalid:"Please input a valid URI.",mappingRegistry:"Mapping Database",mappingRegistries:"Mapping databases",otherRegistries:"Other data sources",creatorInfo:"The following information is stored in all your mappings so it may also be shared:",accountInfo:'Cocoda uses a dedicated <a href="{url}" target="_blank">login server</a> to authenticate users:',accountPage:"Account Page",logInButton:"Log in",logOutButton:"Log out",loggedIn:"You are logged in.",loggedOut:"You are not logged in.",privacyPolicy:"Privacy Policy",localMappingsInfo:"Local mappings are only stored in your current browser. They are not visible to other users, but they will get lost if you purge your browser's local storage."},alerts:{mappingDeleted:"Mapping was deleted from {0}.",mappingNotDeleted:"Mapping could not be deleted from {0}.",mappingSaved:"Mapping was saved in {0}.",mappingNotSaved:"Mapping could not be saved in {0}.",mappingRestored:"Mapping was restored in {0}.",mappingNotRestored:"Mapping could not be restored in {0}.",annotationSaved:"Annotation was saved.",annotationRemoved:"Annotation was removed.",annotationNotSaved:"Annotation could not be saved.",annotationNotRemoved:"Annotation could not be removed.",annotationError:"There was an error regarding annotations. Please try again later.",newVersionText:"There is a new version of Cocoda.",newVersionLink:"Refresh site",loggedIn:"You are now logged in.",loggedInRegistryChanged:"You are now authenticated to save mappings into {0}.",loggedInRegistryChangedUndoButton:"Save mappings locally instead.",loggedOut:"You are now logged out.",nameError:"There was an error setting the name.",versionMismatch:"Database {registryLabel} ({registryUri}) is not version compatible with this release (database: {registryVersion}, supported: {jskosApi}). Please contact an administrator.",localMappingsFirstSaved:`You just saved your first mapping into "Local". Please note that local mappings are stored inside your browser, therefore you will lose these mappings when changing your browser or clearing your browser's storage. You can store mappings permanently inside "Concordance Registry" by logging in and changing your default mapping registry. Please refer to the <a href='https://gbv.github.io/cocoda/dev/user-manual-en.html#login' target='_blank'>manual</a> for more details.`,favoriteConceptsNonConcept:"Only concepts can be added to Favorites list."},dataModal:{title:"Export JSKOS Data",exportClipboard:"copy to clipboard",localDownload:"Download",apiLinks:"API",apiUrl:"URL",concept:"no concepts | 1 concept | {count} concepts",scheme:"no scheme | 1 scheme | {count} schemes",mapping:"no mappings | 1 mapping | {count} mappings",annotation:"no annotations | 1 annotation | {count} annotations",concordance:"no concordances | 1 concordance | {count} concordances",resource:"no resources | 1 resource | {count} resources",button:"Source Data"},registryInfo:{schemes:"Schemes",concepts:"Concepts",mappings:"Mappings",annotations:"Annotations",occurrences:"Co-/Occurrences",authenticated:"Authenticated",notAuthenticated:"Authentication required",canSaveMappings:"This database can be used to save mappings."},annotationPopover:{addConfirmation:"Confirm",removeConfirmation:"Remove Confirmation"},languages:{en:"English",de:"German"},cdkErrors:{CDKError:"Unknown error.",MethodNotImplementedError:"The server doesn't seem to support this action or is not configured correctly.",InvalidOrMissingParameterError:"A parameter seems to be invalid or missing.",BackendError:"The server seems to have issues.",BackendUnavailableError:"The server is not reachable.",NetworkError:"There are issues with the connection.",InvalidRequestError:"The request seems to be invalid.",MissingApiUrlError:"@:cdkErrors.CDKError"}},$r={general:{welcome:"Willkommen bei Cocoda!",manual:"Anleitung",documentation:"Dokumentation",github:"GitHub",feedback:"R\xFCckmeldungen sind willkommen!",feedback2:"Wir freuen uns \xFCber Fragen und Ideen!",yes:"Ja",no:"Nein",swapSides:"Seiten tauschen",clearScheme:"Vokabular entfernen",addToMapping:"Konzepm zum Mapping hinzuf\xFCgen",loading:"Lade...",cancel:"Abbrechen",authNecessary:"Authentifizierung notwendig.",or:"oder",of:"von",left:"links",right:"rechts",enabled:"aktiviert",disabled:"deaktiviert",default:"Standard",all:"alle",resizingSlider:"ziehen, um Komponenten-Gr\xF6\xDFen anzupassen",malformedConfig:"Die Konfigurationsdatei {configFile} konnte nicht geladen werden!",showConcordances:"Zeige Konkordanz-Liste",showMappingSearch:"Zeige die Mapping-Suche",tooManyMappings:"Es sind {count} lokale Mappings im Browser gespeichert. Eine gro\xDFe Anzahl an lokalen Mappings kann die Performance des Tools beeinflussen.",undo:"r\xFCckg\xE4ngig",type:"Typ",noRegistries:"Es sind keine Datenquellen konfiguriert! Bitte entnehmen sie der <a href='https://gbv.github.io/cocoda/#configuration' target='_blank'>Dokumentation</a> wie Datenquellen konfiguriert werden k\xF6nnen!",storedMappings:"Mappings",recommendedMappings:"Vorschl\xE4ge"},navbar:{trashTitle:"K\xFCrzlich gel\xF6schte Mappings",trashClearButton:"Leeren",trashClearButtonTooltip:"Entfernt alle Mappings aus dem Papierkorb.",trashRestoreTooltip:"Mapping wiederherstellen",openLeft:"auf der linken Seite \xF6ffnen",openRight:"auf der rechten Seite \xF6ffnen",removeFromFavorites:"aus den Favoriten entfernen",setIdentity:"Mapping-Identit\xE4t festlegen",defaultIdentity:"Standard-Identit\xE4t"},schemeSelection:{source:"Quell-Vokabular",target:"Ziel-Vokabular",filter:"Filter",filtersRemove:"Alle Filter entfernen",filterSelectAll:"alle ausw\xE4hlen",filterDeselectAll:"alle abw\xE4hlen",filterOnlyFavorites:"Nur Favoriten anzeigen",languageFilter:"Sprache",typeFilter:"Vokabular-Typ",filterOther:"Sonstige",registryFilter:"Quelle",schemeFilterPlaceholder:"Suche nach Vokabularen...",starAdd:"zu Favoriten hinzuf\xFCgen",starRemove:"aus Favoriten entfernen",popoverShow:"Vokabular-Auswahl \xF6ffnen",popoverHide:"Vokabular-Auswahl ausblenden",showAllSchemes:"Alle {count} Vokabulare anzeigen"},search:{placeholder:"Tippen zum Suchen...",results:"Ergebnis | Ergebnisse",noResults:"Keine Ergebnisse...",error:"Bei der Suchanfrage ist ein Fehler aufgetreten."},mappingEditor:{title:"Mapping-Editor",guidelines:"Mapping-Richtlinien \xF6ffnen",placeholder:"Konzept ziehen und hier ablegen.",placeholderDragging:"Konzept hier ablegen.",saveMapping:"Mapping in {0} speichern",deleteMapping:"Mapping l\xF6schen",clearMapping:"Mapping leeren",cloneMapping:"Mapping duplizieren",swapMapping:"Quell- und Zielkonzepte tauschen",deleteTitle:"Mapping l\xF6schen",deleteText:"Dieses Mapping wirklich l\xF6schen?",deleteChangesText:"Anmerkung: Es gibt ungespeicherte \xC4nderungen in dem Mapping.",deleteConfirm:"Originales Mapping l\xF6schen",cancel:"@:general.cancel",removeConceptFromMapping:"Konzept aus Mapping entfernen",settingsButton:"Mapping-Editor Einstellungen",saved:"gespeichert",notSaved:"nicht gespeichert",invalidMissing:"{0} fehlt",invalidWhitelist:"{0} nicht erlaubt in {1}",invalid1to1:"Nur 1-zu-1-Mappings erlaubt in {0}.",warningNoRegistry:"In dieser Cocoda-Instanz gibt es keine Mapping-Datenbank, in die gespeichert werden kann.",warningUpdateRegistry:"Mapping wird nicht in {0} aktualisiert, sondern als neues Mapping in {1} gespeichert.",warningUpdateNotAllowed:"Mapping kann nicht aktualisiert werden und wird deshalb als neues Mapping gespeichert.",warningUpdateScheme:"Das aktualisierte Mapping wird mit anderem {0} gespeichert, ist das so gewollt? Falls nicht, kann das Mapping geklont werden (Button rechts vom L\xF6schen-Button)."},settingsTabs:["Account","Datenquellen","Oberfl\xE4che","Tastaturk\xFCrzel","Lokale Mappings"],settings:{title:"Einstellungen",language:"Sprache der Oberfl\xE4che",languageContribution:"Um zur \xDCbersetzung von Cocoda beizutragen, siehe diese <a href='https://gbv.github.io/cocoda/#translation' target='_blank'>Anweisungen in der Dokumentation</a> (Englisch).",preferredLanguages:"Bevorzugte Vokabularsprachen",preferredLanguagesAdd:"Sprache hinzuf\xFCgen",resetSizes:"Gr\xF6\xDFen zur\xFCcksetzen",creator:"Name",creatorUrl:"Homepage (optional)",creatorPlaceholder:"Bitte Namen eintippen...",creatorRewriteTitle:"Creator-Feld \xFCberschreiben",creatorRewriteText:"Durch den nachfolgenden Button wird der creator aller lokaler Mappings mit folgenden Informationen \xFCberschrieben:",creatorRewriteButton:"creator-Feld f\xFCr alle lokalen Mappings \xFCberschreiben",localDownload:"Lokale Mappings herunterladen",localDownloadJskos:"Lade alle {0} Mappings als JSKOS herunter",localDownloadCsv:"Lade alle {0} Mappings als CSV herunter",localUpload:"Lokale Mappings hochladen (JSKOS)",localUploadPlaceholder:"Datei ausw\xE4hlen...",localDeleteTitle:"Lokale Mappings l\xF6schen",localDeleteText:"Alle lokalen Mappings l\xF6schen",localDeleteSure:"Diese Aktion l\xF6scht alle lokalen Mappings (inkl. der k\xFCrzlich gel\xF6schten Mappings) und kann nicht r\xFCckg\xE4ngig gemacht werden! Fortfahren?",suggestions1:"F\xFCr Probleme oder Vorschl\xE4ge, bitte den",suggestions2:"GitHub Issue Tracker",suggestions3:" benutzen.",version:"Version",currentCommit:"Aktueller Commit",buildDate:"Build-Datum",impressum:"Impressum",creatorUri:"Identit\xE4t (als URI, wird beim Login automatisch gesetzt)",creatorUriInvalid:"Bitte eine valide URI eingeben.",mappingRegistry:"Mapping-Datenbank",mappingRegistries:"Mapping-Datenbanken",otherRegistries:"Andere Datenquellen",creatorInfo:"Die folgenden Angaben werden in allen bearbeiteten Mappings hinterlegt und k\xF6nnen beim Austausch von Mappings weitergegeben werden:",accountInfo:'Cocoda nutzt einen dedizierten <a href="{url}" target="_blank">Login-Server</a>, um Nutzer zu authentifizieren:',accountPage:"Account-Seite",logInButton:"Einloggen",logOutButton:"Ausloggen",loggedIn:"Du bist eingeloggt.",loggedOut:"Du bist nicht eingeloggt.",privacyPolicy:"Datenschutz",localMappingsInfo:"Lokale Mappings werden in dem aktuellen Browser gespeichert. Sie sind nicht f\xFCr andere Nutzer sichtbar, gehen jedoch verloren, wenn man den lokalen Speicher des Browsers leert."},conceptDetail:{showAllAncestors:"zeige alle \xFCbergeordneten Konzepte",showLessAncestors:"zeige weniger \xFCbergeordnete Konzepte",created:"Erstellung",modified:"\xC4nderung",issued:"Ver\xF6ffentlicht",altLabels:"Alternative Bezeichnungen",definition:"Definition",relevance:"Relevanz",relevanceVeryHigh:"sehr hoch",relevanceHigh:"hoch",relevanceMedium:"mittel",relevanceLow:"niedrig",relevanceGeneric:"generisch",info:"Info",labels:"Bezeichnungen",editorial:"Editorial",scope:"Scope",gnd:"GND",coliAnaIncomplete:"Diese DDC-Nummer konnte nicht vollst\xE4ndig analysiert werden. Entweder sie wurde nicht korrekt nach den aktuellen Regeln gebildet oder die Analyse ist noch unvollst\xE4ndig.",coliAnaInfo:'Mehr Details und Informationen im <a href="{url}" target="_blank">coli-ana Webinterface</a>.',searchLinks:"Suchlinks",clearConcept:"Konzept entfernen",previousConceptTooltip:"vorheriges Konzept",nextConceptTooltip:"n\xE4chstes Konzept"},schemeDetail:{noTopConcepts:"Keine Oberkonzepte",languages:"Sprachen",availableMappings:"Mappings",registry:"Quellen"},conceptList:{noItems:"keine Konzepte vorhanden",favoriteConcepts:"Konzept-Schnellauswahl",favoriteConceptsShort:"Schnellauswahl",topConcepts:"Oberkonzepte des Vokabulars in hierarchischer Ansicht",topConceptsShort:"Hierarchische Ansicht"},itemDetail:{pleaseSelect:"Bitte Vokabular oder Konzept ausw\xE4hlen.",combinedConcept:"zusammengesetztes Konzept",unknownConcept:"unbekanntes Konzept"},mappingBrowser:{title:"Mapping-Browser",edit:"bearbeiten in {0}",clone:"in den Mapping-Editor kopieren",saveAsMapping:"als Mapping in {0} speichern",delete:"l\xF6schen",showDetail:"Mapping-Details anzeigen",showMore:"@:conceptDetail.showMore",noItems:"keine Ergebnisse",from:"Von",to:"Zu",creator:"Erstellt von",chooseConcept:"Ein Konzept ausw\xE4hlen, um Mappings und Mapping-Vorschl\xE4ge zu sehen",settingsButton:"Mapping-Browser Einstellungen",creatorIsDifferent:"Dies ist dein Mapping, aber die darin gespeicherte Identit\xE4t entspricht nicht der ausgew\xE4hlten Identit\xE4t. Editiere und speichere es erneut, um die Identit\xE4t anzupassen.",concordance:"Konkordanz",concordances:"Konkordanzen",mappingSearch:"Suche",mappingNavigator:"Navigator",description:"Beschreibung",date:"Datum",download:"Download",showMappings:"Mappings anzeigen",total:"Gesamt",searchSourceScheme:"Quellvokabular",searchSourceNotation:"Quellnotation/-URI",searchTargetScheme:"Zielvokabular",searchTargetNotation:"Zielnotation/-URI",searchType:"@:general.type",searchAllTypes:"Alle Mapping-Typen",searchAllConcordances:"Alle Konkordanzen",searchClear:"Leeren",searchSubmit:"Suche",searchBidirectional:"Bidirektional",searchBidirectionalTooltip:"Wenn aktiviert werden Mappings in beide Richtungen gesucht.",searchShareLabel:"Link",searchShareTitle:"Einen Link zu dieser Suche teilen",searchShareInclude:"Einschlie\xDFlich ausgew\xE4hlter Vokabulare und Konzepte",searchShareCopy:"Link in die Zwischenablage kopieren",searchInsertSelfIntoCreator:"Meine eigenen Identit\xE4ten einf\xFCgen",searchForMappingsByCreator:"Suche Mappings dieses Accounts",searchExtend:"erweiterte Suche anzeigen",searchCollapse:"erweiterte Suche ausblenden",mappingConfirmedTooltip:"Best\xE4tigt",openInCocoda:"in Cocoda \xF6ffnen",lockScheme:"binde Suchvokabular an das ausgew\xE4hlte Vokabular",unlockScheme:"entbinde Suchvokabular von dem ausgew\xE4hlten Vokabular",registryHasErrored:"Beim Laden von Mappings aus diesem Register ist ein Fehler aufgetreten. Das angezeigte Ergebnis kann inakkurat sein."},mappingDetail:{title:"Mapping-Details",sourceScheme:"Quellvokabular",sourceConcept:"Quellkonzept | Quellkonzepte",targetScheme:"Zielvokabular",targetConcept:"Zielkonzept | Zielkonzepte",mappingType:"Mapping-Typ",creator:"@:mappingBrowser.creator",created:"@:conceptDetail.created",modified:"@:conceptDetail.modified",annotations:"Annotationen",note:"Notiz",identifier:"Identifier",partOf:"Teil der Konkordanz",catalogEnrichment:"Anreicherung im K10plus suchen"},minimizer:{minimize:"Komponente ausblenden",maximize:"Komponente einblenden"},alerts:{mappingDeleted:"Mapping wurde aus {0} gel\xF6scht.",mappingNotDeleted:"Mapping konnte nicht aus {0} gel\xF6scht werden.",mappingSaved:"Mapping wurde in {0} gespeichert.",mappingNotSaved:"Mapping konnte nicht in {0} gespeichert werden.",mappingRestored:"Mapping wurde in {0} wiederhergestellt.",mappingNotRestored:"Mapping konnte nicht in {0} wiederhergestellt werden.",annotationSaved:"Annotation wurde gespeichert.",annotationRemoved:"Annotation wurde entfernt.",annotationNotSaved:"Annotation konnte nicht gespeichert werden. Bitte Authentifizierung pr\xFCfen.",annotationNotRemoved:"Annotation konnte nicht gespeichert werden. Bitte Authentifizierung pr\xFCfen.",annotationError:"Ein Fehler bez\xFCglich Annotationen ist aufgetreten. Bitte sp\xE4ter noch einmal probieren.",newVersionText:"Es gibt eine neue Version von Cocoda.",newVersionLink:"Seite neu laden",loggedIn:"Du bist jetzt eingeloggt.",loggedInRegistryChanged:"Du bist nun authentifiziert, um Mappings in {0} zu speichern.",loggedInRegistryChangedUndoButton:"Mappings stattdessen lokal speichern.",loggedOut:"Du bist jetzt ausgeloggt.",nameError:"Fehler beim \xC4ndern des Namens.",versionMismatch:"Datenbank {registryLabel} ({registryUri}) ist nicht versionskompatibel mit diesem Release (Datenbank: {registryVersion}, unterst\xFCtzt: {jskosApi}). Bitte einen Administrator kontaktieren.",localMappingsFirstSaved:`Du hast soeben dein erstes Mapping in "Lokal" gespeichert. Bitte beachte, dass lokale Mappings in deinem Browser gespeichert werden, was bedeutet, dass sie verloren gehen, falls du den Browser wechselst oder die Daten des Browsers leerst. Es ist m\xF6glich, Mappings dauerhaft im "Konkordanz-Register" zu speichern, indem man sich einloggt und das Standard-Mapping-Register \xE4ndert. Bitte wende dich an das <a href='https://gbv.github.io/cocoda/dev/user-manual-de.html#benutzeraccounts' target='_blank'>Benutzerhandbuch</a> f\xFCr mehr Informationen.`,favoriteConceptsNonConcept:"Es k\xF6nnen nur Konzepte zur Favoriten-Liste hinzugef\xFCgt werden."},dataModal:{title:"JSKOS-Daten exportieren",exportClipboard:"in die Zwischenablage kopieren",localDownload:"Download",apiLinks:"API",apiUrl:"URL",concept:"keine Konzepte | 1 Konzept | {count} Konzepte",scheme:"keine Vokabulare | 1 Vokabular | {count} Vokabulare",mapping:"keine Mappings | 1 Mapping | {count} Mappings",annotation:"keine Annotationen | 1 Annotation | {count} Annotationen",concordance:"keine Konkordanzen | 1 Konkordanz | {count} Konkordanzen",resource:"keine Ressourcen | 1 Ressource | {count} Ressourcen",button:"Quelldaten"},registryInfo:{schemes:"Vokabulare",concepts:"Konzepte",mappings:"Mappings",annotations:"Annotationen",occurrences:"Katalogvorkommen",authenticated:"Authentifiziert",notAuthenticated:"Authentifizierung notwendig",canSaveMappings:"Diese Datenbank kann zum Speichern von Mappings verwendet werden."},annotationPopover:{addConfirmation:"Best\xE4tigen",removeConfirmation:"Best\xE4tigung entfernen"},languages:{en:"Englisch",de:"Deutsch"},cdkErrors:{BackendUnavailableError:"Der Server ist nicht erreichbar.",BackendError:"Der Server scheint Probleme zu haben.",MissingApiUrlError:"@:cdkErrors.CDKError",MethodNotImplementedError:"Der Server scheint diese Aktion nicht zu unterst\xFCtzten oder wurde nicht richtig konfiguriert.",NetworkError:"Es gibt Probleme mit der Netzwerkverbindung.",InvalidOrMissingParameterError:"Ein Parameter scheint fehlerhaft zu sein oder zu fehlen.",InvalidRequestError:"Die Anfrage scheint fehlerhaft zu sein."}};var Cr={en:Sr,de:$r};T.use(et);const Qe=new et({locale:"en",fallbackLocale:"en",silentFallbackWarn:!window.webpackHotUpdate,messages:Cr}),Mr="1.5.3",Rr="dev",Lr="65b88c67da663b9c8d29fb810ca9f287819469e9",xr="65b88c6",Ir="65b88c6 Update cocoda-sdk and gbv-login-client dependencies",Tr="2022-02-11T10:34:05Z",Dr="2022-02-11T10:32:55.000Z",Br=null,Ar="^1.0";var ne={version:Mr,gitBranch:Rr,gitCommit:Lr,gitCommitShort:xr,gitCommitMessage:Ir,buildDate:Tr,date:Dr,milestoneUrl:Br,jskosApi:Ar};const Fr={headers:{"Cache-Control":"no-cache"}};function Ye(e){return e.map(s=>({uri:s.uri,notation:s.notation,inScheme:[{uri:s.inScheme[0].uri}]}))}var Nr={async loadConfig({commit:e,dispatch:s},t){t||(t="./cocoda.json");let n,i;try{i=(await I.get(t,Fr)).data}catch{i=null}if(!i)try{i=(await I.get(t)).data}catch{i=null}if(c.isObject(i)||(_.error(`Error loading config from ${t}: Data is not an object.`),i={error:"malformedConfig"}),n=Object.assign({configFile:t},G,i),!n.overrideRegistries){n.registries=[].concat(i.registries||[],G.registries||[]);let l=[];for(let p of n.registries)l.push(p);n.registries=l}if(n.registries){n.terminologyProviders=[],n.mappingProviders=[],n.occurrenceProviders=[];for(let l of n.registries){let p=l.provider||"";p.endsWith("ConceptApi")?(l.url=l.baseUrl,l.voc=l.schemes,n.terminologyProviders.push(l)):p.endsWith("MappingsApi")?(l.url=l.mappings,n.mappingProviders.push(l)):p.endsWith("OccurrencesApi")&&(l.url=l.occurrences,n.occurrenceProviders.push(l))}}for(let l of n.registries)l.provider=="SearchSuggestion"&&(l.provider="LabelSearchSuggestion"),l.provider=="OccurrencesApi"&&!l.api&&l.occurrences&&(l.api=l.occurrences,delete l.occurrences),l.provider=="ReconciliationApi"&&!l.api&&l.reconcile&&(l.api=l.reconcile,delete l.reconcile);let r=n.registries.length;for(let l of n.registries)l.priority=r,r-=1;n.registries=n.registries.filter(l=>l.provider!=null),n.registries=c.uniqBy(n.registries,l=>l.uri),!n.registries.length&&!n.error&&(n.error="noRegistries");let a=[];for(let l of(G.shortcuts||[]).concat(i.shortcuts||[])){let p=a.find(g=>g.id===l.id);a=c.pullAllBy(a,[l],"id"),a.push(c.defaults(l,p||{}))}n.shortcuts=a,n.searchLinks=[].concat(G.searchLinks||[],i.searchLinks||[]),n.searchLinks.forEach(l=>{l.schemes||(l.schemes=(l.schemeUris||[]).map(p=>({uri:p})))}),n.buildInfo=ne,n.auth&&!n.auth.endsWith("/")&&(n.auth+="/");const o=(l,p)=>{const g=l.split(".").map(v=>parseInt(v)),f=p.slice(p.startsWith("^")?1:0).split(".").map(v=>parseInt(v));return p.startsWith("^")?!(g[0]!=f[0]||g[1]<f[1]):g[0]==f[0]&&g[1]==f[1]};W.setConfig(n),await Promise.all(n.registries.map(l=>l.init()));let d=[];for(let l of n.registries)if(!ne.jskosApi||!l._config||!l._config.version||o(l._config.version,ne.jskosApi)){if(d.find(p=>p.constructor.providerName=="LocalMappings")&&l.constructor.providerName=="LocalMappings"){_.error("There are multiple registries for LocalMappings configured. This is not supported. Please remove any additional registries for LocalMappings.");continue}d.push(l)}else{const p=Qe.t("alerts.versionMismatch",{registryLabel:l.prefLabel.en||l.prefLabel.de,registryUri:l.uri,registryVersion:l._config.version,jskosApi:ne.jskosApi});_.warn(p),e("alerts/add",{variant:"danger",text:p},{root:!0})}return n.registries=d,n.conceptLists=await s("loadConceptLists",n.conceptLists),n.autoRefresh=Object.assign(G.autoRefresh,n.autoRefresh||{}),e({type:"setConfig",config:n}),e({type:"setConfigLoaded"}),n},addSchemeToFavorites({commit:e,getters:s},t){!t||!t.uri||u.isContainedIn(t,s.favoriteSchemes.map(n=>{}))||e({type:"settings/set",prop:"favoriteSchemes",value:s.favoriteSchemes.concat([t.uri])})},removeSchemeFromFavorites({commit:e,getters:s},t){e({type:"settings/set",prop:"favoriteSchemes",value:s.favoriteSchemes.filter(n=>!u.compare({uri:n},t))})},addConceptToFavorites({commit:e,getters:s},t){if(!(!t||!t.uri)){if(!u.isConcept(t)){const n=Qe.t("alerts.favoriteConceptsNonConcept");e("alerts/add",{variant:"danger",text:n},{root:!0});return}u.isContainedIn(t,s.favoriteConcepts)||e({type:"settings/set",prop:"favoriteConcepts",value:Ye(s.favoriteConcepts.concat([t]))})}},removeConceptFromFavorites({commit:e,getters:s},t){e({type:"settings/set",prop:"favoriteConcepts",value:Ye(s.favoriteConcepts.filter(n=>!u.compare(t,n)))})},async loadConceptLists({state:e},s){let t=[];for(let n of s||e.config&&e.config.conceptLists||[])if(c.isString(n)&&(n={url:n}),n.url){try{let i=n.url;n=(await I.get(i)).data,n.url=i}catch{_.warn("Could not load list from URL:",n)}n&&t.push(n)}else t.push(n);for(let n of t){if(c.isString(n.concepts)&&(n.conceptsUrl=n.concepts),n.conceptsUrl){let r=n.conceptsUrl;try{let a=(await I.get(r)).data;n.concepts=a}catch{_.warn("Could not load concepts for list with URL:",r),n.concepts=[]}n.conceptsUrl=r}else n.concepts=n.concepts||[];let i=(n.schemes||[])[0];if(i)for(let r of n.concepts)(!r.inScheme||r.inScheme.length==0)&&(r.inScheme=[i])}return t},async getSearchLinks({state:e},n){var i=n,{scheme:s}=i,t=k(i,["scheme"]);let r=[];for(let a of(e.config.searchLinks||[]).filter(o=>o.schemes.length===0||u.isContainedIn(s,o.schemes))){let o=a.url;c.forOwn(t,(d,l)=>{o=c.replace(o,new RegExp(`{${l}}`,"g"),d)}),r.push({url:o,label:u.prefLabel(a,{language:t.locale})})}if(u.compare(s,{uri:"http://bartoc.org/en/node/241"})){let a="ddc",o=t.notation,d;const l=/(.+):(.+)/.exec(o);l?(o=l[1],d="%3b1%3b"+l[2],a="int"):d="";const p=/(.+)\.(.+)-.+\.(.+)/.exec(o);p&&(o=`${p[1]}.${p[2]}-.${p[3]}`),o+=d,r.push({url:`http://dewey.org/webdewey/index_11.html?recordId=${a}%3a${o}`,label:u.prefLabel({prefLabel:{en:"WebDewey English (requires login)",de:"WebDewey Englisch (ben\xF6tigt Login)"}},{language:t.locale})}),r.push({url:`https://deweyde.pansoft.de/webdewey/index_11.html?recordId=${a}%3a${o}`,label:u.prefLabel({prefLabel:{en:"WebDewey German (requires login)",de:"WebDewey Deutsch (ben\xF6tigt Login)"}},{language:t.locale})})}return r=r.filter((a,o,d)=>o===d.findIndex(l=>l.url==a.url)),r}};T.use(tt);const jr={loading:0,config:{},configLoaded:!1,hoveredConcept:null,draggedConcept:null,hoveredMapping:null,mousePosition:{x:0,y:0}},gt={favoriteSchemes:e=>e.settings.settings.favoriteSchemes||e.config.favoriteSchemes,favoriteConcepts:e=>(e.settings.settings.favoriteConcepts||[]).map(s=>c.pick(s,["uri","notation","inScheme"])),authAvailable:e=>e.config.registries.find(s=>s.auth)!=null,getCurrentRegistry:e=>{let s=e.config.registries.find(t=>u.compareFast(t,{uri:e.settings.settings.mappingRegistry}));return s||(s=e.config.registries.find(t=>t.isAuthorizedFor({type:"mappings",action:"create",user:e.auth.user}))),s||(s=e.config.registries.find(t=>c.get(t,"has.mappings.create"))),s},creator:e=>{let s={},t=e.settings.settings.creator,n=e.settings.settings.creatorUri;return u.isValidUri(n)||(n=null),n&&(s.uri=n),t&&(s.prefLabel={en:t}),s},mappedStatus:e=>(s,t)=>!!c.get(s,"__MAPPED__",[]).find(n=>n.exist.length&&u.compareFast(n.registry,gt.getCurrentRegistry(e))&&u.compare(n.scheme,e.selected.scheme[!t])),languages:e=>{let s=["en","de"];return e.configLoaded&&(s=c.uniq(e.settings.settings.preferredLanguages.concat(e.config.languages||s))),s}},Er={setConfig(e,{config:s,option:t,value:n}){s?e.config=s:e.config[t]=n},setConfigLoaded(e){e.configLoaded=!0},setHoveredConcept(e,{concept:s}){e.hoveredConcept=s&&{uri:s.uri}},setDraggedConcept(e,{concept:s}){e.draggedConcept=s&&{uri:s.uri}},setHoveredMapping(e,{mapping:s}){e.hoveredMapping=s},setMousePosition(e,{x:s,y:t}){e.mousePosition={x:s,y:t}},setLoading(e,{value:s}){s?e.loading+=1:e.loading-=1}},mt=new tt.Store({modules:{selected:Vi,mapping:qi,alerts:Qi,auth:tr,settings:pr},plugins:Pi,state:jr,getters:gt,mutations:Er,actions:Nr});document.onmousemove=c.throttle(e=>{mt.commit({type:"setMousePosition",x:e.pageX,y:e.pageY})},200);const me={uri:"http://id.nlm.nih.gov/mesh",identifier:["http://bartoc.org/en/node/391","http://www.wikidata.org/entity/Q199897"],notation:["MeSH"],prefLabel:{en:"Medical Subject Headings"},languages:["en"],concepts:[null],topConcepts:[]},ce="https://id.nlm.nih.gov/mesh/";function pe({where:e}){return`
  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
  PREFIX meshv: <http://id.nlm.nih.gov/mesh/vocab#>

  SELECT ?d ?name ?dateCreated ?dateRevised ?identifier (GROUP_CONCAT(?broaderDescriptor;SEPARATOR=" ") as ?broader)
  FROM <http://id.nlm.nih.gov/mesh>
  WHERE {
    ?d a meshv:Descriptor .
    ?d rdfs:label ?name .
    OPTIONAL { ?d meshv:dateCreated ?dateCreated } .
    OPTIONAL { ?d meshv:dateRevised ?dateRevised } .
    ?d meshv:identifier ?identifier .
    OPTIONAL { ?d meshv:broaderDescriptor ?broaderDescriptor } .
    ${e}
  }
  GROUP BY ?d ?name ?dateCreated ?dateRevised ?identifier
  ORDER BY ?d
  `}function de(e){return e.data.results.bindings.map(s=>{const t={inScheme:[me],uri:s.d.value,notation:[s.identifier.value],prefLabel:{[s.name["xml:lang"]]:s.name.value},broader:(s.broader.value||"").split(" ").filter(n=>n.trim()!=="").map(n=>({uri:n}))};return s.dateCreated&&s.dateCreated.value&&(t.created=s.dateCreated.value),s.dateRevised&&s.dateRevised.value&&(t.modified=s.dateRevised.value),t})}class we extends kt{_setup(){this.has.schemes=!0,this.has.top=!1,this.has.data=!0,this.has.concepts=!0,this.has.narrower=!0,this.has.ancestors=!1,this.has.suggest=!0,this.has.search=!0,this._defaultParams={format:"JSON",limit:100,offset:0,inference:!0},this._defaultHeaders={Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8"}}async getSchemes(){return[me]}async getTop(){return[]}async getConcepts(n){var i=n,{concepts:s}=i,t=k(i,["concepts"]);if(!s)throw new ee({parameter:"concepts"});Array.isArray(s)||(s=[s]);const r=pe({where:`VALUES ?d { ${s.map(o=>`<${o.uri}>`).join(" ")} } .`}),a=await I({method:"get",url:`${ce}sparql`,params:O($($({},this._defaultParams),t.params||{}),{query:r}),headers:this._defaultHeaders});try{return de(a)}catch(o){return console.error(o),[]}}async getNarrower(n){var i=n,{concept:s}=i,t=k(i,["concept"]);if(!s||!s.uri)throw new ee({parameter:"concept"});const r=pe({where:`?d meshv:broaderDescriptor <${s.uri}> .`}),a=await I({method:"get",url:`${ce}sparql`,params:O($($({},this._defaultParams),t.params||{}),{query:r}),headers:this._defaultHeaders});try{return de(a)}catch(o){return console.error(o),[]}}async suggest(s){const t=s.search,n=await this._search(s);return[t,n.map(i=>u.prefLabel(i,{fallbackToUri:!1})),[],n.map(i=>i.uri)]}async search(s){return this._search(s)}async _search(a){var o=a,{scheme:s,search:t,limit:n,offset:i}=o,r=k(o,["scheme","search","limit","offset"]);if(!t)throw new ee({parameter:"search"});if(!s||!u.compare(s,me))throw new ee({parameter:"scheme"});n=n||this._jskos.suggestResultLimit||this._defaultParams.limit,i=i||this._defaultParams.offset,t=t.replace(/"/g,'\\"');const d=pe({where:`FILTER(REGEX(?name,"${t}","i"))`}),l=await I({method:"get",url:`${ce}sparql`,params:O($($({},this._defaultParams),r.params||{}),{query:d,limit:n,offset:i}),headers:this._defaultHeaders});try{return de(l)}catch(p){return console.error(p),[]}}}we.providerName="MeshApi";we.providerType="http://bartoc.org/api-type/mesh";function zr(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Or={data(){return{defaults:{delay:{short:{show:250,hide:0},medium:{show:500,hide:0},long:{show:1e3,hide:0}},licenseBadges:{"http://creativecommons.org/publicdomain/zero/1.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/cc-zero.svg","http://creativecommons.org/licenses/by/3.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by.svg","http://creativecommons.org/licenses/by-nc-nd/3.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-nc-nd.svg","http://creativecommons.org/licenses/by-nc-nd/4.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-nc-nd.svg","http://creativecommons.org/licenses/by-nc-sa/4.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-nc-sa.svg","http://creativecommons.org/licenses/by-sa/4.0/":"https://mirrors.creativecommons.org/presskit/buttons/80x15/svg/by-sa.svg","http://opendatacommons.org/licenses/odbl/1.0/":"https://img.shields.io/badge/License-ODbL-lightgrey.svg","http://www.wtfpl.net/":"https://img.shields.io/badge/License-WTFPL-lightgrey.svg"}}}},methods:{getProvider(e){return e=m(e)||e,c.get(e,"_registry")||c.get(e,"inScheme[0]._registry")},toggleMinimize(){for(let e of this.$children)e.toggleMinimize()},refresh(e){this.$parent&&this.$parent.refresh(e)},getRouterUrl(e,s,t=!1){e=m(e)||e;let n=c.cloneDeep(this.$route.query),i=s?"from":"to";if(!e)delete n[i],delete n[i+"Scheme"];else if(u.isScheme(e)||!e.inScheme)delete n[i],n[i+"Scheme"]=e.uri;else{let a=m(c.get(e,"inScheme[0]"));!a&&console.assert("getRouterUrl",e,a),t||this.$store.state.selected.scheme[s]==null||this.$jskos.compare(this.$store.state.selected.scheme[s],a)||(this.$jskos.compare(this.$store.state.selected.scheme[!s],a)||this.$store.state.selected.scheme[!s]==null)&&(i=i=="from"?"to":"from"),n[i+"Scheme"]=a.uri,n[i]=e.uri}let r="?";return c.forOwn(n,(a,o)=>{r+=`${o}=${encodeURIComponent(a)}&`}),r.substring(0,r.length-1)},async setSelected({concept:e,scheme:s,isLeft:t,noQueryRefresh:n=!1,noLoading:i=!1}={}){let r=this.generateID();if(e=e&&L(e,{returnIfExists:!0,type:"concept",scheme:s}),s=c.get(e,"inScheme[0]")||s,s=s&&L(s,{returnIfExists:!0,type:"scheme"}),u.compare(e,this.$store.state.selected.concept[t])&&u.compare(s,this.$store.state.selected.scheme[t]))return!0;this.$store.commit({type:"selected/setLoadingId",isLeft:t,loadingId:r}),i||(this.loadingGlobal=!0);const a=()=>{!i&&r==this.$store.state.selected.loadingId[t]&&(this.loadingGlobal=!1)};if(s&&!e)return this.$store.commit({type:"selected/set",kind:"both",isLeft:t,scheme:s,concept:null,noQueryRefresh:n}),De(s),Be(s),a(),!0;if(e){let o="concept";return s?(u.compare(s,this.$store.state.selected.scheme[t])||(o="both",Be(s)),await q([e]),Fe(e).then(d=>{q(d)}),ts(e).then(()=>{e.ancestors.filter(Boolean).forEach(d=>Fe(d))}),s&&De(s),e.broader&&!e.__BROADERLOADED__&&q(e.broader.filter(Boolean),{scheme:s}).then(()=>{b(e,"__BROADERLOADED__",!0)}),a(),r==this.$store.state.selected.loadingId[t]?(this.$store.commit({type:"selected/set",kind:o,isLeft:t,concept:e,scheme:s,value:e,noQueryRefresh:n}),!0):!1):(this.$log.error("setSelected: could not find scheme for concept in store."),a(),!1)}else return t!=null?(this.$store.commit({type:"selected/clear",kind:"scheme",isLeft:t,noQueryRefresh:n}),a(),!0):(this.$log.error("setSelected: called with no valid concept or scheme."),a(),!1)},addToMapping(e){e.type="mapping/add",e.cardinality=this.$store.state.settings.settings.components.MappingEditor.only1to1mappings?"1-to-1":"1-to-n";const s=c.get(this.$store.getters.getCurrentRegistry,"config.mappings.cardinality");s=="1-to-1"&&(e.cardinality=s),this.$store.commit(e)},alert(e,s,t,n,i){this.$store.commit({type:"alerts/add",text:e,countdown:s,variant:t,buttonText:n,buttonHandler:i})},copyToClipboard(e){let s;c.isString(e)?s=document.getElementById(e):s=e;try{window.getSelection().removeAllRanges(),(i=>{var r,a;window.getSelection&&document.createRange?(r=window.getSelection(),r.toString()==""&&(a=document.createRange(),a.selectNodeContents(i),r.removeAllRanges(),r.addRange(a))):document.selection&&(r=document.selection.createRange(),r.text==""&&(a=document.body.createTextRange(),a.moveToElementText(i),a.select()))})(s),document.execCommand("copy")||this.$log.warn("Copy to clipboard failed."),window.getSelection().removeAllRanges()}catch{this.$log.warn("Copy to clipboard failed.")}},open(e,s,t){if(e=m(e)||e,!e)return;let n=Object.assign({},e.__ISOPEN__);n[s]=t,b(e,"__ISOPEN__",n)},isMouseOver(e){e||(e=this.$el);let{x:s,y:t}=this.$store.state.mousePosition,n=e.getBoundingClientRect();return s>=n.left&&s<=n.right&&t>=n.top&&t<=n.bottom},downloadFile(e,s){var t=new Blob([s],{type:"text/plain;charset=utf-8"});St.saveAs(t,e)},generateID(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},getNotation(e,s,t=!1){e=m(e,{relatedItems:!0})||e;let n=u.notation(e,s);if(t){let i="";if(u.compare({uri:"http://dewey.info/scheme/edition/e23/",identifier:["http://bartoc.org/en/node/241","http://bartoc.org/en/node/18497","http://www.wikidata.org/entity/Q67011877","http://id.loc.gov/vocabulary/classSchemes/sdnb","http://uri.gbv.de/terminology/sdnb"]},c.get(e,"inScheme[0]"))&&(n&&(n=n.replace(/^(T[1-9][A-Z]?--)(.*)-(.*)$/,"$1$2-$1$3")),!isNaN(parseInt(n))))for(;n.length+i.length<3;)i+="0";i.length&&(n+=`<span class='notation-fill text-mediumLightGrey'>${i}</span>`)}return n},getPrefLabel(e){e=m(e)||e;const s=this.getNotation(e,null,!0);let t=this.$jskos.prefLabel(e,{fallbackToUri:s==null});const n=new RegExp("^"+zr(s)+"\\s+(.*)$"),i=t.match(n);return i&&i[1]!=null?i[1]:t},hash(e){for(var s=2166136261,t=s,n=0;n<e.length;++n)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return("0000000"+(t>>>0).toString(16)).substr(-8)},getErrorMessage(e){let s=`cdkErrors.${e.name}`;this.$te(s)||(s="cdkErrors.CDKError");let t=`${this.$t(s)}`;return e.message&&(t+=` (${e.message})`),t},checkInView(e,s,t=!0){if(!e||!s)return!1;let n=e.scrollTop,i=n+e.clientHeight,r=s.offsetTop,a=r+s.clientHeight,o=r>=n&&a<=i,d=t&&(r<n&&a>n||a>i&&r<i);return o||d}}};function Kr(e){Object.keys(Le).filter(t=>t.endsWith("Provider")).forEach(t=>{W.addProvider(Le[t])}),W.addProvider(we),e.use($t),e.use(Ct),T.prototype.$jskos=u,u.compareFast=(t,n)=>!t&&!n?!0:!t||!n?!1:t.uri===n.uri,T.prototype.$log=_;const s="getters.languages";u.languagePreference.store=mt,u.languagePreference.path=s,e.component("Tabs",Mt),e.component("Tab",Rt),h.add(Lt),h.add(xt),h.add(It),h.add(Tt),h.add(Dt),h.add(Bt),h.add(At),h.add(Ft),h.add(Nt),h.add(jt),h.add(Et),h.add(zt),h.add(Ot),h.add(Pt),h.add(Ut),h.add(Wt),h.add(Vt),h.add(Ht),h.add(Kt),h.add(Gt),h.add(qt),h.add(Jt),h.add(Zt),h.add(Qt),h.add(Yt),h.add(Xt),h.add(en),h.add(tn),h.add(nn),h.add(sn),h.add(rn),h.add(an),h.add(on),h.add(ln),h.add(cn),h.add(pn),h.add(dn),h.add(un),h.add(hn),h.add(gn),h.add(mn),h.add(fn),h.add(vn),h.add(bn),h.add(yn),h.add(wn),h.add(_n),h.add(kn),h.add(Sn),h.add($n),h.add(Cn),h.add(Mn),h.add(Rn),h.add(Ln),h.add(xn),h.add(In),h.add(Tn),h.add(Dn),h.add(Bn),h.add(An),h.add(Fn),h.add(Nn),e.component("FontAwesomeIcon",jn),e.mixin(Or)}export{ye as A,Fs as C,dt as D,Y as I,lt as L,ni as M,oe as R,Vr as T,z as a,Fe as b,x as c,be as d,ge as e,ct as f,m as g,pt as h,st as i,le as j,ve as k,q as l,b as m,rt as n,Q as o,De as p,Hr as q,Ii as r,L as s,Wr as t,zi as u,Kr as v,mt as w,K as x,Qe as y};

import{n as $,o as O,d as Oe,_ as l,I as Q,C as se,M as Ae,R as Ne,a as ye,b as oe,c as j,g,l as Y,L as le,e as je,f as Re,v as Pe,h as He,i as re,m as fe,j as ce,D as xe,k as We,p as we,s as Z,A as ke,q as Se,r as Ge,t as Ke,u as Ue,w as _e,x as qe,y as Ve,T as Ye,z as Qe,B as Xe,E as Je,F as Ze,G as et,V as tt,H as at,J as ot,K as it}from"./main.150b8571.js";const rt={name:"MappingTypeSelection",props:{mapping:{type:Object,default:null}},data(){return{hovered:!1,mappingTypes:this.$jskos.mappingTypes,mappingTypeHovered:null}},computed:{mappingTypeSelected(){let o=this.mapping;return this.$jskos.mappingTypeByType(o?o.type:null)}},methods:{choose(o){this.$store.commit({type:"mapping/setType",uri:o.uri})},definition(o){let e=this.$jskos.definition(o);return e.length?": "+e.join(", "):""}}};var nt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mappingTypes",on:{mouseover:function(a){e.hovered=!0},mouseout:function(a){e.hovered=!1}}},e._l(e.mappingTypes,function(a){return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:{title:e.$jskos.prefLabel(a)+e.definition(a),delay:e.defaults.delay.medium},expression:"{ title: $jskos.prefLabel(mappingType) + definition(mappingType), delay: defaults.delay.medium }",modifiers:{hover:!0,right:!0}}],key:a.uri,staticClass:"mappingType",class:{mappingTypeSelected:e.hovered&&a&&e.mappingTypeSelected&&a.uri==e.mappingTypeSelected.uri,"fontWeight-heavy":a&&e.mappingTypeSelected&&a.uri==e.mappingTypeSelected.uri,mappingTypeHovered:a&&e.mappingTypeHovered&&a.uri==e.mappingTypeHovered.uri},style:`display: ${a&&e.mappingTypeSelected&&a.uri==e.mappingTypeSelected.uri||e.hovered?"inline-block":"none"};`,on:{click:function(i){return e.choose(a)}}},[e._v(" "+e._s(e.$jskos.notation(a))+" ")])}),0)},st=[],lt=$(rt,nt,st,!1,null,"b6c743fc",null,null),ct=lt.exports;const dt={name:"ConcordanceSelection",mixins:[O],props:{mapping:{type:Object,default:null},registry:{type:Object,default:null}},computed:{availableTargetConcordances(){return this.concordances.filter(o=>this.canAddMappingToConcordance({registry:this.registry,mapping:this.mapping,concordance:o,user:this.user,isExistingMapping:!!this.mapping._registry}))},concordanceOptions(){let o=[{value:null,text:this.$t("mappingDetail.partOfNone")}];for(let e of this.availableTargetConcordances){let t=this.displayNameForConcordance(e);o.push({value:e.uri,text:t})}return o}},methods:{displayNameForConcordance:Oe,async changeConcordance(o){const e=this.availableTargetConcordances.find(t=>this.$jskos.compare(t,{uri:o}));this.$emit("change",e)}}};var pt=function(){var e=this,t=e._self._c;return t("div",[e.canRemoveMappingFromConcordance({mapping:e.mapping,user:e.user})||e.availableTargetConcordances.length>0?t("b-form-select",{attrs:{size:"sm",options:e.concordanceOptions,value:e.mapping.partOf&&e.mapping.partOf[0]&&e.mapping.partOf[0].uri||null},on:{change:e.changeConcordance}}):t("span",[e._v(" "+e._s(e.mapping.partOf&&e.mapping.partOf[0]?e.displayNameForConcordance(e.mapping.partOf[0]):e.$t("mappingDetail.partOfNone"))+" ")])],1)},ft=[],ht=$(dt,pt,ft,!1,null,null,null,null),mt=ht.exports,he={data(){return{hotkeys:[]}},methods:{shortcutHandler(){},enableShortcuts(){let o=this.$options.name,e=0;for(let t of this.config.shortcuts||[])t.component===o&&(this.addHotkey(t.keys,()=>{this.shortcutHandler(t)}),e+=1);e&&document.addEventListener("keydown",this.hotkeyHandler)},hotkeyHandler(o){let e=l.pick(o,["key","keyCode","metaKey","ctrlKey","altKey","shiftKey"]);if(l.get(o,"srcElement.tagName")=="INPUT"){let i=[{key:"a",ctrlKey:!0,metaKey:!1,altKey:!1,shiftKey:!1},{key:"a",ctrlKey:!1,metaKey:!0,altKey:!1,shiftKey:!1},{key:"\xB5",ctrlKey:!1,metaKey:!1,altKey:!0,shiftKey:!1}],r=!1;for(let c of i){const f=c.key?"keyCode":"key";if(l.isEqual(l.omit(c,[f]),l.omit(e,[f]))){r=!0;break}}if(r)return}let t=!0;if(document.getElementsByClassName("modal show").length==0)for(let i of this.hotkeys){const r=i.shortcut.key?"keyCode":"key";l.isEqual(l.omit(e,[r]),l.omit(i.shortcut,[r]))&&(t=i.handler()&&t)}t||(o.stopPropagation(),o.preventDefault(),o.returnValue=!1,o.cancelBubble=!0)},addHotkey(o,e){o=o.split(",");for(let t of o){let a=t.split("+"),i=null,r=null,c=!1,f=!1,m=!1,h=!1;for(let y of a)y=="ctrl"?f=!0:y=="alt"||y=="option"?m=!0:y=="meta"||y=="command"?c=!0:y=="shift"?h=!0:y.startsWith("keyCode:")?r=parseInt(y.replace("keyCode:","")):i=y;this.hotkeys.push({handler:e,shortcut:{key:i,keyCode:r,metaKey:c,ctrlKey:f,altKey:m,shiftKey:h}})}}}};const ut={name:"MappingEditor",components:{ItemName:Q,MappingTypeSelection:ct,ComponentSettings:se,MappingDetail:Ae,RegistryInfo:Ne,ConcordanceSelection:mt},mixins:[ye,O,oe,he,j],computed:{mapping(){return this.$store.state.mapping.mapping},original(){return this.$store.state.mapping.original},canSaveCurrentMapping(){return this.mappingStatus.invalid?!1:this.$store.getters["mapping/canUpdate"]?this.hasChangedFromOriginal:this.$store.getters["mapping/canCreate"]},canDeleteCurrentMapping(){return this.$store.getters["mapping/canDelete"]},canClearCurrentMapping(){return this.mapping.fromScheme||this.mapping.toScheme},canExportCurrentMapping(){return this.mapping.fromScheme&&this.mapping.toScheme},canSwapCurrentMapping(){return this.$jskos.conceptsOfMapping(this.mapping,"to").length<=1&&this.$jskos.conceptsOfMapping(this.mapping).length>0&&(!this.mapping.partOf||this.mapping.partOf.length===0)},canCloneCurrentMapping(){return this.original.uri!=null},mappingStatus(){const o=this.currentRegistry;if(!o)return{message:this.$t("mappingEditor.warningNoRegistry"),invalid:!1,warning:!0};if(this.schemeRight&&!this.mapping.fromScheme&&this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.schemeRight}),!o.isAuthorizedFor({type:"mappings",action:"create",user:this.user}))return{message:this.$t("registryInfo.notAuthenticated")+` (${this.$jskos.prefLabel(o)})`,invalid:!0};for(let t of["fromScheme","toScheme"])if(!this.mapping[t])return{message:this.$t("mappingEditor.invalidMissing",[t]),invalid:!0};if(this.$jskos.conceptsOfMapping(this.mapping,"from").length===0)return{message:this.$t("mappingEditor.invalidMissing",["from"]),invalid:!0};for(let t of["fromScheme","toScheme"]){const a=l.get(o,`config.mappings.${t}Whitelist`);if(a&&!a.find(i=>this.$jskos.compare(i,this.mapping[t])))return{message:this.$t("mappingEditor.invalidWhitelist",[`${t} ${this.$jskos.prefLabel(this.mapping[t],{fallbackToUri:!1})||""}`,this.$jskos.prefLabel(o)]),invalid:!0}}if(l.get(o,"config.mappings.cardinality")=="1-to-1"&&this.$jskos.conceptsOfMapping(this.mapping,"to").length>1)return{message:this.$t("mappingEditor.invalid1to1",[this.$jskos.prefLabel(o)]),invalid:!0};if(this.original.uri&&!this.$jskos.compareFast(o,this.original.registry))return{message:this.$t("mappingEditor.warningUpdateRegistry",[this.$jskos.prefLabel(this.original.registry),this.$jskos.prefLabel(o)]),warning:!0};if(this.original.uri&&!this.$store.getters["mapping/canUpdate"])return{message:this.$t("mappingEditor.warningUpdateNotAllowed"),warning:!0};for(let t of["fromScheme","toScheme"])if(this.original.uri&&!this.$jskos.compare(this.mapping[t],this.original.mapping[t])){const a=!!l.get(this.original.mapping,"partOf[0]");return{message:this.$t("mappingEditor.warningUpdateScheme"+(a?"Concordance":""),[t]),warning:!0,invalid:a}}return this.$store.getters["mapping/hasConcordanceChangedFromOriginal"]&&!l.get(this.mapping,"partOf[0]")&&!(this.mapping.creator||[]).find(t=>this.$jskos.compare({uri:t.uri},{identifier:this.userUris}))?{message:this.$t("mappingEditor.warningRemoveFromConcordanceWhenNotCreator"),warning:!0}:{message:null,invalid:!1,warning:!1}},mappingEncoded(){return encodeURIComponent(JSON.stringify(this.prepareMapping()))},hasChangedFromOriginal(){return this.$store.getters["mapping/hasChangedFromOriginal"]},schemeRight(){return this.selected.scheme[!1]},currentGuidelines(){return(this.config.guidelines||[]).find(o=>this.$jskos.compare(o.fromScheme,this.selected.scheme[!0])&&this.$jskos.compare(o.toScheme,this.selected.scheme[!1]))}},watch:{mappingEncoded(){let o=l.get(this.$el.parentElement.getElementsByClassName("minimizer"),"[0].__vue__");o&&o.toggleMinimize(!1),this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},schemeRight(){this.$store.commit({type:"mapping/setScheme",isLeft:!1,scheme:this.selected.scheme[!1]})},creator(){this.setCreator()},"original.uri"(){this.setCreator()},mapping(){this.setCreator()}},mounted(){this.enableShortcuts(),this.setCreator()},methods:{shortcutHandler({action:o,isLeft:e}){switch(o){case"saveMapping":this.saveCurrentMapping();break;case"clearMapping":this.clearMapping();break;case"addConcept":this.addToMappingInternal(e);break}},async saveCurrentMapping(){if(!this.canSaveCurrentMapping)return!1;const o=this.$store.getters["mapping/canUpdate"];if(o&&!this.$store.getters["mapping/hasMappingChangedFromOriginal"]&&this.$store.getters["mapping/hasConcordanceChangedFromOriginal"]){await this.addMappingToConcordance({mapping:this.mapping,concordance:l.get(this.mapping,"partOf[0]")});return}this.creator?this.setCreator():this.removeCreator(),o?this.mapping.uri||this.$store.commit({type:"mapping/setIdentifier",uri:this.original.uri}):this.$store.commit({type:"mapping/setIdentifier",uri:null});const e=await this[o?"putMapping":"postMapping"]({registry:this.currentRegistry,mapping:this.mapping,_before:()=>{this.loadingGlobal=!0},_after:()=>{this.loadingGlobal=!1}});this.$store.commit({type:"mapping/set",original:e}),this.componentSettings.clearOnSave?this.clearMapping():this.$store.commit({type:"mapping/setIdentifier",uri:e.uri})},setCreator(){if(!this.creator||!this.userUris||this.userUris.length===0)return;const o=this.$store.getters["mapping/canUpdate"],e=(this.mapping.creator||[]).findIndex(t=>this.$jskos.compare({uri:t.uri},{identifier:this.userUris}));if(!(o&&e===-1))if(e===-1){let t=(this.mapping.contributor||[]).concat((this.mapping.creator||[]).filter(a=>!(this.creator.uri&&a.uri&&this.creator.uri==a.uri)&&!(this.creatorName&&this.$jskos.prefLabel(a,{fallbackToUri:!1})&&this.creatorName==this.$jskos.prefLabel(a,{fallbackToUri:!1}))));this.$store.commit({type:"mapping/setCreator",creator:[this.creator]}),this.$store.commit({type:"mapping/setContributor",contributor:t})}else{if(l.isEqual(this.creator,this.mapping.creator[e]))return;const t=this.mapping.creator.slice();t[e]=this.creator,this.$store.commit({type:"mapping/setCreator",creator:t})}},removeCreator(){let o=(this.mapping.contributor||[]).concat(this.mapping.creator||[]);this.$store.commit({type:"mapping/setCreator",creator:null}),this.$store.commit({type:"mapping/setContributor",contributor:o})},deleteCurrentMapping(){return this.canDeleteCurrentMapping?(this.$refs.deleteModal.show(),!0):!1},async deleteOriginalMapping(o=!1){return await this.deleteMapping({mapping:this.original.mapping,_before:()=>{this.loadingGlobal=!0},_after:()=>{this.loadingGlobal=!1}}),o&&this.clearMapping(),!0},clearMapping(){return this.canClearCurrentMapping?(this.$store.commit({type:"mapping/empty"}),!0):!1},labelForScheme(o){return this.$jskos.notation(g(o),"scheme")},isAddButtonEnabled(o){return this.$store.getters["mapping/canAdd"](this.selected.concept[o],this.selected.scheme[o],o)},isDeleteAllButtonEnabled(o){return this.$store.getters["mapping/getConcepts"](o).length>0},addButtonDisabledReason(o){let e=o?this.selected.concept[!0]:this.selected.concept[!1];return this.$store.getters["mapping/checkScheme"](o?this.selected.scheme[!0]:this.selected.scheme[!1],o)?e==null?"Please select a concept.":this.$store.getters["mapping/added"](e,o)?"Selected concept is already in mapping.":"Other reason.":"Scheme does not match."},addToMappingInternal(o){if(!this.isAddButtonEnabled(o))return;let e=o?this.selected.concept[!0]:this.selected.concept[!1];this.addToMapping({concept:e,scheme:this.selected.scheme[o],isLeft:o})},deleteAll(o){this.$store.commit({type:"mapping/removeAll",isLeft:o})},droppedConcept(o,e){this.$jskos.isConcept(o)&&(this.addToMapping({concept:o,scheme:o.inScheme&&o.inScheme[0]||this.selected.scheme[e],isLeft:e}),Y([o]))},swapMapping(){!this.canSwapCurrentMapping||this.$store.commit({type:"mapping/switch"})},cloneMapping(){let o=this.$jskos.copyDeep(this.mapping);delete o.uri,delete o.partOf,this.$store.commit({type:"mapping/set",original:null}),this.$store.commit({type:"mapping/set",mapping:o})},setConcordance(o){this.$store.commit({type:"mapping/setConcordance",concordance:o})}}};var gt=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"mappingEditor"}},[t("component-settings",{attrs:{tooltip:e.$t("mappingEditor.settingsButton")}}),e.canSaveCurrentMapping||e.canExportCurrentMapping&&!e.hasChangedFromOriginal?t("div",{class:{"mappingEditor-mappingNotSaved":e.canSaveCurrentMapping,"mappingEditor-mappingSaved":e.canExportCurrentMapping&&!e.hasChangedFromOriginal,"fontSize-small":!0,"fontWeight-heavy":!0}},[t("registry-info",{attrs:{registry:e.$store.getters.getCurrentRegistry,"show-details":!1,"show-capabilities":!1,"show-editable":!1,inline:!0}}),e._v(": "+e._s(e.$t(e.canSaveCurrentMapping?"mappingEditor.notSaved":"mappingEditor.saved"))+" ")],1):e._e(),t("div",{staticClass:"mappingEditorToolbar"},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSwapCurrentMapping?e.$t("mappingEditor.swapMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canSwapCurrentMapping ? $t('mappingEditor.swapMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSwapCurrentMapping,"button-disabled":!e.canSwapCurrentMapping},on:{click:e.swapMapping}},[t("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canSaveCurrentMapping?e.$t("mappingEditor.saveMapping",[e.$jskos.prefLabel(e.currentRegistry)]):"",delay:e.defaults.delay.medium},expression:"{ title: canSaveCurrentMapping ? $t('mappingEditor.saveMapping', [$jskos.prefLabel(currentRegistry)]) : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canSaveCurrentMapping,"button-disabled":!e.canSaveCurrentMapping},on:{click:e.saveCurrentMapping}},[t("font-awesome-icon",{attrs:{icon:"save"}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canDeleteCurrentMapping?e.$t("mappingEditor.deleteMapping"):e.$store.getters.getCurrentRegistry&&(!e.$store.getters.getCurrentRegistry.has.auth||e.$store.getters.getCurrentRegistry.auth)?"":e.$t("general.authNecessary"),delay:e.defaults.delay.medium},expression:"{ title: canDeleteCurrentMapping ? $t('mappingEditor.deleteMapping') : ($store.getters.getCurrentRegistry && (!$store.getters.getCurrentRegistry.has.auth || $store.getters.getCurrentRegistry.auth) ? '' : $t('general.authNecessary')), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{"button-delete":e.canDeleteCurrentMapping,"button-disabled":!e.canDeleteCurrentMapping},on:{click:e.deleteCurrentMapping}},[t("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canCloneCurrentMapping?e.$t("mappingEditor.cloneMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canCloneCurrentMapping ? $t('mappingEditor.cloneMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canCloneCurrentMapping,"button-disabled":!e.canCloneCurrentMapping},on:{click:e.cloneMapping}},[t("font-awesome-icon",{attrs:{icon:"clone"}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.canClearCurrentMapping?e.$t("mappingEditor.clearMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: canClearCurrentMapping ? $t('mappingEditor.clearMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditorToolbarItem",class:{button:e.canClearCurrentMapping,"button-disabled":!e.canClearCurrentMapping},on:{click:e.clearMapping}},[t("font-awesome-icon",{attrs:{icon:"ban"}})],1),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:{title:e.mappingStatus.message||"",placement:"bottom"},expression:`{
          title: mappingStatus.message || '',
          placement: 'bottom'
        }`}],staticClass:"mappingEditorToolbarItem mappingEditor-mappingAlert fontWeight-heavy",class:{"text-warning":e.mappingStatus.warning,"text-danger":e.mappingStatus.invalid}},[e.$jskos.conceptsOfMapping(e.mapping).length>0&&e.mappingStatus.message?t("font-awesome-icon",{attrs:{icon:"exclamation-circle"}}):e._e()],1)]),e._l([!0,!1],function(a,i){return t("div",{key:i,staticClass:"mappingEditorPart",class:{"mappingEditorPart-noConcepts":e.$store.getters["mapping/getScheme"](a)==null||!e.$store.getters["mapping/getConcepts"](a).length,"mappingEditorPart-dropTarget":e.$store.state.draggedConcept!=null},style:{order:i*2},on:{dragover:e.dragOver,drop:function(r){return e.drop(r,a)}}},[e.$store.getters["mapping/getScheme"](a)!=null&&e.$store.getters["mapping/getConcepts"](a).length?t("div",[t("div",{staticClass:"mappingScheme fontWeight-heavy"},[t("item-name",{attrs:{item:e.$store.getters["mapping/getScheme"](a),"is-link":!0,"is-left":a,"show-text":!1}})],1),t("div",{staticClass:"mappingConceptList"},[t("div",[t("div",{staticStyle:{flex:"1"}}),t("ul",e._l(e.$store.getters["mapping/getConcepts"](a),function(r,c){return t("li",{key:c},[t("item-name",{attrs:{item:r,"is-link":!0,"is-left":a,"is-highlighted":e.$jskos.compare(r,e.selected.concept[!0])||e.$jskos.compare(r,e.selected.concept[!1]),"show-popover":!0,"font-size":"large"}}),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.removeConceptFromMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingEditor.removeConceptFromMapping'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button fontSize-large",on:{click:function(f){return e.$store.commit({type:"mapping/remove",concept:r,isLeft:a})}}},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1)}),0),t("div",{staticStyle:{flex:"1"}})])])]):t("div",[t("div",{staticClass:"mappingNoConcepts"},[e.$store.state.draggedConcept==null?t("div",{staticStyle:{"margin-bottom":"-12px"}},[e._v(" "+e._s(e.$t("mappingEditor.placeholder"))),t("br"),t("br")]):t("div",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.$t("mappingEditor.placeholderDragging"))+" ")]),e.$store.state.draggedConcept==null?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.isAddButtonEnabled(a)?e.$t("general.addToMapping"):"",delay:e.defaults.delay.medium},expression:"{ title: isAddButtonEnabled(isLeft) ? $t('general.addToMapping') : '', delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"mappingEditor-addButton",class:{button:e.isAddButtonEnabled(a),"button-disabled":!e.isAddButtonEnabled(a)},on:{click:function(r){return e.addToMappingInternal(a)}}},[t("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()])])])}),t("div",{staticClass:"mappingTypeSelection"},[t("mapping-type-selection",{attrs:{mapping:e.$store.state.mapping.mapping}})],1),t("div",{staticClass:"mappingEditor-title"},[e._v(" "+e._s(e.$t("mappingEditor.title"))+" "),e.currentGuidelines?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingEditor.guidelines"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingEditor.guidelines'), delay: defaults.delay.medium }",modifiers:{hover:!0}}]},[t("a",{attrs:{href:e.currentGuidelines.url,target:"_blank"}},[t("font-awesome-icon",{attrs:{icon:"question-circle"}})],1)]):e._e()]),t("b-modal",{ref:"deleteModal",attrs:{title:e.$t("mappingEditor.deleteTitle"),"hide-footer":""}},[t("p",{staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.$t("mappingEditor.deleteText"))+" "),e.hasChangedFromOriginal?t("span",[t("br"),e._v(e._s(e.$t("mappingEditor.deleteChangesText"))+" ")]):e._e()]),t("div",{staticClass:"mappingEditor-deleteButtons"},[t("b-button",{attrs:{variant:"danger"},on:{click:function(a){e.deleteOriginalMapping(!0)&&e.$refs.deleteModal.hide()}}},[e._v(" "+e._s(e.$t("mappingEditor.deleteConfirm"))+" ")]),t("b-button",{attrs:{variant:"secondary"},on:{click:function(a){return e.$refs.deleteModal.hide()}}},[e._v(" "+e._s(e.$t("mappingEditor.cancel"))+" ")])],1)]),t("mapping-detail",{ref:"mappingDetail",attrs:{mapping:e.mapping}}),t("div",{staticClass:"mappingEditor-infoIcon"},[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("mappingBrowser.showDetail"),delay:e.defaults.delay.medium},expression:"{ title: $t('mappingBrowser.showDetail'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",attrs:{icon:"info-circle"},on:{click:function(a){return e.$refs.mappingDetail.show()}}})],1),e.original.uri||e.canSaveCurrentMapping?t("concordance-selection",{staticClass:"mappingEditor-concordanceSelection",attrs:{mapping:e.mapping,registry:e.currentRegistry},on:{change:e.setConcordance}}):e._e()],2)},vt=[],bt=$(ut,gt,vt,!1,null,"908b9ec0",null,null),yt=bt.exports;const xt={name:"Minimizer",mixins:[j],props:{name:{type:String,default:null},text:{type:String,default:""},isColumn:{type:Boolean,default:!1},forceMinimized:{type:Boolean,default:null}},data(){return{previousFlex:"",previousMinSizes:[],minimizedLocal:!1,minimizerSize:"40px",minimizeHovered:!1}},computed:{minimized:{get(){return this.forceMinimized!=null?this.forceMinimized:this.name!=null?this.$settings.minimized[this.name]||!1:this.minimizedLocal},set(o){if(this.name!=null){let e=l.cloneDeep(this.$settings.minimized);e[this.name]=o,this.$store.commit({type:"settings/set",prop:"minimized",value:e})}else this.minimizedLocal=o}}},watch:{minimized(){this.refreshMinimize()}},mounted(){this.refreshMinimize()},methods:{toggleMinimize(o=null){o!=null?this.minimized=o:this.minimized=!this.minimized},refreshMinimize(){this.minimized&&(this.previousMinSizes=[]);let o=this.$el;for(;!o.classList.contains("mainComponent");)if(o=o.parentElement,this.minimized){let t=window.getComputedStyle(o),a;this.isColumn?a=t.getPropertyValue("min-width"):a=t.getPropertyValue("min-height"),this.previousMinSizes.push({element:o,minSize:a}),this.isColumn?(o.style.minWidth=this.minimizerSize,o.style.maxWidth=this.minimizerSize):(o.style.minHeight=this.minimizerSize,o.style.maxHeight=this.minimizerSize)}let e=window.getComputedStyle(o);if(this.minimized){o.classList.add("mainComponent-minimized"),this.previousFlex=e.getPropertyValue("flex"),o.style.flex="0 1 "+this.minimizerSize,o.dataset.minimized=1,this.refresh("minimize");let t=window.getComputedStyle(this.$el.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index");for(let a of o.getElementsByClassName("minimizer"))a!=this.$el&&a.__vue__.minimized&&window.getComputedStyle(a.getElementsByClassName("minimizedOverlay")[0]).getPropertyValue("z-index")>=t&&(a.getElementsByClassName("minimizedOverlay")[0].style.zIndex=t-1)}else{o.classList.remove("mainComponent-minimized"),o.style.flex=this.previousFlex;for(let t of this.previousMinSizes)this.isColumn?(t.element.style.minWidth=t.minSize,t.element.style.maxWidth=""):(t.element.style.minHeight=t.minSize,t.element.style.maxHeight="");o.dataset.minimized=0,this.refresh("minimize")}}}};var wt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"minimizer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.minimized,expression:"!minimized"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.minimize"),delay:e.defaults.delay.medium},expression:"{ title: $t('minimizer.minimize'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"utilityButton minimizeButton",on:{click:function(a){return e.toggleMinimize()},mouseover:function(a){e.minimizeHovered=!0},mouseout:function(a){e.minimizeHovered=!1}}},[t("font-awesome-icon",{attrs:{icon:"window-minimize"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.minimized,expression:"minimized"}],staticClass:"minimizedOverlay",on:{click:function(a){return e.toggleMinimize()}}},[t("div",[e._v(" "+e._s(e.text)+" "),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("minimizer.maximize"),delay:e.defaults.delay.medium},expression:"{ title: $t('minimizer.maximize'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"maximizeButton"},[t("font-awesome-icon",{attrs:{icon:"plus-square"}})],1)])]),e.minimizeHovered?t("div",{staticClass:"minimizedHoverOverlay"}):e._e()])},kt=[],St=$(xt,wt,kt,!1,null,"0ca7f003",null,null),me=St.exports;const _t={name:"ConceptListItem",components:{LoadingIndicator:le,ItemName:Q},mixins:[O,oe],props:{source:{type:Object,default:null},index:{type:Number,default:null},isLeft:{type:Boolean,default:!0},showChildren:{type:Boolean,default:!1},showScheme:{type:Boolean,default:!1},buttons:{type:Array,default:()=>[]}},data(){return{isHoveredFromHere:!1,loadingChildren:!1,preventClick:!1,preventClickArrow:!1,canAddToMapping:!1,interval:null,url:null}},computed:{hasChildren(){return l.get(this.concept,"narrower.length",1)!=0},isHovered(){return this.isHoveredFromHere},childrenLoaded(){return!this.concept.narrower||!this.concept.narrower.includes(null)},isOpen(){return l.get(this.concept,`__ISOPEN__[${this.isLeft}]`,!1)},scheme(){return l.get(this.concept,"inScheme[0]")},mappedStatus(){return this.$store.getters.mappedStatus(this.concept,this.isLeft)},showConceptMappedStatus(){return this.$store.state.settings.settings.components.ConceptListWrapper.loadConceptsMappedStatus},concept(){return g(this.source.concept,{relatedItems:!0})||this.source.concept},depth(){return this.source.depth},isSelected(){return this.source.isSelected},showNotation(){return!(l.get(this.concept,"inScheme[0].DISPLAY.hideNotation")===!0&&this.prefLabel)},notation(){return this.getNotation(this.concept,"concept",!0)},prefLabel(){let o=this.getPrefLabel(this.concept);return o===""&&this.notation===""?this.concept.uri:o}},created(){this.hovering=l.debounce(this._hovering,20)},methods:{_hovering(o){this.$store.commit({type:"setHoveredConcept",concept:o}),this.isHoveredFromHere=o!=null,this.canAddToMapping=this.$store.getters["mapping/canAdd"](this.concept,this.$store.state.selected.scheme[this.isLeft],this.isLeft),window.clearInterval(this.interval),o!=null&&(this.interval=setInterval(()=>{this.isMouseOver()||(this.isHoveredFromHere=!1,window.clearInterval(this.interval))},500)),o?this.url=this.getRouterUrl(o,this.isLeft,!0):this.url=null},openByArrow(o){this.preventClickArrow||(this.open(this.concept,this.isLeft,o),this.loadChildren(),this.preventClickArrow=!0,l.delay(()=>{l.delay(()=>{this.preventClickArrow=!1},200)},50))},select(o){this.setSelected({isLeft:this.isLeft,concept:o})},onClick(){this.preventClick||this.isSelected&&this.hasChildren&&(this.preventClick=!0,l.delay(()=>{this.open(this.concept,this.isLeft,!this.isOpen),l.delay(()=>{this.preventClick=!1},200)},50))},addConcept(){!this.isSelected&&this.$store.state.settings.settings.components.ConceptListWrapper.addToMappingSelectsConcept&&this.select(this.concept),this.addToMapping({concept:this.concept,scheme:this.$store.state.selected.scheme[this.isLeft],isLeft:this.isLeft})},loadChildren(){this.loadingChildren=!0,je(this.concept).then(()=>{this.loadingChildren=!1,this.showChildren&&this.concept&&this.concept.__ISOPEN__&&this.concept.__ISOPEN__[this.isLeft]&&this.scrollTo()})},scrollTo(){let o=this.$el.parentElement;for(;!o.classList.contains("scrollable")&&o.parentElement;)o=o.parentElement;var e={container:o,easing:"ease-in",offset:-20,cancelable:!0,x:!1,y:!0};this.$scrollTo(this.$el,200,e)}}};var Ct=function(){var e=this,t=e._self._c;return e.concept!=null?t("div",{staticClass:"conceptListItem",class:{hovered:e.isHovered&&!e.isHovered,selected:e.isSelected,"concept-mappingsExist":e.showConceptMappedStatus&&e.mappedStatus,"concept-mappingsDoNotExist":e.showConceptMappedStatus&&!e.mappedStatus},style:`padding-left: ${e.depth*10}px`,attrs:{"data-uri":e.concept.uri},on:{mouseover:function(a){return e.hovering(e.concept)},mouseout:function(a){return e.hovering(null)}}},[t("div",{staticClass:"conceptBox",attrs:{draggable:"true"},on:{dragstart:function(a){return e.dragStart(e.concept,a)},dragend:function(a){return e.dragEnd()}}},[e.showChildren&&e.hasChildren?t("div",{staticClass:"arrowBox",on:{click:function(a){return e.openByArrow(!e.isOpen)}}},[t("i",{class:{right:!e.isOpen,down:e.isOpen}})]):e._e(),e._l(e.buttons.filter(a=>a.position=="before"),function(a,i){return t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:a.tooltip,delay:e.defaults.delay.medium},expression:"{ title: button.tooltip, delay: defaults.delay.medium}",modifiers:{hover:!0}}],key:`conceptListItem-buttons-${i}`,staticClass:"button fontSize-verySmall conceptListItem-buttonBefore",on:{click:function(r){return a.onClick(r,e.concept)}}},[t("font-awesome-icon",{attrs:{icon:a.icon}})],1)}),t(e.url?"router-link":"div",{tag:"div",staticClass:"labelBox",class:{labelBoxFull:e.showChildren&&!e.hasChildren,labelBoxSelected:e.isSelected,labelBoxSingle:!e.showChildren},attrs:{to:e.url},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.onClick.apply(null,arguments)}}},[e.scheme&&e.showScheme?t("span",[e._v(" "+e._s(e.$jskos.notation(e.scheme))+" ")]):e._e(),e.concept&&e.concept.type&&e.concept.type.includes("http://rdf-vocabulary.ddialliance.org/xkos#CombinedConcept")?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.combinedConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.combinedConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"fontSize-normal"},[t("font-awesome-icon",{attrs:{icon:"puzzle-piece"}})],1):e._e(),e.showNotation?t("span",{staticClass:"fontWeight-heavy",domProps:{innerHTML:e._s(e.notation)}}):e._e(),t("span",{class:{"fontWeight-medium":!0}},[e._v(" "+e._s(e.prefLabel)+" ")]),e.concept&&e.concept.__DETAILSLOADED__==-1?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("itemDetail.unknownConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('itemDetail.unknownConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"missingDataIndicator"},[e._v(" \u2022 ")]):e._e()]),e.canAddToMapping?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: defaults.delay.medium}",modifiers:{hover:!0}}],staticClass:"button addToMapping",on:{click:function(a){return e.addConcept()}}},[t("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()],2),e.showChildren&&e.hasChildren&&e.isOpen&&e.concept.narrower&&e.concept.narrower.includes(null)?t("loading-indicator",{staticStyle:{"margin-left":"36px"},attrs:{size:"sm"}}):e._e()],1):e._e()},zt=[],$t=$(_t,Ct,zt,!1,null,"aa6ced1c",null,null),Lt=$t.exports,Ce={exports:{}},Mt=Re(Pe);/*!
 * vue-virtual-scroll-list v2.3.3
 * open source under the MIT license
 * https://github.com/tangbc/vue-virtual-scroll-list#readme
 */(function(o,e){(function(t,a){o.exports=a(Mt)})(He,function(t){t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;function a(d,s){if(!(d instanceof s))throw new TypeError("Cannot call a class as a function")}function i(d,s){for(var n=0;n<s.length;n++){var p=s[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}function r(d,s,n){return s&&i(d.prototype,s),n&&i(d,n),d}function c(d,s,n){return s in d?Object.defineProperty(d,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):d[s]=n,d}function f(d,s){var n=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);s&&(p=p.filter(function(u){return Object.getOwnPropertyDescriptor(d,u).enumerable})),n.push.apply(n,p)}return n}function m(d){for(var s=1;s<arguments.length;s++){var n=arguments[s]!=null?arguments[s]:{};s%2?f(Object(n),!0).forEach(function(p){c(d,p,n[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(n,p))})}return d}function h(d){return y(d)||C(d)||A(d)||N()}function y(d){if(Array.isArray(d))return I(d)}function C(d){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(d))return Array.from(d)}function A(d,s){if(!!d){if(typeof d=="string")return I(d,s);var n=Object.prototype.toString.call(d).slice(8,-1);if(n==="Object"&&d.constructor&&(n=d.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(d,s)}}function I(d,s){(s==null||s>d.length)&&(s=d.length);for(var n=0,p=new Array(s);n<s;n++)p[n]=d[n];return p}function N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B={FRONT:"FRONT",BEHIND:"BEHIND"},S={INIT:"INIT",FIXED:"FIXED",DYNAMIC:"DYNAMIC"},E=0,w=function(){function d(s,n){a(this,d),this.init(s,n)}return r(d,[{key:"init",value:function(n,p){this.param=n,this.callUpdate=p,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.lastCalcIndex=0,this.fixedSizeValue=0,this.calcType=S.INIT,this.offset=0,this.direction="",this.range=Object.create(null),n&&this.checkRange(0,n.keeps-1)}},{key:"destroy",value:function(){this.init(null,null)}},{key:"getRange",value:function(){var n=Object.create(null);return n.start=this.range.start,n.end=this.range.end,n.padFront=this.range.padFront,n.padBehind=this.range.padBehind,n}},{key:"isBehind",value:function(){return this.direction===B.BEHIND}},{key:"isFront",value:function(){return this.direction===B.FRONT}},{key:"getOffset",value:function(n){return(n<1?0:this.getIndexOffset(n))+this.param.slotHeaderSize}},{key:"updateParam",value:function(n,p){var u=this;this.param&&n in this.param&&(n==="uniqueIds"&&this.sizes.forEach(function(k,M){p.includes(M)||u.sizes.delete(M)}),this.param[n]=p)}},{key:"saveSize",value:function(n,p){this.sizes.set(n,p),this.calcType===S.INIT?(this.fixedSizeValue=p,this.calcType=S.FIXED):this.calcType===S.FIXED&&this.fixedSizeValue!==p&&(this.calcType=S.DYNAMIC,delete this.fixedSizeValue),this.calcType!==S.FIXED&&typeof this.firstRangeTotalSize!="undefined"&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=h(this.sizes.values()).reduce(function(u,k){return u+k},0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}},{key:"handleDataSourcesChange",value:function(){var n=this.range.start;this.isFront()?n=n-E:this.isBehind()&&(n=n+E),n=Math.max(n,0),this.updateRange(this.range.start,this.getEndByStart(n))}},{key:"handleSlotSizeChange",value:function(){this.handleDataSourcesChange()}},{key:"handleScroll",value:function(n){this.direction=n<this.offset?B.FRONT:B.BEHIND,this.offset=n,this.param&&(this.direction===B.FRONT?this.handleFront():this.direction===B.BEHIND&&this.handleBehind())}},{key:"handleFront",value:function(){var n=this.getScrollOvers();if(!(n>this.range.start)){var p=Math.max(n-this.param.buffer,0);this.checkRange(p,this.getEndByStart(p))}}},{key:"handleBehind",value:function(){var n=this.getScrollOvers();n<this.range.start+this.param.buffer||this.checkRange(n,this.getEndByStart(n))}},{key:"getScrollOvers",value:function(){var n=this.offset-this.param.slotHeaderSize;if(n<=0)return 0;if(this.isFixedType())return Math.floor(n/this.fixedSizeValue);for(var p=0,u=0,k=0,M=this.param.uniqueIds.length;p<=M;){if(u=p+Math.floor((M-p)/2),k=this.getIndexOffset(u),k===n)return u;k<n?p=u+1:k>n&&(M=u-1)}return p>0?--p:0}},{key:"getIndexOffset",value:function(n){if(!n)return 0;for(var p=0,u=0,k=0;k<n;k++)u=this.sizes.get(this.param.uniqueIds[k]),p=p+(typeof u=="number"?u:this.getEstimateSize());return this.lastCalcIndex=Math.max(this.lastCalcIndex,n-1),this.lastCalcIndex=Math.min(this.lastCalcIndex,this.getLastIndex()),p}},{key:"isFixedType",value:function(){return this.calcType===S.FIXED}},{key:"getLastIndex",value:function(){return this.param.uniqueIds.length-1}},{key:"checkRange",value:function(n,p){var u=this.param.keeps,k=this.param.uniqueIds.length;k<=u?(n=0,p=this.getLastIndex()):p-n<u-1&&(n=p-u+1),this.range.start!==n&&this.updateRange(n,p)}},{key:"updateRange",value:function(n,p){this.range.start=n,this.range.end=p,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}},{key:"getEndByStart",value:function(n){var p=n+this.param.keeps-1,u=Math.min(p,this.getLastIndex());return u}},{key:"getPadFront",value:function(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}},{key:"getPadBehind",value:function(){var n=this.range.end,p=this.getLastIndex();return this.isFixedType()?(p-n)*this.fixedSizeValue:this.lastCalcIndex===p?this.getIndexOffset(p)-this.getIndexOffset(n):(p-n)*this.getEstimateSize()}},{key:"getEstimateSize",value:function(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}]),d}(),T={dataKey:{type:[String,Function],required:!0},dataSources:{type:Array,required:!0},dataComponent:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},extraProps:{type:Object},estimateSize:{type:Number,default:50},direction:{type:String,default:"vertical"},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},pageMode:{type:Boolean,default:!1},rootTag:{type:String,default:"div"},wrapTag:{type:String,default:"div"},wrapClass:{type:String,default:""},wrapStyle:{type:Object},itemTag:{type:String,default:"div"},itemClass:{type:String,default:""},itemClassAdd:{type:Function},itemStyle:{type:Object},headerTag:{type:String,default:"div"},headerClass:{type:String,default:""},headerStyle:{type:Object},footerTag:{type:String,default:"div"},footerClass:{type:String,default:""},footerStyle:{type:Object},itemScopedSlots:{type:Object}},U={index:{type:Number},event:{type:String},tag:{type:String},horizontal:{type:Boolean},source:{type:Object},component:{type:[Object,Function]},slotComponent:{type:Function},uniqueKey:{type:[String,Number]},extraProps:{type:Object},scopedSlots:{type:Object}},W={event:{type:String},uniqueKey:{type:String},tag:{type:String},horizontal:{type:Boolean}},R={created:function(){this.shapeKey=this.horizontal?"offsetWidth":"offsetHeight"},mounted:function(){var s=this;typeof ResizeObserver!="undefined"&&(this.resizeObserver=new ResizeObserver(function(){s.dispatchSizeChange()}),this.resizeObserver.observe(this.$el))},updated:function(){this.dispatchSizeChange()},beforeDestroy:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)},methods:{getCurrentSize:function(){return this.$el?this.$el[this.shapeKey]:0},dispatchSizeChange:function(){this.$parent.$emit(this.event,this.uniqueKey,this.getCurrentSize(),this.hasInitial)}}},P=t.component("virtual-list-item",{mixins:[R],props:U,render:function(s){var n=this.tag,p=this.component,u=this.extraProps,k=u===void 0?{}:u,M=this.index,b=this.source,x=this.scopedSlots,v=x===void 0?{}:x,q=this.uniqueKey,H=this.slotComponent,G=m({},k,{source:b,index:M});return s(n,{key:q,attrs:{role:"listitem"}},[H?s("div",H({item:b,index:M,scope:G})):s(p,{props:G,scopedSlots:v})])}}),z=t.component("virtual-list-slot",{mixins:[R],props:W,render:function(s){var n=this.tag,p=this.uniqueKey;return s(n,{key:p,attrs:{role:p}},this.$slots.default)}}),_={ITEM:"item_resize",SLOT:"slot_resize"},L={HEADER:"thead",FOOTER:"tfoot"},F=t.component("virtual-list",{props:T,data:function(){return{range:null}},watch:{"dataSources.length":function(){this.virtual.updateParam("uniqueIds",this.getUniqueIdFromDataSources()),this.virtual.handleDataSourcesChange()},keeps:function(s){this.virtual.updateParam("keeps",s),this.virtual.handleSlotSizeChange()},start:function(s){this.scrollToIndex(s)},offset:function(s){this.scrollToOffset(s)}},created:function(){this.isHorizontal=this.direction==="horizontal",this.directionKey=this.isHorizontal?"scrollLeft":"scrollTop",this.installVirtual(),this.$on(_.ITEM,this.onItemResized),(this.$slots.header||this.$slots.footer)&&this.$on(_.SLOT,this.onSlotResized)},activated:function(){this.scrollToOffset(this.virtual.offset)},mounted:function(){this.start?this.scrollToIndex(this.start):this.offset&&this.scrollToOffset(this.offset),this.pageMode&&(this.updatePageModeFront(),document.addEventListener("scroll",this.onScroll,{passive:!1}))},beforeDestroy:function(){this.virtual.destroy(),this.pageMode&&document.removeEventListener("scroll",this.onScroll)},methods:{getSize:function(s){return this.virtual.sizes.get(s)},getSizes:function(){return this.virtual.sizes.size},getOffset:function(){if(this.pageMode)return document.documentElement[this.directionKey]||document.body[this.directionKey];var s=this.$refs.root;return s?Math.ceil(s[this.directionKey]):0},getClientSize:function(){var s=this.isHorizontal?"clientWidth":"clientHeight";if(this.pageMode)return document.documentElement[s]||document.body[s];var n=this.$refs.root;return n?Math.ceil(n[s]):0},getScrollSize:function(){var s=this.isHorizontal?"scrollWidth":"scrollHeight";if(this.pageMode)return document.documentElement[s]||document.body[s];var n=this.$refs.root;return n?Math.ceil(n[s]):0},scrollToOffset:function(s){if(this.pageMode)document.body[this.directionKey]=s,document.documentElement[this.directionKey]=s;else{var n=this.$refs.root;n&&(n[this.directionKey]=s)}},scrollToIndex:function(s){if(s>=this.dataSources.length-1)this.scrollToBottom();else{var n=this.virtual.getOffset(s);this.scrollToOffset(n)}},scrollToBottom:function(){var s=this,n=this.$refs.shepherd;if(n){var p=n[this.isHorizontal?"offsetLeft":"offsetTop"];this.scrollToOffset(p),setTimeout(function(){s.getOffset()+s.getClientSize()<s.getScrollSize()&&s.scrollToBottom()},3)}},updatePageModeFront:function(){var s=this.$refs.root;if(s){var n=s.getBoundingClientRect(),p=s.ownerDocument.defaultView,u=this.isHorizontal?n.left+p.pageXOffset:n.top+p.pageYOffset;this.virtual.updateParam("slotHeaderSize",u)}},reset:function(){this.virtual.destroy(),this.scrollToOffset(0),this.installVirtual()},installVirtual:function(){this.virtual=new w({slotHeaderSize:0,slotFooterSize:0,keeps:this.keeps,estimateSize:this.estimateSize,buffer:Math.round(this.keeps/3),uniqueIds:this.getUniqueIdFromDataSources()},this.onRangeChanged),this.range=this.virtual.getRange()},getUniqueIdFromDataSources:function(){var s=this.dataKey;return this.dataSources.map(function(n){return typeof s=="function"?s(n):n[s]})},onItemResized:function(s,n){this.virtual.saveSize(s,n),this.$emit("resized",s,n)},onSlotResized:function(s,n,p){s===L.HEADER?this.virtual.updateParam("slotHeaderSize",n):s===L.FOOTER&&this.virtual.updateParam("slotFooterSize",n),p&&this.virtual.handleSlotSizeChange()},onRangeChanged:function(s){this.range=s},onScroll:function(s){var n=this.getOffset(),p=this.getClientSize(),u=this.getScrollSize();n<0||n+p>u+1||!u||(this.virtual.handleScroll(n),this.emitEvent(n,p,u,s))},emitEvent:function(s,n,p,u){this.$emit("scroll",u,this.virtual.getRange()),this.virtual.isFront()&&!!this.dataSources.length&&s-this.topThreshold<=0?this.$emit("totop"):this.virtual.isBehind()&&s+n+this.bottomThreshold>=p&&this.$emit("tobottom")},getRenderSlots:function(s){for(var n=[],p=this.range,u=p.start,k=p.end,M=this.dataSources,b=this.dataKey,x=this.itemClass,v=this.itemTag,q=this.itemStyle,H=this.isHorizontal,G=this.extraProps,V=this.dataComponent,ee=this.itemScopedSlots,pe=this.$scopedSlots&&this.$scopedSlots.item,K=u;K<=k;K++){var X=M[K];if(X){var te=typeof b=="function"?b(X):X[b];typeof te=="string"||typeof te=="number"?n.push(s(P,{props:{index:K,tag:v,event:_.ITEM,horizontal:H,uniqueKey:te,source:X,extraProps:G,component:V,slotComponent:pe,scopedSlots:ee},style:q,class:"".concat(x).concat(this.itemClassAdd?" "+this.itemClassAdd(K):"")})):console.warn("Cannot get the data-key '".concat(b,"' from data-sources."))}else console.warn("Cannot get the index '".concat(K,"' from data-sources."))}return n}},render:function(s){var n=this.$slots,p=n.header,u=n.footer,k=this.range,M=k.padFront,b=k.padBehind,x=this.isHorizontal,v=this.pageMode,q=this.rootTag,H=this.wrapTag,G=this.wrapClass,V=this.wrapStyle,ee=this.headerTag,pe=this.headerClass,K=this.headerStyle,X=this.footerTag,te=this.footerClass,Ee=this.footerStyle,ue={padding:x?"0px ".concat(b,"px 0px ").concat(M,"px"):"".concat(M,"px 0px ").concat(b,"px")},De=V?Object.assign({},V,ue):ue;return s(q,{ref:"root",on:{"&scroll":!v&&this.onScroll}},[p?s(z,{class:pe,style:K,props:{tag:ee,event:_.SLOT,uniqueKey:L.HEADER}},p):null,s(H,{class:G,attrs:{role:"group"},style:De},this.getRenderSlots(s)),u?s(z,{class:te,style:Ee,props:{tag:X,event:_.SLOT,uniqueKey:L.FOOTER}},u):null,s("div",{ref:"shepherd",style:{width:x?"0px":"100%",height:x?"100%":"0px"}})])}});return F})})(Ce);var ze=Ce.exports,Ft=4,It=.001,Bt=1e-7,Tt=10,ae=11,ie=1/(ae-1),Et=typeof Float32Array=="function";function $e(o,e){return 1-3*e+3*o}function Le(o,e){return 3*e-6*o}function Me(o){return 3*o}function ne(o,e,t){return(($e(e,t)*o+Le(e,t))*o+Me(e))*o}function Fe(o,e,t){return 3*$e(e,t)*o*o+2*Le(e,t)*o+Me(e)}function Dt(o,e,t,a,i){var r,c,f=0;do c=e+(t-e)/2,r=ne(c,a,i)-o,r>0?t=c:e=c;while(Math.abs(r)>Bt&&++f<Tt);return c}function Ot(o,e,t,a){for(var i=0;i<Ft;++i){var r=Fe(e,t,a);if(r===0)return e;var c=ne(e,t,a)-o;e-=c/r}return e}function At(o){return o}var ge=function(e,t,a,i){if(!(0<=e&&e<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&a===i)return At;for(var r=Et?new Float32Array(ae):new Array(ae),c=0;c<ae;++c)r[c]=ne(c*ie,e,a);function f(m){for(var h=0,y=1,C=ae-1;y!==C&&r[y]<=m;++y)h+=ie;--y;var A=(m-r[y])/(r[y+1]-r[y]),I=h+A*ie,N=Fe(I,e,a);return N>=It?Ot(m,I,e,a):N===0?I:Dt(m,h,h+ie,e,a)}return function(h){return h===0?0:h===1?1:ne(f(h),t,i)}},ve={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};let Ie=!1;try{let o=Object.defineProperty({},"passive",{get:function(){Ie=!0}});window.addEventListener("test",null,o)}catch{}var J={$(o){return typeof o!="string"?o:document.querySelector(o)},on(o,e,t,a={passive:!1}){e instanceof Array||(e=[e]);for(let i=0;i<e.length;i++)o.addEventListener(e[i],t,Ie?a:!1)},off(o,e,t){e instanceof Array||(e=[e]);for(let a=0;a<e.length;a++)o.removeEventListener(e[a],t)},cumulativeOffset(o){let e=0,t=0;do e+=o.offsetTop||0,t+=o.offsetLeft||0,o=o.offsetParent;while(o);return{top:e,left:t}}};const be=["mousedown","wheel","DOMMouseScroll","mousewheel","keyup","touchmove"];let D={container:"body",duration:500,lazy:!0,easing:"ease",offset:0,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0};const Nt=()=>{let o,e,t,a,i,r,c,f,m,h,y,C,A,I,N,B,S,E,w,T,U,W,R,P=b=>{!f||(R=b,T=!0)},z,_,L,F;function d(b){let x=b.scrollTop;return b.tagName.toLowerCase()==="body"&&(x=x||document.documentElement.scrollTop),x}function s(b){let x=b.scrollLeft;return b.tagName.toLowerCase()==="body"&&(x=x||document.documentElement.scrollLeft),x}function n(){U=J.cumulativeOffset(e),W=J.cumulativeOffset(o),C&&(N=W.left-U.left+r,E=N-I),A&&(S=W.top-U.top+r,w=S-B)}function p(b){if(T)return u();_||(_=b),i||n(),L=b-_,F=Math.min(L/t,1),F=z(F),k(e,B+w*F,I+E*F),L<t?window.requestAnimationFrame(p):u()}function u(){T||k(e,S,N),_=!1,J.off(e,be,P),T&&y&&y(R,o),!T&&h&&h(o)}function k(b,x,v){A&&(b.scrollTop=x),C&&(b.scrollLeft=v),b.tagName.toLowerCase()==="body"&&(A&&(document.documentElement.scrollTop=x),C&&(document.documentElement.scrollLeft=v))}function M(b,x,v={}){if(typeof x=="object"?v=x:typeof x=="number"&&(v.duration=x),o=J.$(b),!o)return console.warn("[vue-scrollto warn]: Trying to scroll to an element that is not on the page: "+b);if(e=J.$(v.container||D.container),t=v.hasOwnProperty("duration")?v.duration:D.duration,i=v.hasOwnProperty("lazy")?v.lazy:D.lazy,a=v.easing||D.easing,r=v.hasOwnProperty("offset")?v.offset:D.offset,c=v.hasOwnProperty("force")?v.force!==!1:D.force,f=v.hasOwnProperty("cancelable")?v.cancelable!==!1:D.cancelable,m=v.onStart||D.onStart,h=v.onDone||D.onDone,y=v.onCancel||D.onCancel,C=v.x===void 0?D.x:v.x,A=v.y===void 0?D.y:v.y,typeof r=="function"&&(r=r(o,e)),I=s(e),B=d(e),n(),T=!1,!c){const q=e.tagName.toLowerCase()==="body"?document.documentElement.clientHeight||window.innerHeight:e.offsetHeight,H=B,G=H+q,V=S-r,ee=V+o.offsetHeight;if(V>=H&&ee<=G){h&&h(o);return}}if(m&&m(o),!w&&!E){h&&h(o);return}return typeof a=="string"&&(a=ve[a]||ve.ease),z=ge.apply(ge,a),J.on(e,be,P,{passive:!0}),window.requestAnimationFrame(p),()=>{R=null,T=!0}}return M};var de={mixins:[O],computed:{loadConceptsMappedStatus(){return this.$store.state.settings.settings.components.ConceptListWrapper.loadConceptsMappedStatus},loadConceptsMappedStatusOtherScheme(){return l.isBoolean(this.isLeft)?this.$store.state.selected.scheme[!this.isLeft]:null}},created(){this.loadMappingsForConcepts=l.debounce(this._loadMappingsForConcepts,300)},watch:{loadConceptsMappedStatusConceptsToLoad(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},currentRegistry(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},loadConceptsMappedStatusOtherScheme(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])},loadConceptsMappedStatus(){this.loadMappingsForConcepts(this.loadConceptsMappedStatusConceptsToLoad||[])}},methods:{_loadMappingsForConcepts(o){if(!this.loadConceptsMappedStatus)return;const e=this.currentRegistry,t=this.loadConceptsMappedStatusOtherScheme;o=re(o.filter(i=>!l.get(i,"__MAPPED__",[]).find(r=>this.$jskos.compareFast(r.registry,e)&&this.$jskos.compare(r.scheme,t))));const a=o.map(i=>i.uri);t&&a.length&&e&&Promise.all(l.chunk(a,15).map(i=>this.getMappings({from:i.join("|"),toScheme:t.uri,direction:"both",registry:e.uri,limit:500}))).then(()=>{for(let i of o.filter(r=>!l.get(r,"__MAPPED__",[]).find(c=>this.$jskos.compareFast(c.registry,e)&&this.$jskos.compare(c.scheme,t))))fe(i,"__MAPPED__",[]),i.__MAPPED__.push({registry:e,scheme:t,exist:[]})})}}};const jt={name:"ConceptList",components:{LoadingIndicatorFull:ce,VirtualList:ze},mixins:[O,j,de],props:{isLeft:{type:Boolean,default:!0},concepts:{type:Array,default:()=>[null]},showChildren:{type:Boolean,default:!1},noItemsLabel:{type:String,default:null},showScheme:{type:Boolean,default:!1},buttons:{type:Array,default:()=>[]},shown:{type:Boolean,default:!1}},emits:["scroll"],data(){return{loading:!1,currentSelectedConcept:null,shouldScroll:!0,scrollTo:Nt(),itemComponent:Lt}},computed:{conceptSelected(){return this.selected.concept[this.isLeft]},conceptSelectedFromStore(){return g(this.selected.concept[this.isLeft])},items(){if(!this.shown)return[];let o=[];for(let e of this.concepts){let t={uri:e?e.uri:"loading",concept:e,depth:0,isSelected:this.$jskos.compareFast(this.conceptSelected,e)};if(o.push(t),this.showChildren){let a=this.children(t);o=o.concat(a)}}return o},noItems(){return this.items.length==0&&!this.loading},otherScheme(){return g(this.selected.scheme[!this.isLeft])},ancestors(){const o=this.conceptSelectedFromStore&&this.conceptSelectedFromStore.ancestors;return o?o.map(e=>e&&g(e)):null}},watch:{conceptSelectedFromStore:{handler(){this.conceptSelectedUpdated()},deep:!0},ancestors:{handler(){this.conceptSelectedUpdated()},deep:!0},shown(){this.conceptSelectedUpdated()},items:{handler(){this.updatePreviousAndNextConcepts()},deep:!0}},created(){this.updatePreviousAndNextConcepts=l.debounce(this._updatePreviousAndNextConcepts,300)},methods:{_updatePreviousAndNextConcepts(){if(!this.shown)return;const o=this.items.findIndex(a=>this.$jskos.compareFast(a.concept,this.conceptSelected)),e=(()=>{if(o==-1)return null;if(!this.showChildren){const a=this.items[o-1];return a&&a.concept}return null})();this.$store.commit({type:"selected/setPreviousConcept",isLeft:this.isLeft,concept:e});const t=(()=>{if(o==-1)return null;if(!this.showChildren){const i=this.items[o+1];return i&&i.concept}const a=(i,r=!0)=>{if(i=g(i),!i)return null;if(r&&i.narrower&&i.narrower.length)return i.narrower[0];const c=g(l.first(i.ancestors)||l.first(i.broader));let f=l.get(c,"narrower");if(c||(f=this.items.filter(h=>h.depth==0).map(h=>h.concept)),!f)return null;const m=f[f.findIndex(h=>this.$jskos.compareFast(h,i))+1];return m||(c?a(c,!1):null)};return a(this.selected.concept[this.isLeft])})();this.$store.commit({type:"selected/setNextConcept",isLeft:this.isLeft,concept:t})},children(o){let e=[],t=g(o.concept),a=o.depth+1;if(t&&t.__ISOPEN__&&t.__ISOPEN__[this.isLeft])for(let i of t.narrower||[]){let r={uri:i?i.uri:"loading",concept:i,depth:a,isSelected:this.$jskos.compareFast(this.conceptSelected,i)};e.push(r),e=e.concat(this.children(r))}return e},conceptSelectedUpdated(){if(!this.shown)return;let o=this.conceptSelectedFromStore;if(this.$jskos.compareFast(o,this.currentSelectedConcept)||(this.currentSelectedConcept=o,this.shouldScroll=!0),this.$jskos.isConcept(o))if(!this.showChildren||this.ancestors&&!this.ancestors.includes(null)){let e=!0;for(let t of this.ancestors||[])this.showChildren&&(!t.narrower||t.narrower.includes(null))&&(e=!1);if(e&&this.shouldScroll){if(this.shouldScroll=!1,this.showChildren)for(let t of this.ancestors||[])this.open(t,this.isLeft,!0);this.scrollToInternal({concept:o})}else e||(this.loading=!0)}else this.loading=!0},scrollToInternal({concept:o}={}){if(!o)return;const e=this.$refs.conceptListItems;let t=e&&e.$el;for(;t&&!t.classList.contains("cocoda-vue-tabs-content");)t=t.parentElement;if(!e||!t||t.style.display=="none"){this.$log.warn("ConceptList: Can't scroll because either conceptList or container are undefined.");return}const a=()=>{this.scrollLater=null,this.loading=!1};let i=this.items.findIndex(f=>this.$jskos.compareFast(f.concept,o));if(i===-1){a();return}const r=t.getElementsByClassName("conceptListItems")[0],c=r&&r.querySelectorAll(`.conceptListItem[data-uri="${o.uri}"]`)[0];if(this.checkInView(r,c,!1)){a();return}i=Math.min(i,Math.abs(i-1),Math.abs(i-2)),l.delay(()=>{e.scrollToIndex(i),a()},200)}}};var Rt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"conceptList"},[t("virtual-list",{ref:"conceptListItems",staticClass:"conceptListItems",attrs:{"data-key":"uri","data-sources":e.items,"data-component":e.itemComponent,keeps:70,"extra-props":{isLeft:e.isLeft,showChildren:e.showChildren,showScheme:e.showScheme,buttons:e.buttons},"wrap-style":{"margin-top":"5px","margin-bottom":"15px"}},nativeOn:{scroll:function(a){return e.$emit("scroll")}}}),e.noItems?t("div",{staticClass:"conceptListItems-noItems"},[e._v(" "+e._s(e.noItemsLabel||e.$t("conceptList.noItems"))+" ")]):e._e(),e.loading||e.concepts.includes(null)?t("loading-indicator-full"):e._e()],1)},Pt=[],Ht=$(jt,Rt,Pt,!1,null,"e8b2fa46",null,null),Wt=Ht.exports;const Gt={name:"ConceptListWrapper",components:{Minimizer:me,ConceptList:Wt,ComponentSettings:se,DataModalButton:xe,LoadingIndicatorFull:ce},mixins:[j,O,oe,We,de],props:{isLeft:{type:Boolean,default:!0}},data(){return{listSelectionPopoverShow:!1,loading:0}},computed:{dataChoices(){let o=l.get(g(this.selected.scheme[this.isLeft]),"_registry.top");o&&(o+=`?uri=${encodeURIComponent(this.selected.scheme[this.isLeft].uri)}`);let e=[{id:"topConcepts",label:this.$t("conceptList.topConceptsShort"),tooltip:this.$t("conceptList.topConcepts"),noItemsLabel:this.$t("schemeDetail.noTopConcepts"),concepts:this._topConcepts,showChildren:!0,showScheme:!1,url:o,available:this._topConcepts.length>0,icon:"sitemap"},{id:"favoriteConcepts",label:this.$t("conceptList.favoriteConceptsShort"),tooltip:this.$t("conceptList.favoriteConcepts"),concepts:this.favoriteConcepts,showChildren:!1,showScheme:!0,available:!0,buttons:[{position:"before",icon:"times-circle",tooltip:this.$t("schemeSelection.starRemove"),onClick:(a,i)=>{this.$store.dispatch("removeConceptFromFavorites",i)}}],droppedConcept:a=>{this.$store.dispatch("addConceptToFavorites",a)},icon:"star"}],t=0;for(let a of this.config.conceptLists||[]){if(a.schemes&&!a.schemes.find(m=>this.$jskos.compare(m,this.selected.scheme[this.isLeft]))){t+=1;continue}let i=this.$jskos.notation(a),r=this.$jskos.prefLabel(a),c="";i&&(r&&(c=`<b>${r}</b><br>`),r=i),c+=this.$jskos.languageMapContent(a,"scopeNote")||"";let f={id:`custom-${t}`,label:r,tooltip:c,concepts:a.concepts,showChildren:!1,showScheme:!0,url:a.url||a.conceptsUrl,available:a.concepts.length>0,icon:"list"};f.reloadButton=f.url!=null,e.push(f),t+=1}return e},_topConcepts(){let o=l.get(this.selected.scheme[this.isLeft],"uri",null);return l.get(we(o),"topConcepts")||[null]},concepts(){return this.currentChoice.concepts},currentChoice:{get(){let o=this.$settings.conceptListChoice[this.isLeft];return this.dataChoices.find(e=>e.id===o&&e.available)||this.dataChoices.find(e=>e.available)},set(o){this.$store.commit({type:"settings/set",prop:`conceptListChoice[${this.isLeft}]`,value:o.id})}},currentChoiceIndex:{get(){return this.dataChoices.findIndex(o=>o===this.currentChoice)},set(o){this.currentChoice=this.dataChoices[o]}}},created(){this.loadConceptsInView=l.debounce(this._loadConceptsInView,300)},methods:{chooseIndex(o){this.currentChoiceIndex=o,this.listSelectionPopoverShow=!1},tabChanged(){this.loadConceptsInView()},droppedConcept(o,e){e&&e(o)},_loadConceptsInView(){const o=[],e=l.get(this,`$refs.conceptList[${this.currentChoiceIndex}]`),t=l.get(e,"$children[0].$children"),a=l.get(e,"$children[0].$el");if(t&&a)for(let i of t){if(!i||!i.$el)continue;const r=i.$el,c=l.get(i,"$children[0].concept");c&&this.checkInView(a,r)&&o.push(c)}o.forEach(i=>Z(i,{type:"concept",returnIfExists:!0})),Y(o),this.loadMappingsForConcepts(o,this.isLeft)},minimizeConcepts(o){let e=[];for(let t of o){if(!t)continue;let a={uri:t.uri,notation:t.notation};t.inScheme&&t.inScheme[0]&&t.inScheme[0].uri&&(a.inScheme=[{uri:t.inScheme[0].uri}]),e.push(a)}return e},hoverHandlers(){return[{elements:[document.getElementById(`conceptListWrapper-listSelectionButton-${this.isLeft}`),document.getElementById(`conceptListWrapper-listSelectionPopover-${this.isLeft}`)],delta:5,handler:o=>{this.listSelectionPopoverShow=o}}]},async reloadList(){this.loading+=1;let o=await this.$store.dispatch("loadConceptLists");this.$store.commit({type:"setConfig",option:"conceptLists",value:o}),this.loading-=1}}};var Kt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"conceptListWrapper",style:`${e.concepts.length==0?"min-height: 80px; max-height: 80px;":""}`},[t("tabs",{staticStyle:{position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},attrs:{value:e.currentChoiceIndex,fill:""},on:{change:e.tabChanged},scopedSlots:e._u([{key:"title",fn:function(a){return[t("span",[e._v(" "+e._s(a.tab.title)+" ")])]}}])},e._l(e.dataChoices,function(a,i){return t("tab",{key:`conceptListWrapper-dataChoice-${i}`,staticStyle:{position:"relative",overflow:"hidden !important"},attrs:{title:a.label,hidden:a!==e.currentChoice},nativeOn:{dragover:function(r){return e.dragOver.apply(null,arguments)},drop:function(r){return e.drop(r,a.droppedConcept)}}},[t("concept-list",{ref:"conceptList",refInFor:!0,attrs:{"is-left":e.isLeft,concepts:a.concepts,"show-children":a.showChildren,"show-scheme":a.showScheme,"no-items-label":a.noItemsLabel,buttons:a.buttons,shown:i==e.currentChoiceIndex},on:{scroll:e.loadConceptsInView}})],1)}),1),e.dataChoices.filter(a=>a.available).length>1?t("div",{staticClass:"button conceptListWrapper-listSelectionButton",attrs:{id:`conceptListWrapper-listSelectionButton-${e.isLeft}`}},[t("font-awesome-icon",{attrs:{icon:"chevron-up"}})],1):e._e(),t("component-settings"),t("data-modal-button",{attrs:{data:e.minimizeConcepts(e.currentChoice.concepts),"position-right":20,"position-bottom":0,type:"concept",url:e.currentChoice.url}}),e.dataChoices.filter(a=>a.available).length>1?t("b-popover",{ref:"listSelectionPopover",attrs:{placement:"top",show:e.listSelectionPopoverShow,target:`conceptListWrapper-listSelectionButton-${e.isLeft}`},on:{"update:show":function(a){e.listSelectionPopoverShow=a}}},[t("div",{attrs:{id:`conceptListWrapper-listSelectionPopover-${e.isLeft}`}},e._l(e.dataChoices,function(a,i){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.available,expression:"choice.available"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:a.tooltip,delay:e.defaults.delay.medium,html:!0},expression:"{ title: choice.tooltip, delay: defaults.delay.medium, html: true }",modifiers:{hover:!0}}],key:`conceptListWrapper-listSelectionPopover-${e.isLeft}-${i}`,class:{"fontWeight-heavy":a===e.currentChoice,"conceptListWrapper-listSelectionPopover-choice":!0},on:{click:function(r){return e.chooseIndex(i)}}},[t("div",{staticClass:"fontSize-small",staticStyle:{display:"inline-block",width:"18px"}},[t("font-awesome-icon",{attrs:{icon:a.icon}})],1),e._v(" "+e._s(a.label)+" ")])}),0)]):e._e(),e.currentChoice.reloadButton?t("div",{staticClass:"dataModalButton fontSize-small conceptListWrapper-reloadButton",on:{click:e.reloadList}},[t("font-awesome-icon",{attrs:{icon:"sync-alt"}})],1):e._e(),e.loading?t("loading-indicator-full"):e._e(),e.concepts.length>0?t("minimizer",{attrs:{name:`conceptList_${e.isLeft}`,text:e.currentChoice.label}}):e._e()],1)},Ut=[],qt=$(Gt,Kt,Ut,!1,null,null,null,null),Vt=qt.exports;const Yt={name:"ItemDetailNarrower",components:{ItemName:Q,LoadingIndicator:le},mixins:[de],props:{narrower:{type:Array,default:()=>new Array},text:{type:String,default:null},isLeft:{type:Boolean,default:!0}},computed:{loadConceptsMappedStatusConceptsToLoad(){return this.narrower.filter(o=>o)}}};var Qt=function(){var e=this,t=e._self._c;return e.narrower&&e.narrower.length>0?t("div",{staticClass:"itemDetailNarrower"},[e.text!=null?t("div",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.text)+" ")]):e._e(),e._l(e.narrower.filter(a=>a!=null),function(a){return t("div",{key:a.uri,staticClass:"itemDetailNarrower-item",class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(a,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(a,e.isLeft)}},[t("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-down-alt"}}),t("item-name",{attrs:{item:a,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e.narrower.length!=0&&e.narrower.includes(null)?t("loading-indicator",{attrs:{size:"sm"}}):e._e()],2):e._e()},Xt=[],Jt=$(Yt,Qt,Xt,!1,null,"e6246bc6",null,null),Be=Jt.exports;const Zt={name:"ConceptDetail",components:{AutoLink:ke,ItemName:Q,LoadingIndicator:le,ItemDetailNarrower:Be,DateString:Se},mixins:[O,j,he,de],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{showAncestors:!1,searchLinks:[]}},computed:{_item(){return g(this.item)},memberList(){return this._item&&this._item.memberList&&this._item.memberList.filter(Boolean)},memberListComplete(){return this._item&&this._item.memberList&&!this._item.memberList.includes(null)},showAddToMappingButton(){return this.$store.getters["mapping/canAdd"](this._item,l.get(this._item,"inScheme[0]")||this.selected.scheme[this.isLeft],this.isLeft)},ancestors(){return re(l.get(this.item,"ancestors",[])||[])},broader(){return re(l.get(this.item,"broader",[])||[])},searchLinkInfo(){return{uri:this._item&&this._item.uri,language:this.locale,notation:this.$jskos.notation(this._item),prefLabel:this.$jskos.prefLabel(this._item,{fallbackToUri:!1})}},types(){if(!this._item||(this._item.type||[]).length<=1)return[];let o=[];const t=g(l.get(this.item,"inScheme[0]")).types||[];for(let a of this._item.type||[]){if(a=="http://www.w3.org/2004/02/skos/core#Concept")continue;let i={uri:a};i=t.find(r=>this.$jskos.compare(r,i))||i,o.push(i)}return o},gndTerms(){let o=g({uri:"http://bartoc.org/en/node/430"}),e=l.get(this._item,"__GNDMAPPINGS__",[]),t=[];for(let r of e)for(let c of this.$jskos.conceptsOfMapping(r))this.$jskos.compare(o,l.get(c,"inScheme[0]"))&&!t.find(f=>this.$jskos.compare(f.concept,c))&&t.push({concept:g(c),type:this.$jskos.mappingTypeByType(r.type)});let a=[],i=["conceptDetail.relevanceVeryHigh","conceptDetail.relevanceHigh","conceptDetail.relevanceMedium","conceptDetail.relevanceLow","conceptDetail.relevanceGeneric"];for(let r of i){let c=`<strong>${this.$t("conceptDetail.relevance")}: ${this.$t(r)}</strong> - `,f=[];for(let{concept:m}of t.filter(h=>h.type.RELEVANCE==this.$t(r,"en")))m&&this.$jskos.prefLabel(m,{fallbackToUri:!1})&&f.push(l.escape(this.$jskos.prefLabel(m)));f.length>0&&(c=c+f.join(", "),a.push(c))}return a},previousConcept(){return this.selected.previousConcept[this.isLeft]},nextConcept(){return this.selected.nextConcept[this.isLeft]},loadConceptsMappedStatusConceptsToLoad(){return this.item?[this.item].concat(this.item.ancestors||[],this.item.broader||[]).filter(o=>o!=null):[]}},watch:{_item(o,e){this.$jskos.compare(o,e)||this.refresh()},settings(o,e){l.isEqual(o,e)||this.refresh()},searchLinkInfo(o,e){l.isEqual(o,e)||this.updateSearchLinks(o)}},mounted(){this.refresh(),this.updateSearchLinks(this.searchLinkInfo),this.enableShortcuts()},methods:{shortcutHandler({action:o,isLeft:e}){o=="nextConcept"&&e==this.isLeft&&this.nextConcept&&this.setSelected({concept:this.nextConcept,isLeft:e})},refresh(){this.showAncestors=!1,this.loadGndTerms(),Y([this.item],{force:!0}),this.loadColiAna()},async loadGndTerms(){if(!this.item)return;let o=this._item,e=g({uri:"http://bartoc.org/en/node/430"});if(this.$jskos.compare(e,l.get(o,"inScheme[0]")))return;const t=this.config.registries.filter(r=>r.has.mappings&&this.$jskos.mappingRegistryIsStored(r)).map(r=>this.getMappings({registry:r,direction:"both",from:o,toScheme:e.uri}).catch(()=>[]));let a=l.flatten(await Promise.all(t)),i=[];for(let r of a){let c=this.$jskos.conceptsOfMapping(r);for(let f of c)this.$jskos.compare(e,l.get(f,"inScheme[0]"))&&i.push(f)}i=l.uniqWith(i,this.$jskos.compare),await Y(i),fe(o,"__GNDMAPPINGS__",a)},async loadColiAna(){const o=this.config["coli-ana"];if(!o)return;const e=g(this._item,{relatedItems:!0});if(!e||e.memberList)return;const t=g({uri:"http://dewey.info/scheme/edition/e23/"});if(!this.$jskos.compare(t,l.get(e,"inScheme[0]")))return;const i=((await Ge.get(`${o}analyze`,{params:{notation:this.$jskos.notation(e)}})).data||[]).find(r=>this.$jskos.compare(r,e));i&&(i.memberList.forEach(r=>{r&&Z(l.omit(r,["notation"]),{scheme:t,type:"concept"})}),fe(e,"memberList",i.memberList),Y(i.memberList.filter(Boolean)),this.$nextTick(()=>{const r=this.$refs.tabs,c=r.tabs.findIndex(f=>f.title==="coli-ana");e.__DETAILSLOADED__===-1&&c!==-1&&r.activateTab(c)}))},isMemberParentOf(o,e){return o=g(o),e=g(e),!o||!e||!e.broader||!e.broader.length?!1:this.$jskos.compare(o,e.broader[0])},elementForEvent(o){let e=o.target;return e.tagName.toLowerCase()=="path"&&(e=e.parentElement),e=e.nextElementSibling,e},hasNotes(o){let e=["scopeNote","editorialNote","altLabel"],t=!1;for(let a of e)t=t||this.$jskos.languageMapContent(o,a)&&this.$jskos.languageMapContent(o,a).length;return t},copyAndSearch(o){this.$emit("searchConcept",o)},async updateSearchLinks(o){this.searchLinks=await this.$store.dispatch("getSearchLinks",{scheme:g(this.selected.scheme[this.isLeft]),...o})},sortByLanguage(o,e){const t=this.languages.indexOf(o.language),a=this.languages.indexOf(e.language);return a===-1?-1:t===-1?1:t-a}}};var ea=function(){var e=this,t=e._self._c;return e.item!=null?t("div",{staticClass:"conceptDetail"},[t("div",{staticClass:"conceptDetail-ancestors"},[e.ancestors.length>3&&!e.settings.showAllAncestors?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.showAncestors?e.$t("conceptDetail.showLessAncestors"):e.$t("conceptDetail.showAllAncestors"),delay:e.defaults.delay.medium},expression:"{ title: showAncestors ? $t('conceptDetail.showLessAncestors') : $t('conceptDetail.showAllAncestors'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-ancestors-expand",on:{click:function(a){e.showAncestors=!e.showAncestors}}},[t("font-awesome-icon",{attrs:{icon:e.showAncestors?"angle-down":"angle-right"}})],1):e._e(),e._l(e.ancestors.filter(a=>a!=null).reverse(),function(a,i){return t("div",{key:`conceptDetail-${e.isLeft}-ancesters-${a.uri}-${i}`,class:{"concept-mappingsExist":(e.showAncestors||e.settings.showAllAncestors||i==0||i==e.ancestors.length-1||e.ancestors.length<=3)&&e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(a,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(a,e.isLeft)}},[e.showAncestors||e.settings.showAllAncestors||i==0||i==e.ancestors.length-1||e.ancestors.length<=3?t("span",[t("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"level-up-alt"}}),t("item-name",{attrs:{item:a,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1):i==1?t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.showAllAncestors"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.showAllAncestors'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-ancestors-more button",on:{click:function(r){e.showAncestors=!0}}},[t("font-awesome-icon",{staticClass:"u-flip-horizontal",attrs:{icon:"ellipsis-v"}})],1):e._e()])}),e._l((e.ancestors.length==0&&e.item.__BROADERLOADED__?e.broader:[]).filter(a=>a!=null),function(a,i){return t("div",{key:`conceptDetail-${e.isLeft}-broader-${a.uri}-${i}`,class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(a,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(a,e.isLeft)}},[t("font-awesome-icon",{attrs:{icon:"sort-up"}}),t("item-name",{attrs:{item:a,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}})],1)}),e.ancestors.length!=0&&e.ancestors.includes(null)||e.ancestors.length==0&&e.broader.length!=0&&!e.item.__BROADERLOADED__?t("loading-indicator",{attrs:{size:"sm"}}):e._e()],2),t("div",{staticClass:"conceptDetail-name",class:{"concept-mappingsExist":e.loadConceptsMappedStatus&&e.$store.getters.mappedStatus(e.item,e.isLeft),"concept-mappingsDoNotExist":e.loadConceptsMappedStatus&&!e.$store.getters.mappedStatus(e.item,e.isLeft)}},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.clearConcept"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.clearConcept'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button conceptDetail-name-clearButton",on:{click:function(a){return e.setSelected({scheme:e.selected.scheme[e.isLeft],isLeft:e.isLeft})}}},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1),t("item-name",{attrs:{item:e.item,"is-highlighted":!0,"font-size":"normal"}}),t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.defaults.delay.medium},expression:"{ title: $jskos.isContainedIn(item, favoriteConcepts) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"pointer fontSize-verySmall",class:e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?"starFavorite":"starNormal",staticStyle:{"margin-left":"3px"},attrs:{icon:"star"},on:{click:function(a){e.$jskos.isContainedIn(e.item,e.favoriteConcepts)?e.$store.dispatch("removeConceptFromFavorites",e.item):e.$store.dispatch("addConceptToFavorites",e.item)}}}),e.showAddToMappingButton?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.addToMapping"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.addToMapping'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-name-addButton",class:{button:e.showAddToMappingButton},on:{click:function(a){e.addToMapping({concept:e.item,scheme:e.item.inScheme&&e.item.inScheme[0]||e.selected.scheme[e.isLeft],isLeft:e.isLeft})}}},[t("font-awesome-icon",{attrs:{icon:"plus-circle"}})],1):e._e()],1),t("tabs",{ref:"tabs",staticStyle:{"margin-top":"3px",position:"relative"},attrs:{borders:"bottom",size:"sm"}},[e.previousConcept?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.previousConceptTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.previousConceptTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-previousButton"},[t("router-link",{attrs:{to:e.getRouterUrl(e.previousConcept,e.isLeft,!0)}},[t("b-button",{staticClass:"button",attrs:{variant:"light"}},[t("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1)],1)],1):e._e(),e.nextConcept?t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("conceptDetail.nextConceptTooltip"),delay:e.defaults.delay.medium},expression:"{ title: $t('conceptDetail.nextConceptTooltip'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptDetail-nextButton"},[t("router-link",{attrs:{to:e.getRouterUrl(e.nextConcept,e.isLeft,!0)}},[t("b-button",{staticClass:"button",attrs:{variant:"light"}},[t("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1)],1)],1):e._e(),t("tab",{attrs:{title:e.$t("conceptDetail.info")}},[e._l([e.item.uri].concat(e.item.identifier).filter(a=>a!=null),function(a,i){return t("div",{key:`conceptDetail-${e.isLeft}-identifier-${i}`,class:(a.startsWith("http"),"conceptDetail-identifier")},[t("font-awesome-icon",{attrs:{icon:a.startsWith("http")?"link":"id-card"},on:{dblclick:function(r){e.copyToClipboard(e.elementForEvent(r))}}}),t("auto-link",{attrs:{link:a}})],1)}),e._l(e.types,function(a){return t("div",{key:`conceptDetail-${e.isLeft}-type-${a.uri}`,staticClass:"conceptDetail-identifier"},[t("b",[e._v(e._s(e.$t("general.type"))+":")]),e._v(" "+e._s(e.$jskos.prefLabel(a,{language:e.locale}))+" ")])}),e.item.creator&&e.item.creator.length?t("div",{staticClass:"conceptDetail-identifier"},[t("font-awesome-icon",{attrs:{icon:"user"}}),e._v(" "+e._s(e.$jskos.prefLabel(e.item.creator[0]))+" ")],1):e._e(),t("div",{staticClass:"conceptDetail-identifier"},[e.item.created?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "),t("date-string",{attrs:{date:e.item.created}})],1):e._e(),e.item.issued?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.issued"))+":")]),e._v(" "),t("date-string",{attrs:{date:e.item.issued}})],1):e._e(),e.item.modified?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "),t("date-string",{attrs:{date:e.item.modified}})],1):e._e()]),e.item.definition?[t("b",[e._v(e._s(e.$t("conceptDetail.definition"))+":")]),e._l(Object.keys(e.item.definition||{}).map(a=>e.item.definition[a].map(i=>({language:a,definition:i}))).reduce((a,i)=>a.concat(i),[]).filter(a=>a.language!="-").sort(e.sortByLanguage),function({language:a,definition:i},r){return t("div",{key:`conceptDetail-${e.isLeft}-defintion-${a}-${r}`,staticClass:"conceptDetail-identifier"},[e._v(" "+e._s(i)+" "),t("sup",{staticClass:"text-lightGrey"},[e._v(e._s(a))])])})]:e._e()],2),t("tab",{attrs:{title:e.$t("conceptDetail.labels")}},[e._l(Object.keys(e.item.prefLabel||{}).map(a=>({language:a,label:e.item.prefLabel[a]})).filter(a=>a.language!="-").sort(e.sortByLanguage),function({language:a,label:i}){return t("div",{key:`conceptDetail-${e.isLeft}-prefLabel-${a}`,staticClass:"conceptDetail-identifier"},[t("span",{staticClass:"fontWeight-medium",on:{click:function(r){return e.copyAndSearch(i)}}},[e._v(" "+e._s(i)+" ")]),t("sup",{staticClass:"text-lightGrey"},[e._v(e._s(a))])])}),e.$jskos.languageMapContent(e.item,"altLabel")?t("div",{staticClass:"fontWeight-heavy",staticStyle:{"margin-top":"10px"}},[e._v(" "+e._s(e.$t("conceptDetail.altLabels"))+": ")]):e._e(),e._l(Object.keys(e.item.altLabel||{}).map(a=>e.item.altLabel[a].map(i=>({language:a,label:i}))).reduce((a,i)=>a.concat(i),[]).filter(a=>a.language!="-").sort(e.sortByLanguage),function({language:a,label:i},r){return t("div",{key:`conceptDetail-${e.isLeft}-altLabel-${a}-${r}`,staticClass:"conceptDetail-identifier"},[t("span",{on:{click:function(c){return e.copyAndSearch(i)}}},[e._v(" "+e._s(i)+" ")]),t("sup",{staticClass:"text-lightGrey"},[e._v(e._s(a))])])})],2),e._l([[{de:e.gndTerms},e.$t("conceptDetail.gnd")],[e.item.scopeNote,e.$t("conceptDetail.scope")],[e.item.editorialNote,e.$t("conceptDetail.editorial")]].filter(a=>Object.values(a[0]||{}).reduce((i,r)=>i+r.length,0)>0),function([a,i],r){return[t("tab",{key:`conceptDetail-${e.isLeft}-notes-${r}`,staticClass:"conceptDetail-notes",attrs:{title:i,hidden:a==""}},e._l(Object.keys(a||{}).map(c=>a[c].map(f=>({language:c,note:f}))).reduce((c,f)=>c.concat(f),[]).filter(c=>c.language!="-").sort(e.sortByLanguage),function({language:c,note:f},m){return t("div",{key:`conceptDetail-${e.isLeft}-notes-${c}-${m}`,staticClass:"conceptDetail-note"},[t("span",{domProps:{innerHTML:e._s(f)}}),t("sup",{staticClass:"text-lightGrey"},[e._v(" "+e._s(c))])])}),0)]}),e.memberList&&e.memberList.length?t("tab",{attrs:{title:"coli-ana"}},[t("ul",{staticClass:"coli-ana"},[t("li",[t("div"),t("div",[e._v(e._s(e.$jskos.notation(e.item)))]),t("div")]),e._l(e.memberList,function(a,i){return t("li",{key:`${a.uri}-${i}`,class:{"font-weight-bold":e.memberList[i-1]&&e.isMemberParentOf(e.memberList[i-1],a)&&!e.isMemberParentOf(a,e.memberList[i+1])}},[t("div",[e.isMemberParentOf(e.memberList[i-1],a)?t("span",[e._v(" \u21B3 ")]):e._e()]),t("div",[e._v(e._s(a.notation[1]))]),t("div",[t("item-name",{attrs:{item:a,"show-notation":!1,"is-link":!0,"is-left":e.isLeft,"font-size":"small"}}),a.uri.includes("facet")?e._e():t("span",[e._v(" ("),t("item-name",{attrs:{item:a,"show-text":!1,"is-link":!1,"font-size":"small"}}),e._v(") ")],1)],1)])})],2),e.memberListComplete?e._e():t("p",{domProps:{innerHTML:e._s(e.$t("conceptDetail.coliAnaIncomplete"))}}),t("p",{domProps:{innerHTML:e._s(e.$t("conceptDetail.coliAnaInfo",{url:`${e.config["coli-ana"]}?notation=${e.$jskos.notation(e.item)}`}))}})]):e._e(),e.searchLinks.length?t("tab",{key:`conceptDetail-${e.isLeft}-searchLinks`,attrs:{title:e.$t("conceptDetail.searchLinks")}},[t("ul",{staticStyle:{"margin-bottom":"0"}},e._l(e.searchLinks,function(a,i){return t("li",{key:`searchLink-${e.isLeft}-${i}`},[t("a",{attrs:{href:a.url,target:"_blank"}},[e._v(" "+e._s(a.label)+" ")])])}),0)]):e._e()],2),t("item-detail-narrower",{attrs:{narrower:e.item.narrower,"is-left":e.isLeft}})],1):e._e()},ta=[],aa=$(Zt,ea,ta,!1,null,"1e5dea83",null,null),oa=aa.exports;const ia={name:"RegistryName",mixins:[j],props:{registry:{type:Object,default:null},tooltip:{type:Boolean,default:!0}},computed:{registryName(){return Ke({registry:this.registry,locale:this.locale})},tooltipHtml(){return this.$jskos.definition(this.registry,{language:this.locale}).join("<br>")}}};var ra=function(){var e=this,t=e._self._c;return t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.html.right",value:e.tooltip?e.tooltipHtml:"",expression:"tooltip ? tooltipHtml : ''",modifiers:{html:!0,right:!0}}],domProps:{innerHTML:e._s(e.registryName)}})},na=[],sa=$(ia,ra,na,!1,null,null,null,null),la=sa.exports,Te=[{uri:"http://w3id.org/nkos/nkostype#gazetteer",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["gazetteer"],prefLabel:{en:"Gazetteer",de:"Gazetteer"},altLabel:{de:["Ortsverzeichnis","Ortslexikon"]},scopeNote:{en:["geospatial dictionary of named and typed places"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#glossary",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["glossary"],prefLabel:{en:"Glossary",de:"Glossar"},scopeNote:{en:["a collection of textual glosses or of specialized terms with their meanings"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#categorization_schema",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["categorization_schema"],prefLabel:{en:"Categorization schema",de:"Kategorienschema"},scopeNote:{en:["schedule of concepts and pre-coordinated combinations of concepts, arranged by classification"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#classification_schema",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["classification_schema"],prefLabel:{en:"Classification schema",de:"Klassifikation"},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#list",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["list"],prefLabel:{en:"List",de:"Liste"},scopeNote:{en:["a limited set of terms arranged as a simple alphabetical list or in some other logically evident way; containing no relationships of any kind"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#name_authority_list",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["name_authority_list"],prefLabel:{en:"Name authority list",de:"Namensdatei"},scopeNote:{en:["controlled vocabulary for use in naming particular entities consistently"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#ontology",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["ontology"],prefLabel:{en:"Ontology",de:"Ontologie"},scopeNote:{en:["A formal model that allows knowledge to be represented for a specific domain. An ontology describes the types of things that exist (classes), the relationships between them (properties) and the logical ways those classes and properties can be used together (axioms)"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#subject_heading_scheme",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["subject_heading_scheme"],prefLabel:{en:"Subject heading scheme",de:"Schlagwortliste"},scopeNote:{en:["structured vocabulary comprising terms available for subject indexing, plus rules for combining them into pre-coordinated strings of terms where necessary"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#semantic_network",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["semantic_network"],prefLabel:{en:"Semantic network",de:"Semantisches Netz"},scopeNote:{en:["set of terms representing concepts, modeled as the nodes in a network of variable relationship types"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#synonym_ring",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["synonym_ring"],prefLabel:{en:"Synonym ring",de:"Synset"},scopeNote:{en:["set of synonymous or almost synonymous terms, any of which can be used to refer to a particular concept"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#taxonomy",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["taxonomy"],prefLabel:{en:"Taxonomy",de:"Taxonomie"},scopeNote:{en:["scheme of categories and subcategories that can be used to sort and otherwise organize items of knowledge or information"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#terminology",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["terminology"],prefLabel:{en:"Terminology",de:"Terminologie"},scopeNote:{en:["set of designations belonging to one special language [ISO 1087-1:2000, definition 3.5.1]"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#thesaurus",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["thesaurus"],prefLabel:{en:"Thesaurus",de:"Thesaurus"},scopeNote:{en:["controlled and structured vocabulary in which concepts are represented by terms, organized so that relationships between concepts are made explicit, and preferred terms are accompanied by lead-in entries for synonyms or quasi-synonyms"]},narrower:[]},{uri:"http://w3id.org/nkos/nkostype#dictionary",type:["http://www.w3.org/2004/02/skos/core#Concept"],"@context":"http://gbv.github.io/jskos/context.json",inScheme:[{uri:"http://w3id.org/nkos/nkostype",prefLabel:{de:"KOS Typ Vokabular"},type:["http://www.w3.org/2004/02/skos/core#ConceptScheme","http://w3id.org/nkos/nkostype#list"]}],publisher:[{prefLabel:{de:"DCMI/NKOS Task Group"}}],notation:["dictionary"],prefLabel:{en:"Dictionary",de:"W\xF6rterbuch"},scopeNote:{en:["a reference source containing words usually alphabetically arranged along with information about their forms, pronunciations, functions, etymologies, meanings, and syntactical and idiomatic uses"]},narrower:[]}];const ca={name:"SchemeDetail",components:{AutoLink:ke,ItemName:Q,ItemDetailNarrower:Be,RegistryName:la,RegistryNotation:Ue,DateString:Se},mixins:[O],props:{item:{type:Object,default:null},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{kosTypes:Te}},computed:{_item(){return g(this.item)||this.item}},methods:{licenseAttribution(o){let e=o.publisher;return!e||e.length==0?null:{url:e[0].url||e[0].uri,label:this.$jskos.prefLabel(e[0])}}}};var da=function(){var e=this,t=e._self._c;return t("div",{staticClass:"schemeDetail"},[t("item-name",{attrs:{item:e._item,"is-highlighted":!0,"font-size":"normal"}}),e._item.license||e.licenseAttribution(e._item)?t("div",{staticClass:"schemeDetail-license"},[e._l(e._item.license,function(a,i){return t("span",{key:`schemeDetail-${e.isLeft}-license-${i}`},[t("a",{attrs:{href:a.uri,target:"_blank"}},[e.defaults.licenseBadges[a.uri]?t("img",{staticClass:"schemeDetail-licenseBadge",attrs:{src:e.defaults.licenseBadges[a.uri]}}):t("span",[e._v(" "+e._s(a.uri)+" ")])])])}),e.licenseAttribution(e._item)?t("span",[e._v(" by "),e.licenseAttribution(e._item).url?t("a",{attrs:{href:e.licenseAttribution(e._item).url,target:"_blank"}},[t("auto-link",{attrs:{link:e.licenseAttribution(e._item).label}})],1):t("span",[t("auto-link",{attrs:{link:e.licenseAttribution(e._item).label}})],1)]):e._e()],2):e._e(),e._l([e._item.uri].concat(e._item.identifier).filter(a=>a!=null),function(a,i){return t("div",{key:`schemeDetail-${e.isLeft}-identifier-${i}`,staticClass:"schemeDetail-identifier"},[t("font-awesome-icon",{attrs:{icon:a.startsWith("http")?"link":"id-card"}}),t("auto-link",{attrs:{link:a}})],1)}),t("div",{staticClass:"schemeDetail-identifier"},[e._item.created?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.created"))+":")]),e._v(" "),t("date-string",{attrs:{date:e._item.created}})],1):e._e(),e._item.issued?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.issued"))+":")]),e._v(" "),t("date-string",{attrs:{date:e._item.issued}})],1):e._e(),e._item.modified?t("span",[t("b",[e._v(e._s(e.$t("conceptDetail.modified"))+":")]),e._v(" "),t("date-string",{attrs:{date:e._item.modified}})],1):e._e()]),e._item.languages?t("div",{staticClass:"schemeDetail-identifier"},[t("b",[e._v(e._s(e.$t("schemeDetail.languages"))+":")]),e._v(" "+e._s(e._item.languages.join(", "))+" ")]):e._e(),e._item.type&&e._item.type.length>1?t("div",{staticClass:"schemeDetail-identifier"},[t("b",[e._v(e._s(e.$t("general.type"))+":")]),e._l(e._item.type.filter(a=>a!="http://www.w3.org/2004/02/skos/core#ConceptScheme"),function(a,i){return t("span",{key:`schemeDetail-${e.isLeft}-type-${i}`},[e._v(" "+e._s(e.$jskos.prefLabel(e.kosTypes.find(r=>r.uri==a),{language:e.locale})||a)+" "),i!=e._item.type.length-2?t("span",[e._v(" / ")]):e._e()])})],2):e._e(),t("div",{staticClass:"schemeDetail-identifier"},[t("b",[e._v(e._s(e.$t("schemeDetail.registry"))+": ")]),t("registry-notation",{attrs:{registry:e._item._registry,tooltip:!1}}),e._v(" \xA0 "),t("registry-name",{attrs:{registry:e._item._registry,tooltip:!1}})],1),e.$jskos.notation(e._item)?t("div",{staticClass:"schemeDetail-identifier"},[t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.$emit("searchMappings",{fromScheme:e.isLeft?e.$jskos.notation(e._item):null,fromNotation:e.isLeft?"":null,toScheme:e.isLeft?null:e.$jskos.notation(e._item),toNotation:e.isLeft?null:"",direction:"both"})}}},[t("font-awesome-icon",{attrs:{icon:"external-link-square-alt"}}),e._v(e._s(e.$t("schemeDetail.availableMappings"))+" ")],1)]):e._e(),e.settings.showTopConceptsInScheme&&e._item.topConcepts&&e._item.topConcepts.length>0?t("item-detail-narrower",{attrs:{narrower:e._item.topConcepts,"is-left":e.isLeft,text:"Top Concepts:"}}):e.settings.showTopConceptsInScheme?t("div",[e._v(" "+e._s(e.$t("schemeDetail.noTopConcepts"))+" ")]):e._e()],2)},pa=[],fa=$(ca,da,pa,!1,null,"e39d7306",null,null),ha=fa.exports;const ma={name:"ItemDetail",components:{LoadingIndicatorFull:ce,Minimizer:me,ConceptDetail:oa,SchemeDetail:ha,DataModalButton:xe,ComponentSettings:se},mixins:[O,oe,j],props:{item:{type:Object,default:null},isScheme:{type:Boolean,default:!1},isLeft:{type:Boolean,default:!0},settings:{type:Object,default:()=>({})}},data(){return{loading:!1,defaultSettings:{showGndTerms:!0,showSchemeInAncestors:!0,showTopConceptsInScheme:!1,showAllAncestors:!1,showAllNotes:!1}}},computed:{_item(){return g(this.item,{relatedItems:!0})||this.item},type(){return this.$jskos.isConcept(this._item)?"Concept":"Scheme"},internalSettings(){return Object.assign({},this.defaultSettings,{showAllAncestors:this.componentSettings.showAllAncestors},this.settings)},apiUrl(){if(!this._item||!this._item.uri)return null;try{let o;if(this.$jskos.isScheme(this._item)){const e=l.get(this._item,"inScheme[0]._registry")||l.get(this._item,"_registry");o=l.get(e,"_api.schemes")||l.get(e,"_api.data")||l.get(e,"_api.concepts")}else{const e=l.get(this._item,"inScheme[0]._registry");o=l.get(e,"_api.data")||l.get(e,"_getDataUrl")&&e._getDataUrl(this._item)||l.get(e,"_api.concepts")}return!o||!l.isString(o)?null:`${o}${o.includes("?")?"&":"?"}uri=${encodeURIComponent(this._item.uri)}`}catch{return null}}},watch:{_item:function(){this.scrollToTop()}},mounted(){this.scrollToTop()},methods:{droppedConcept(o){this.setSelected({concept:o,isLeft:this.isLeft})},scrollToTop(){Array.prototype.forEach.call(this.$el.getElementsByClassName("itemDetail-content"),o=>{o.scrollTop=0})}}};var ua=function(){var e=this,t=e._self._c;return t("div",{staticClass:"itemDetail",on:{dragover:e.dragOver,drop:e.drop}},[t("minimizer",{attrs:{name:`itemDetail_${e.isLeft}`,text:e.type+" Detail"}}),e._item!=null?t("div",{staticClass:"itemDetail-content"},[t(e.type=="Concept"?"ConceptDetail":"SchemeDetail",{tag:"component",attrs:{item:e._item,"is-left":e.isLeft,settings:e.internalSettings},on:{searchMappings:function(a){return e.$emit("searchMappings",a)},searchConcept:function(a){return e.$emit("searchConcept",a)}}})],1):e.loading?e._e():t("div",{staticClass:"fillAndCenter fontSize-normal fontWeight-heavy"},[e._v(" "+e._s(e.$t("itemDetail.pleaseSelect"))+" ")]),t("component-settings"),t("data-modal-button",{attrs:{data:e._item,"position-right":20,url:e.apiUrl}}),e.loading?t("loading-indicator-full"):e._e()],1)},ga=[],va=$(ma,ua,ga,!1,null,"48a2b09b",null,null),ba=va.exports;const ya={name:"ResizingSlider",mixins:[j],props:{isColumn:{type:Boolean,default:!1}},data(){return{resizing:!1,savedValues:{}}},computed:{flex(){return this.$settings.flex||{}}},watch:{flex(){this.refreshFlex()}},mounted(){this.refreshFlex()},methods:{getSiblings(){let o=this.$el,e=o.parentElement,t=window.getComputedStyle(o),a=t.getPropertyValue("order"),i,r;try{a=parseInt(a)}catch{a=0}for(a>0?(i=e.querySelector(".order"+(a-1)),r=e.querySelector(".order"+(a+1))):(i=o.previousElementSibling,r=o.nextElementSibling);i&&(i.classList.contains("resizingSliderRow")||i.classList.contains("resizingSliderColumn"));)i=i.previousElementSibling;for(;r&&(r.classList.contains("resizingSliderRow")||r.classList.contains("resizingSliderColumn"));)r=r.nextElementSibling;return[i,r]},startResizing(o){let[e,t]=this.getSiblings();if(e==null||t==null)return;let a=e.clientWidth,i=t.clientWidth,r=e.clientHeight,c=t.clientHeight,f=a+i,m=r+c,h=window.getComputedStyle(e),y=window.getComputedStyle(t),C=parseFloat(h.getPropertyValue("flex-grow"))+parseFloat(y.getPropertyValue("flex-grow")),A=parseInt(h.getPropertyValue("min-width")),I=parseInt(y.getPropertyValue("min-width")),N=parseInt(h.getPropertyValue("min-height")),B=parseInt(y.getPropertyValue("min-height")),S=parseInt(l.get(e,"dataset.minimized"))||0,E=parseInt(l.get(t,"dataset.minimized"))||0;if(S+E==2)return;S+E==0&&(this.savedValues.previousWidth=a,this.savedValues.nextWidth=i,this.savedValues.previousHeight=r,this.savedValues.nextHeight=c);let w=this;function T(){document.removeEventListener("mousemove",W),document.onmouseup=null,document.body.style.cursor="auto",document.body.style.userSelect="auto",document.body.style.webkitUserSelect="auto",w.resizing=!1}if(this.resizing){T();return}this.resizing=!0;let U=w.isColumn?o.clientX:o.clientY;document.body.style.cursor=w.isColumn?"col-resize":"row-resize",document.body.style.userSelect="none",document.body.style.webkitUserSelect="none";function W(R){let P=(w.isColumn?R.clientX:R.clientY)-U;if(w.isColumn){let z=a+P,_=i-P;if(z<A||_<I||S+E==1){if(z<=10||_<=10||z>=A*3&&S==1||_>=I*3&&E==1){let L=z<=10||S==1?e:t,F=L.getElementsByClassName("minimizer")[0];if(F.parentElement!=L&&F.parentElement.parentElement!=L)return;let d=F.__vue__;d&&(e.style.flex=w.savedValues.previousWidth/f*C,w.saveFlex(e),t.style.flex=w.savedValues.nextWidth/f*C,w.saveFlex(t),d.toggleMinimize(),T())}return}e.style.flex=z/f*C,w.saveFlex(e),t.style.flex=_/f*C,w.saveFlex(t)}else{let z=r+P,_=c-P;if(z<N||_<B||S+E==1){if(z<=10||_<=10||z>=N*3&&S==1||_>=B*3&&E==1){let L=z<=10||S==1?e:t,F=L.getElementsByClassName("minimizer")[0];if(F.parentElement!=L&&F.parentElement.parentElement!=L)return;let d=F.__vue__;d&&(e.style.flex=w.savedValues.previousHeight/m*C,w.saveFlex(e),t.style.flex=w.savedValues.nextHeight/m*C,w.saveFlex(t),d.toggleMinimize(),T())}return}e.style.flex=z/m*C,w.saveFlex(e),t.style.flex=_/m*C,w.saveFlex(t)}}document.addEventListener("mousemove",W),document.onmouseup=T},saveFlex(o){if(o&&o.id&&o.style){let e=l.cloneDeep(this.$settings.flex);e[o.id]=o.style.flex,this.$store.commit({type:"settings/set",prop:"flex",value:e})}},refreshFlex(){let o=this.getSiblings();for(let e of o)!e||!e.id||this.flex[e.id]!=null&&(e.style.flex=this.flex[e.id])}}};var xa=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.resizingSlider"),delay:e.defaults.delay.medium,placement:e.isColumn?"right":"top"},expression:"{ title: $t('general.resizingSlider'), delay: defaults.delay.medium, placement: isColumn ? 'right' : 'top' }",modifiers:{hover:!0}}],class:{resizingSliderCol:e.isColumn,resizingSliderRow:!e.isColumn},on:{mousedown:e.startResizing}},[t("div",[t("font-awesome-icon",{attrs:{icon:e.isColumn?"ellipsis-v":"ellipsis-h"}})],1)])},wa=[],ka=$(ya,xa,wa,!1,null,"45c1fd94",null,null),Sa=ka.exports;const _a={name:"ConceptSearch",components:{LoadingIndicator:le},mixins:[O,_e,oe,j],props:{isLeft:{type:Boolean,default:!0},scheme:{type:Object,default:null}},data(){return{searchQuery:"",searchResult:[],isOpen:!1,isValid:!1,loading:!1,searchSelected:-1,preventHovering:!1,cancel:null,uniqueID:null,filterPopoverShow:!1}},computed:{_scheme(){return g(this.scheme)||this.scheme},typesForSchemes(){return this.$settings.typesForSchemes},selectedTypes:{get(){let o=Object.keys(this.$settings.typesForSchemes).find(e=>this.$jskos.compare(this._scheme,{uri:e}));return this.$settings.typesForSchemes[o]},set(o){if(!Array.isArray(o))return;let e=Object.keys(this.$settings.typesForSchemes).find(a=>this.$jskos.compare(this._scheme,{uri:a}))||this._scheme.uri,t=l.cloneDeep(this.$settings.typesForSchemes);l.isEqual(o,t[e])||(t[e]=o,this.$store.commit({type:"settings/set",prop:"typesForSchemes",value:t}))}},provider(){return l.get(this._scheme,"_registry")}},watch:{searchQuery:function(o){this.searchSelected=-1,this.cancel!=null&&(this.cancel("There was a newer search query."),this.cancel=null),o==""?(this.loading=!1,this.isOpen=!1):(this.searchResult=["Waiting for you to stop typing..."],this.loading=!0,this.isOpen=!0,this.debouncedGetAnswer()),this.isValid=!1},_scheme:function(o,e){this.$jskos.compare(e,o)||(this.searchQuery="",this.searchResult=[],this.isOpen=!1,this.isValid=!1,this.loading=!1,this.searchSelected=-1),o!=null&&this._loadTypes(o)},typesForSchemes(){this.loading=!0,this.getAnswer()}},created:function(){this.debouncedGetAnswer=l.debounce(this.getAnswer,300),this.uniqueID=this.generateID()},methods:{clickHandlers(){return[{elements:[this.$el],handler:()=>{this.filterPopoverShow||(this.isOpen=!1,this.searchSelected=-1)}},{elements:[document.getElementById(`conceptSearch-filter-${this.isLeft?"left":"right"}`),this.$refs.filterPopover],handler:()=>{this.filterPopoverShow=!1}}]},chooseResult(o){this.closeResults(),this.searchSelected=-1;const e=l.last(this.searchResult[o]);if(!e)return;let t={uri:e,inScheme:[this._scheme]};t=Z(t,{type:"concept",scheme:this._scheme,provider:this.provider}),this.setSelected({concept:t,isLeft:this.isLeft}),document.activeElement!=document.body&&document.activeElement.blur()},closeResults(){this.isOpen=!1},getAnswer:function(){this.searchResult=[];let o=this.searchQuery;const e=this.provider.suggest({search:o,scheme:this._scheme,types:this.selectedTypes});this.cancel=e.cancel,e.then(t=>{o==this.searchQuery&&(this.loading=!1,this.searchResult=l.zip(t[1],t[2],t[3]),this.isValid=!0)}).catch(t=>{if(t.toString().toLowerCase().indexOf("cancel")==-1&&o==this.searchQuery){this.loading=!1,this.isValid=!1;const a=`${this.$t("search.error")} ${this.getErrorMessage(t)}`;this.searchResult=[[a]]}}).then(()=>{if(o==this.searchQuery){let t,a;try{t=new this.$jskos.ConceptScheme(this._scheme),a=t.conceptFromNotation(o)}catch(i){this.$log.warn("ConceptSearch: Error creating concept from query as notation.",i)}a&&!this.searchResult.find(i=>l.last(i)==a.uri)&&this.searchResult.push([`${o} ${this.$t("itemDetail.unknownConcept")}`,"###conceptWithoutData###",a.uri]),this.cancel=null}})},onArrowDown(){this.preventHovering=!0,this.searchSelected>=this.searchResult.length-1?this.searchSelected=0:this.searchSelected+=1,this.scrollSelectedIntoView()},onArrowUp(){this.preventHovering=!0,this.searchSelected<=0?this.searchSelected=this.searchResult.length-1:this.searchSelected-=1,this.scrollSelectedIntoView()},scrollSelectedIntoView(){let o=document.getElementById(this.uniqueID+"-searchResult-"+this.searchSelected);var e=o.getBoundingClientRect(),t=o.parentElement.parentElement.getBoundingClientRect();e.bottom>t.bottom&&o.scrollIntoView(!1),e.top<t.top&&o.scrollIntoView()},onEnter(){let o;this.loading||!this.isValid||this.searchResult.length==0||(this.searchSelected<0||this.searchSelected>=this.searchResult.length?o=0:o=this.searchSelected,this.chooseResult(o))},mouseover(o){this.preventHovering||(this.searchSelected=o)},mousemove(){this.preventHovering=!1},focusSearch(){this.$refs.searchInput.focus(),this.isOpen=this.searchQuery!=""},highlightQueryInResult(o){if(!this.searchQuery.length)return o;let e=this.searchQuery,t=new RegExp(e,"ig"),a=t.exec(o),i=0,r="";for(;a;){let c=a.index;r+=l.escape(o.slice(i,c))+"<span class='conceptSearch-searchHighlight fontWeight-heavy'>"+l.escape(o.slice(c,c+e.length))+"</span>",i=c+e.length,a=t.exec(o)}return r+=l.escape(o.slice(i)),r},setSearchQuery(o,e=!1){this.searchQuery=o,this.$nextTick(()=>{this.isOpen=e}),setTimeout(()=>{e&&this.focusSearch()},10)},_loadTypes(o){qe(o).then(e=>{this.selectedTypes||(this.selectedTypes=e.map(t=>t.uri))})},dragStartResult(o,e){let t=l.last(o),a=Z({uri:t},{scheme:this._scheme,type:"concept"});this.dragStart(a,e)},droppedConcept(o){this.setSearchQuery(this.$jskos.prefLabel(o,{fallbackToUri:!0}))}}};var Ca=function(){var e=this,t=e._self._c;return t("div",{staticClass:"conceptSearch",on:{mousemove:function(a){return e.mousemove()}}},[t("div",{staticClass:"conceptSearch-icon button",on:{click:e.focusSearch}},[t("font-awesome-icon",{attrs:{icon:"search"}})],1),t("div",{staticClass:"conceptSearch-inputWrapper"},[e.isOpen&&!e.loading?t("div",{staticClass:"conceptSearch-resultCount",style:`right: ${e._scheme.types&&e._scheme.types.length?27:10}px;`},[e._v(" "+e._s(e.searchResult.length)+" "+e._s(e.$tc("search.results",e.searchResult.length))+" ")]):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e._scheme.types&&e._scheme.types.length>0,expression:"_scheme.types && _scheme.types.length > 0"}],staticClass:"conceptSearch-filter button",attrs:{id:`conceptSearch-filter-${e.isLeft?"left":"right"}`}},[t("font-awesome-icon",{attrs:{icon:"filter"}})],1),t("b-popover",{attrs:{target:`conceptSearch-filter-${e.isLeft?"left":"right"}`,show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(a){e.filterPopoverShow=a}}},[t("div",{ref:"filterPopover"},[t("b-form-checkbox-group",{staticClass:"conceptSearch-filterCheckboxes",attrs:{stacked:"",size:"sm"},model:{value:e.selectedTypes,callback:function(a){e.selectedTypes=a},expression:"selectedTypes"}},e._l(e._scheme.types,function(a){return t("b-form-checkbox",{key:a.uri,staticClass:"conceptSearch-filterCheckbox",attrs:{value:a.uri}},[e._v(" "+e._s(e.$jskos.prefLabel(a))+" ")])}),1)],1)]),t("b-form-input",{ref:"searchInput",attrs:{placeholder:e.$t("search.placeholder"),size:"sm",autocomplete:"off"},on:{dragover:e.dragOver,drop:function(a){return e.drop(a,e.isLeft)}},nativeOn:{click:function(a){e.isOpen=e.searchQuery!=""},keydown:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"down",40,a.key,["Down","ArrowDown"])?null:(a.preventDefault(),e.onArrowDown.apply(null,arguments))},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"up",38,a.key,["Up","ArrowUp"])?null:(a.preventDefault(),e.onArrowUp.apply(null,arguments))},function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"tab",9,a.key,"Tab")?null:e.closeResults.apply(null,arguments)}],keyup:[function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.onEnter.apply(null,arguments)},function(a){if(!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;e.$refs.searchInput.$el.blur(),e.closeResults()}],focus:function(a){e.isOpen=e.searchQuery!=""}},model:{value:e.searchQuery,callback:function(a){e.searchQuery=a},expression:"searchQuery"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"conceptSearch-results"},[e.loading?t("div",{staticClass:"conceptSearch-loading"},[t("loading-indicator")],1):t("ul",{staticClass:"conceptSearch-results-list"},[e._l(e.searchResult,function(a,i){return t("li",{key:i,staticClass:"conceptSearch-results-item",class:{"conceptSearch-selected":i===e.searchSelected,"font-italic":a[1]=="###conceptWithoutData###"},attrs:{id:e.uniqueID+"-searchResult-"+i,draggable:"true"},on:{dragstart:function(r){return e.dragStartResult(a,r)},dragend:e.dragEnd,click:function(r){return e.chooseResult(i)},mouseover:function(r){return e.mouseover(i)}}},[a[1]=="###conceptWithoutData###"?t("span",{staticClass:"missingDataIndicator"},[e._v(" \u2022 ")]):e._e(),t("span",{domProps:{innerHTML:e._s(e.highlightQueryInResult(a[0]))}})])}),e.searchResult.length==0?t("li",{staticClass:"conceptSearch-results-item"},[t("div",[e._v(e._s(e.$t("search.noResults")))])]):e._e()],2)])],1)])},za=[],$a=$(_a,Ca,za,!1,null,"01c77fcf",null,null),La=$a.exports;const Ma={name:"ConceptSchemeSelectionItem",components:{ItemName:Q},props:{source:{type:Object,required:!0},index:{type:Number,required:!0},favoriteSchemes:{type:Array,required:!0},toggleFavoriteScheme:{type:Function,required:!0},hidePopover:{type:Function,required:!0},isLeft:{type:Boolean,required:!0}},computed:{scheme(){return g(this.source)}}};var Fa=function(){var e=this,t=e._self._c;return t("div",[t("font-awesome-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?e.$t("schemeSelection.starRemove"):e.$t("schemeSelection.starAdd"),delay:e.defaults.delay.medium},expression:"{ title: $jskos.isContainedIn(scheme, favoriteSchemes) ? $t('schemeSelection.starRemove') : $t('schemeSelection.starAdd'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"pointer",class:e.$jskos.isContainedIn(e.scheme,e.favoriteSchemes)?"starFavorite":"starNormal",attrs:{icon:"seedling"},on:{click:function(a){return e.toggleFavoriteScheme(e.scheme)}}}),t("item-name",{attrs:{item:e.scheme,"is-link":!0,"is-left":e.isLeft},nativeOn:{click:function(a){return e.hidePopover.apply(null,arguments)}}})],1)},Ia=[],Ba=$(Ma,Fa,Ia,!1,null,null,null,null),Ta=Ba.exports;const Ea={name:"ConceptSchemeSelection",components:{ItemName:Q,ConceptSearch:La,ComponentSettings:se,VirtualList:ze},mixins:[O,_e,he,j],props:{isLeft:{type:Boolean,default:!0}},data(){return{id:this.generateID(),popoverShown:!1,filterPopoverShow:!1,schemeFilter:"",registryFilter:[],languageFilter:[],typeFilter:[],onlyFavorites:!0,onlyWithConcepts:!1,itemComponent:Ta,shownRegistries:[],shownLanguages:[],shownTypes:[],registryFilterOptions:[],languageFilterOptions:[],typeFilterOptions:[],filteredSchemes:[]}},computed:{scheme(){return g(this.selected.scheme[this.isLeft])},_schemes(){return re(this.schemes)},isFiltered(){return this.schemeFilter!=""||this.registryFilter.length<this.availableRegistries.length||this.languageFilter.length-1<this.availableLanguages.length||this.typeFilter.length-1<this.availableTypes.length||this.onlyFavorites||this.onlyWithConcepts},availableRegistries(){return this.config.registries.filter(o=>o.has.concepts!==!1)},availableLanguages(){return l.uniq([].concat(...this._schemes.map(o=>o.languages||[]))).sort()},availableTypes(){return l.uniq(l.flatten(this._schemes.map(o=>o.type||[]))).filter(o=>o&&o!="http://www.w3.org/2004/02/skos/core#ConceptScheme")},allowFavoriteSchemesFilter(){return!!this.favoriteSchemes.find(o=>this.$jskos.isContainedIn(o,this._schemes))}},watch:{popoverShown(o){o&&l.delay(()=>{this.focusAndSelectInput()},100)},allowFavoriteSchemesFilter(o){o||(this.onlyFavorites=!1)},schemes:{handler(){this.updateProperties()},deep:!0},schemeFilter:{handler(){this.updateProperties()},deep:!0},registryFilter:{handler(){this.updateProperties()},deep:!0},languageFilter:[function(){this.schemeFilter=""},{handler(){this.updateProperties()},deep:!0}],typeFilter:[function(){this.schemeFilter=""},{handler(){this.updateProperties()},deep:!0}],availableRegistries(){this.updateProperties()},onlyFavorites(){this.schemeFilter="",this.updateProperties()},onlyWithConcepts(o){o&&(this.onlyFavorites=!1),this.updateProperties()},favoriteSchemes(){this.updateProperties()}},mounted(){this.updateProperties=l.debounce(this._updateProperties,100),this.enableShortcuts(),this.registryFilter=this.availableRegistries.map(o=>o.uri),this.languageFilter=this.availableLanguages.concat([null]),this.typeFilter=this.availableTypes.concat([null]),this.allowFavoriteSchemesFilter||(this.onlyFavorites=!1)},methods:{clickHandlers(){return[{elements:[this.$refs.popover,document.getElementById(`${this.id}-expandButton`),this.$refs.showAllSchemesLink,document.getElementById(`conceptSchemeSelection-filterButton-${this.id}`),this.$refs.filterPopover,this.$refs.removeAllFiltersLink],handler:()=>{this.hidePopover()}},{elements:[document.getElementById(`conceptSchemeSelection-filterButton-${this.id}`),this.$refs.filterPopover,this.$refs.removeAllFiltersLink],handler:()=>{this.filterPopoverShow=!1}}]},shortcutHandler({action:o,isLeft:e}){if(this.isLeft===e)switch(o){case"openSchemeSelection":this.scheme?this.togglePopover():this.focusAndSelectInput();break;case"openConceptSearch":this.$refs.conceptSearch&&this.$refs.conceptSearch.focusSearch();break}},_updateProperties(){let o,e;o=this._schemes.filter(a=>(this.languageFilter.includes(null)&&!(a.languages||[]).length||l.intersection(a.languages||[],this.languageFilter).length)&&(this.typeFilter.includes(null)&&(a.type||[]).length<=1||l.intersection(a.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(a,this.favoriteSchemes))&&(!this.onlyWithConcepts||this.hasConcepts(a))),this.shownRegistries=this.availableRegistries.filter(a=>o.find(i=>this.$jskos.compareFast(a,i._registry))),o=this._schemes.filter(a=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(i=>this.$jskos.compareFast({uri:i},a._registry)))&&(this.typeFilter.includes(null)&&(a.type||[]).length<=1||l.intersection(a.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(a,this.favoriteSchemes))&&(!this.onlyWithConcepts||this.hasConcepts(a))),this.shownLanguages=l.uniq([].concat(...o.map(a=>a.languages||[]))).sort(),o=this._schemes.filter(a=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(i=>this.$jskos.compareFast({uri:i},a._registry)))&&(this.languageFilter.includes(null)&&!(a.languages||[]).length||l.intersection(a.languages||[],this.languageFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(a,this.favoriteSchemes))&&(!this.onlyWithConcepts||this.hasConcepts(a))),this.shownTypes=l.uniq(l.flatten(o.map(a=>a.type||[]))).filter(a=>a&&a!="http://www.w3.org/2004/02/skos/core#ConceptScheme"),this.registryFilterOptions=this.shownRegistries.map(a=>({value:a.uri,text:this.$jskos.prefLabel(a)})),e=[],this._schemes.find(a=>!a.languages||!a.languages.length)&&e.push({value:null,text:this.$t("schemeSelection.filterOther")}),e=this.shownLanguages.map(a=>({value:a,text:a})).concat(e),this.languageFilterOptions=e,e=[],this._schemes.find(a=>!a.type||a.type.length<=1)&&e.push({value:null,text:this.$t("schemeSelection.filterOther")}),e=this.shownTypes.map(a=>({value:a,text:a})).concat(e);for(let a of e){let i=Te.find(r=>r.uri==a.value);i&&(a.text=this.$jskos.prefLabel(i,{language:this.locale}))}this.typeFilterOptions=e;let t=this.schemeFilter.toLowerCase();if(t){const a=i=>l.flattenDeep(l.concat([],Object.values(i.prefLabel||{}),Object.values(i.altLabel||{}),i.notation||[])).map(r=>r.toLowerCase());this.filteredSchemes=this._schemes.filter(i=>a(i).find(r=>r.includes(t)))}else this.filteredSchemes=this._schemes.filter(a=>(this.registryFilter.length==this.availableRegistries.length||this.registryFilter.find(i=>this.$jskos.compareFast({uri:i},a._registry)))&&(this.languageFilter.includes(null)&&!(a.languages||[]).length||l.intersection(a.languages||[],this.languageFilter).length)&&(this.typeFilter.includes(null)&&(a.type||[]).length<=1||l.intersection(a.type||[],this.typeFilter).length)&&(!this.onlyFavorites||this.$jskos.isContainedIn(a,this.favoriteSchemes))&&(!this.onlyWithConcepts||this.hasConcepts(a)))},clearScheme(){this.setSelected({isLeft:this.isLeft}),l.delay(()=>{this.focusAndSelectInput()},100)},chooseFirst(o){o.preventDefault();const e=this.filteredSchemes[0];!e||(this.setSelected({scheme:e,isLeft:this.isLeft}),this.hidePopover())},setConceptSearchQuery(o,e=!1){this.$refs.conceptSearch&&this.$refs.conceptSearch.setSearchQuery(o,e)},toggleFavoriteScheme(o){this.$jskos.isContainedIn(o,this.favoriteSchemes)?this.$store.dispatch("removeSchemeFromFavorites",o):this.$store.dispatch("addSchemeToFavorites",o),this.focusAndSelectInput()},focusAndSelectInput(){let o=this.$refs.input&&this.$refs.input.$el;o&&(o.focus(),o.select())},showPopover(){this.$root.$emit("bv::show::popover",`${this.id}-expandButton`)},hidePopover(){this.$root.$emit("bv::hide::popover",`${this.id}-expandButton`)},togglePopover(){this.popoverShown?this.hidePopover():this.showPopover()},hasConcepts(o){return!o.concepts||o.concepts.length}}};var Da=function(){var e=this,t=e._self._c;return t("div",{staticClass:"conceptSchemeSelection",staticStyle:{overflow:"visible"},attrs:{id:`conceptSchemeSelection-${e.id}`}},[t("component-settings"),e.scheme?t("div",{staticClass:"conceptSchemeSelection-collapsed"},[t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.popoverShown?e.$t("schemeSelection.popoverHide"):e.$t("schemeSelection.popoverShow"),delay:e.defaults.delay.medium},expression:"{ title: popoverShown ? $t('schemeSelection.popoverHide') : $t('schemeSelection.popoverShow'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"conceptSchemeSelection-expandButton button",attrs:{id:`${e.id}-expandButton`},on:{click:e.togglePopover}},[t("font-awesome-icon",{attrs:{icon:e.popoverShown?"angle-left":"angle-down"}})],1),t("div",{staticClass:"conceptSchemeSelection-schemeName"},[t("item-name",{attrs:{item:e.scheme,"is-link":!0,"is-left":e.isLeft,"font-size":"large"}}),e.scheme.license&&e.scheme.license.length?t("span",{staticStyle:{display:"inline-block",margin:"0px 2px 0px 1px",height:"15px"}},[e.defaults.licenseBadges[e.scheme.license[0].uri]?t("img",{staticStyle:{"vertical-align":"text-top"},attrs:{src:e.defaults.licenseBadges[e.scheme.license[0].uri]}}):e._e()]):e._e(),t("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.clearScheme"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.clearScheme'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],staticClass:"button",staticStyle:{display:"inline-block",margin:"-3px 2px 0px 2px"},on:{click:e.clearScheme}},[t("font-awesome-icon",{attrs:{icon:"times-circle"}})],1)],1),t("concept-search",{ref:"conceptSearch",staticClass:"conceptSchemeSelection-conceptSearch",attrs:{"is-left":e.isLeft,scheme:e.scheme}})],1):e._e(),t(e.scheme==null?"div":"b-popover",{tag:"div",staticClass:"conceptSchemeSelection-popover",attrs:{target:`${e.id}-expandButton`,container:`conceptSchemeSelection-${e.id}`,triggers:"disabled",placement:"leftbottom"},on:{shown:function(a){e.popoverShown=!0},hidden:function(a){e.popoverShown=!1}}},[t("div",{ref:"popover",staticClass:"conceptSchemeSelection-expanded",class:{"conceptSchemeSelection-expanded-div":e.scheme==null,"conceptSchemeSelection-expanded-popover":e.scheme!=null}},[t("div",{staticClass:"componentTitle"},[e._v(" "+e._s(e.isLeft?e.$t("schemeSelection.source"):e.$t("schemeSelection.target"))+" ")]),t("b-form",{attrs:{inline:""},on:{submit:e.chooseFirst}},[t("b-form-input",{ref:"input",staticStyle:{flex:"1","margin-right":"5px"},attrs:{placeholder:e.$t("schemeSelection.schemeFilterPlaceholder"),autocomplete:"off",size:"sm"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:e.hidePopover.apply(null,arguments)}},model:{value:e.schemeFilter,callback:function(a){e.schemeFilter=a},expression:"schemeFilter"}}),t("div",{staticClass:"button",staticStyle:{position:"relative"},attrs:{id:`conceptSchemeSelection-filterButton-${e.id}`}},[t("font-awesome-icon",{attrs:{icon:"filter"}}),e.isFiltered?t("span",{staticClass:"text-success",staticStyle:{position:"absolute",top:"-10px",right:"-5px"}},[e._v(" \u2022 ")]):e._e()],1),t("b-popover",{attrs:{target:`conceptSchemeSelection-filterButton-${e.id}`,show:e.filterPopoverShow,triggers:"click",placement:"auto"},on:{"update:show":function(a){e.filterPopoverShow=a}}},[t("div",{ref:"filterPopover",staticClass:"conceptSchemeSelection-filterPopover scrollable"},[t("p",{staticClass:"fontWeight-heavy"},[e._v(" "+e._s(e.$t("schemeSelection.filter"))+" ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isFiltered,expression:"isFiltered"}]},[t("a",{ref:"removeAllFiltersLink",attrs:{href:""},on:{click:function(a){a.preventDefault(),e.onlyFavorites=!1,e.onlyWithConcepts=!1,e.schemeFilter="",e.registryFilter=e.availableRegistries.map(i=>i.uri),e.languageFilter=e.availableLanguages.concat([null]),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filtersRemove"))+" ")])]),e.allowFavoriteSchemesFilter?t("b-form-checkbox",{attrs:{size:"sm"},model:{value:e.onlyFavorites,callback:function(a){e.onlyFavorites=a},expression:"onlyFavorites"}},[e._v(" "+e._s(e.$t("schemeSelection.filterOnlyFavorites"))+" ")]):e._e(),t("b-form-checkbox",{attrs:{size:"sm"},model:{value:e.onlyWithConcepts,callback:function(a){e.onlyWithConcepts=a},expression:"onlyWithConcepts"}},[e._v(" "+e._s(e.$t("schemeSelection.filterOnlyWithConcepts"))+" ")]),t("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:`conceptSchemeSelection-filterPopover-${e.id}-registryFilterCollapse`,expression:"`conceptSchemeSelection-filterPopover-${id}-registryFilterCollapse`"}],staticClass:"button"},[t("span",{staticClass:"when-opened"},[t("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),t("span",{staticClass:"when-closed"},[t("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.registryFilter"))+" ("+e._s(e.registryFilter.length==e.availableRegistries.length?e.$t("general.all"):e.registryFilter.length)+") ")]),t("b-collapse",{attrs:{id:`conceptSchemeSelection-filterPopover-${e.id}-registryFilterCollapse`}},[t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.registryFilter=e.availableRegistries.map(i=>i.uri)}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("\u2022 "),t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.registryFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.registryFilterOptions,function(a){return t("b-form-checkbox",{key:`conceptSchemeSelection-filterPopover-${e.id}-registryFilter-${a.value}`,staticClass:"fontSize-normal",attrs:{value:a.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.registryFilter,callback:function(i){e.registryFilter=i},expression:"registryFilter"}},[e._v(" "+e._s(a.text)+" ")])})],2),t("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:`conceptSchemeSelection-filterPopover-${e.id}-languageFilterCollapse`,expression:"`conceptSchemeSelection-filterPopover-${id}-languageFilterCollapse`"}],staticClass:"button"},[t("span",{staticClass:"when-opened"},[t("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),t("span",{staticClass:"when-closed"},[t("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.languageFilter"))+" ("+e._s(e.languageFilter.length-1==e.availableLanguages.length?e.$t("general.all"):e.languageFilter.length)+") ")]),t("b-collapse",{attrs:{id:`conceptSchemeSelection-filterPopover-${e.id}-languageFilterCollapse`}},[t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.languageFilter=e.availableLanguages.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("\u2022 "),t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.languageFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.languageFilterOptions,function(a){return t("b-form-checkbox",{key:`conceptSchemeSelection-filterPopover-${e.id}-languageFilter-${a.value}`,staticClass:"fontSize-normal",attrs:{value:a.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.languageFilter,callback:function(i){e.languageFilter=i},expression:"languageFilter"}},[e._v(" "+e._s(a.text)+" ")])})],2),t("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:`conceptSchemeSelection-filterPopover-${e.id}-typeFilterCollapse`,expression:"`conceptSchemeSelection-filterPopover-${id}-typeFilterCollapse`"}],staticClass:"button"},[t("span",{staticClass:"when-opened"},[t("font-awesome-icon",{attrs:{icon:"angle-down"}})],1),t("span",{staticClass:"when-closed"},[t("font-awesome-icon",{attrs:{icon:"angle-right"}})],1),e._v(" "+e._s(e.$t("schemeSelection.typeFilter"))+" ("+e._s(e.typeFilter.length-1==e.availableTypes.length?e.$t("general.all"):e.typeFilter.length)+") ")]),t("b-collapse",{attrs:{id:`conceptSchemeSelection-filterPopover-${e.id}-typeFilterCollapse`}},[t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.filterSelectAll"))+" ")]),e._v("\u2022 "),t("a",{attrs:{href:""},on:{click:function(a){a.preventDefault(),e.typeFilter=[]}}},[e._v(" "+e._s(e.$t("schemeSelection.filterDeselectAll"))+" ")]),e._l(e.typeFilterOptions,function(a){return t("b-form-checkbox",{key:`conceptSchemeSelection-filterPopover-${e.id}-typeFilter-${a.value}`,staticClass:"fontSize-normal",attrs:{value:a.value,size:"sm",stacked:""},on:{change:e.focusAndSelectInput},model:{value:e.typeFilter,callback:function(i){e.typeFilter=i},expression:"typeFilter"}},[e._v(" "+e._s(a.text)+" ")])})],2)],1)])],1),t("virtual-list",{staticClass:"conceptSchemeSelection-schemeList scrollable",attrs:{"data-key":"uri","data-sources":e.filteredSchemes,"data-component":e.itemComponent,keeps:50,"item-class":"conceptSchemeSelection-schemeList-item","extra-props":{isLeft:e.isLeft,hidePopover:e.hidePopover,favoriteSchemes:e.favoriteSchemes,toggleFavoriteScheme:e.toggleFavoriteScheme}}},[t("template",{slot:"footer"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isFiltered&&e.filteredSchemes.length<e.schemes.length,expression:"isFiltered && filteredSchemes.length < schemes.length"}],staticClass:"conceptSchemeSelection-schemeList-item"},[t("a",{ref:"showAllSchemesLink",attrs:{href:""},on:{click:function(a){a.preventDefault(),e.onlyFavorites=!1,e.schemeFilter="",e.registryFilter=e.availableRegistries.map(i=>i.uri),e.languageFilter=e.availableLanguages.concat([null]),e.typeFilter=e.availableTypes.concat([null])}}},[e._v(" "+e._s(e.$t("schemeSelection.showAllSchemes",{count:e.schemes.length}))+" ")])])])],2)],1)])],1)},Oa=[],Aa=$(Ea,Da,Oa,!1,null,"0de9b185",null,null),Na=Aa.exports;Ve.ElementQueries.listen();const ja={name:"App",components:{TheNavbar:Ye,ConceptListWrapper:Vt,ItemDetail:ba,MappingEditor:yt,MappingBrowser:Qe,ResizingSlider:Sa,LoadingIndicatorFull:ce,Minimizer:me,ConceptSchemeSelection:Na},mixins:[ye,O,j,Xe],data(){return{loaded:!1,loading:!1,itemDetailSettings:{left:{showTopConceptsInScheme:!1},right:{showTopConceptsInScheme:!1}},loadFromParametersOnce:l.once(this.loadFromParameters),forceMappingBrowser:!1,forceMappingEditor:!1,repeatLoadBuildInfo:null}},computed:{selectedConceptLeft(){return g(this.selected.concept[!0])},selectedSchemeRight(){return g(this.selected.scheme[!1])},selectedConceptRight(){return g(this.selected.concept[!1])},selectedSchemeLeft(){return g(this.selected.scheme[!0])},settingsLocale(){let o=this.$settings.locale;return(this.config.languages||[]).includes(o)||(o="en"),o}},watch:{$route({query:o},{query:e}){let t=["from","fromScheme","to","toScheme"],a=!1;for(let i of t){let r=e[i],c=o[i],f=r&&g({uri:r}),m=c&&g({uri:c});f&&m?this.$jskos.compareFast(f,m)||(a=!0):r!=c&&(a=!0)}a&&this.loadFromParameters()},selectedConceptLeft:{handler(o,e){l.isEqual(l.get(o,"prefLabel"),l.get(e,"prefLabel"))||this.insertPrefLabel(!0)},deep:!0},selectedSchemeRight(o,e){this.$jskos.compareFast(o,e)||l.delay(()=>{this.insertPrefLabel(!0)},50)},selectedConceptRight:{handler(o,e){l.isEqual(l.get(o,"prefLabel"),l.get(e,"prefLabel"))||this.insertPrefLabel(!1)},deep:!0},selectedSchemeLeft(o,e){this.$jskos.compareFast(o,e)||l.delay(()=>{this.insertPrefLabel(!1)},50)},locale(o,e){o!=e&&this.$store.commit({type:"settings/set",prop:"locale",value:o})},settingsLocale(o){o!=this.locale&&(this.$i18n.locale=o)},user(o,e){if(e!==void 0&&!e&&o){this.alert(this.$t("alerts.loggedIn"),null,"success");const t=this.getNameForIdentity();if(t&&this.$store.commit({type:"settings/set",prop:"creator",value:t}),this.localMappingsRegistry&&this.$jskos.compareFast(this.currentRegistry,this.localMappingsRegistry)){const a=this.config.registries.find(i=>this.$jskos.mappingRegistryIsStored(i)&&!this.$jskos.compareFast(i,this.localMappingsRegistry)&&i.isAuthorizedFor({type:"mappings",action:"create",user:o}));a&&(this.$store.commit({type:"settings/set",prop:"mappingRegistry",value:a.uri}),this.alert(this.$t("alerts.loggedInRegistryChanged",[this.$jskos.prefLabel(a)]),0,"warning",this.$t("alerts.loggedInRegistryChangedUndoButton"),i=>{this.$store.commit({type:"alerts/setCountdown",alert:i,countdown:0}),this.$store.commit({type:"settings/set",prop:"mappingRegistry",value:this.localMappingsRegistry.uri})}))}}else e&&!o?this.alert(this.$t("alerts.loggedOut"),10,"danger",this.$t("settings.logInButton"),()=>{const t=this.$refs.navbar;t&&t.openSettingsTab&&t.openSettingsTab(0)}):e&&o&&e&&e.name&&o&&o.name&&o.uri==this.creator.uri&&this.creatorName===e.name&&this.$store.commit({type:"settings/set",prop:"creator",value:o.name})},userUris(){this.userUris&&this.userUris.length&&(this.userUris.includes(this.creator.uri)||this.$store.commit({type:"settings/set",prop:"creatorUri",value:this.userUris[0]}))},forceMappingBrowser(o){if(o){const e=this.$refs.mappingBrowserMinimizer;e&&(e.minimized=!1)}},selected:{handler(){!this.selected.scheme[!0]&&!this.selected.scheme[!1]?this.forceMappingEditor=!0:this.forceMappingEditor=!1},deep:!0},isPageVisible(o){o?this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.start():this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.stop()},languages(){this.updateLanguagesForSchemeRegistries(),l.delay(()=>{this.insertPrefLabel(!0),this.insertPrefLabel(!1)},100)}},created(){this.load(),setTimeout(async()=>{if(this.localMappingsRegistry){const o=await this.getMappings({registry:this.localMappingsRegistry,limit:1});o._totalCount&&o._totalCount>=500&&this.alert(this.$t("general.tooManyMappings",{count:o._totalCount}),0)}},1e4)},methods:{async load(){const o=new Date;this.loadingGlobal=!0,await this.$store.dispatch("loadConfig",l.get(this.$route,"query.config")),await this.$store.dispatch("settings/load"),this.config.auth&&await this.$store.dispatch("auth/init",this.config.auth),document.title=this.config.title,this.$i18n.locale=this.settingsLocale,await Je(),this.updateLanguagesForSchemeRegistries(),this.favoriteConcepts.forEach(e=>Z(e,{type:"concept"})),Y(this.favoriteConcepts),await this.$store.dispatch("mapping/loadMappingTrash"),this.loaded=!0,this.loadingGlobal=!1,this.loadFromParametersOnce(!0),this.config.autoRefresh.update&&this.enableUpdateCheck();for(let e of this.config.registries)l.isArray(e.schemes)&&(e._jskos.schemes=e.schemes.map(t=>g(t)||t));this.$log.log(`Application loaded in ${(new Date-o)/1e3} seconds.`)},enableUpdateCheck(){this.repeatLoadBuildInfo=Ze.loadBuildInfo({url:"./build-info.json",buildInfo:this.config.buildInfo,interval:this.config.autoRefresh.update,callImmediately:!0,callback:(o,e,t)=>{!o&&t&&e.gitCommit!=t.gitCommit&&(this.alert(this.$t("alerts.newVersionText"),0,"warning",this.$t("alerts.newVersionLink"),()=>{location.reload(!0)}),this.repeatLoadBuildInfo&&this.repeatLoadBuildInfo.stop(),this.repeatLoadBuildInfo=null)}})},insertPrefLabel(o){if(!this.$settings.components.ConceptSchemeSelection.insertPrefLabel[!o])return;let e=this.$jskos.prefLabel(g(this.selected.concept[o]),{fallbackToUri:!1}),t=/^[\s\wäüöÄÜÖß]*\w/.exec(e);this.setConceptSearchQuery(o,t?t[0]:e)},setConceptSearchQuery(o,e,t){let a=l.get(this,`$refs.conceptSchemeSelection${o?"Right":"Left"}[0]`);a&&a.setConceptSearchQuery(e,t)},refresh(o){o=="minimize"&&(this.itemDetailSettings.left.showTopConceptsInScheme=this.conceptListLeft()!=null&&this.conceptListLeft().$el.dataset.minimized=="1",this.itemDetailSettings.right.showTopConceptsInScheme=this.conceptListRight()!=null&&this.conceptListRight().$el.dataset.minimized=="1")},conceptListLeft(){return Array.isArray(this.$refs.conceptListLeft)?this.$refs.conceptListLeft[0]:this.$refs.conceptListLeft},conceptListRight(){return Array.isArray(this.$refs.conceptListRight)?this.$refs.conceptListRight[0]:this.$refs.conceptListRight},swapSides(){let o=this.$route.query;o=Object.assign(o,{from:o.to,fromScheme:o.toScheme,to:o.from,toScheme:o.fromScheme}),this.$router.push({query:o}),this.loadFromParameters(),l.delay(()=>{this.insertPrefLabel(!0),this.insertPrefLabel(!1)},300);let e=t=>{let a=l.get(t,"__ISOPEN__.true",!1),i=l.get(t,"__ISOPEN__.false",!1);if(this.open(t,!0,i),this.open(t,!1,a),t.narrower&&!t.narrower.includes(null))for(let r of t.narrower)e(r)};for(let t of l.uniq([o.fromScheme,o.toScheme])){let a=l.get(we(t),"topConcepts");for(let i of a||[])e(i)}},async loadFromParameters(o=!1){this.loading=!0;const e=this.$route.query,t={scheme:{true:e.fromScheme,false:e.toScheme},concept:{true:e.from,false:e.to}},a=async r=>{let c=t.scheme[r],f=null;c&&(f=g({uri:c}));let m=null;f&&t.concept[r]&&(m=Z({uri:t.concept[r]},{scheme:f,type:"concept"}));try{await this.setSelected({concept:m,scheme:f,isLeft:r,noQueryRefresh:!0,noLoading:!0})}catch(h){this.$log.warn(h)}},i=async()=>{if(e.mapping||e.mappingUri||e.mappingIdentifier){let r=null;if(e.mapping)try{r=this.adjustMapping(this.$jskos.normalize(JSON.parse(e.mapping)))}catch(h){this.$log.warn("Error decoding mapping from URL parameter:",h)}l.isEqual(r,{})&&(r=null);let c=[];try{e.mappingUri?c.push(await this.getMapping({uri:e.mappingUri})):e.mappingIdentifier&&(c=await this.getMappings({identifier:e.mappingIdentifier}))}catch(h){this.$log.warn("Error loading mapping from URL parameter:",h)}c=c.filter(Boolean);let f=r,m=null;c.length&&(m=c.find(h=>l.get(h,"_registry").isAuthorizedFor&&l.get(h,"_registry").isAuthorizedFor({type:"mappings",action:"create",user:this.user}))||c[0],f=f||this.adjustMapping(this.$jskos.copyDeep(m))),this.$store.commit({type:"mapping/set",mapping:f,original:m,noQueryRefresh:!0}),Y(this.$jskos.conceptsOfMapping(f)),f&&o&&(this.forceMappingBrowser=!0)}};if(await Promise.all([a(!0),a(!1),i()]),this.loading=!1,et(this.$store),o)if(e.search){let r=JSON.parse(e.search);this.forceMappingBrowser=!0,this.searchMappings(r)}else e.concordances!==void 0?this.showConcordances():(e.mappingUri||e.mappingIdentifier)&&(this.forceMappingBrowser=!0,this.searchMappings())},searchMappings(o){let e=this.$refs.mappingBrowser;e&&e.searchWithParams&&e.searchWithParams(o)},showMappingSearch(){this.forceMappingBrowser=!0,this.searchMappings({})},showConcordances(){let o=this.$refs.mappingBrowser;if(!o){this.$log.warn("Could not show concordances because MappingBrowser component was not found.");return}if(o.concordancesLoaded)o.tabIndexes.concordances!=null&&(this.forceMappingBrowser=!0,o.tab=o.tabIndexes.concordances);else{this.loadingGlobal=!0;let e;e=this.$watch(()=>o.concordancesLoaded,()=>{this.loadingGlobal=!1,o.tabIndexes.concordances!=null&&(this.forceMappingBrowser=!0,o.tab=o.tabIndexes.concordances),e&&e()})}},updateLanguagesForSchemeRegistries(){for(let o of this.schemes)o=g(o),o._registry&&(o._registry.languages=this.languages)}}};var Ra=function(){var e=this,t=e._self._c;return t("div",{staticClass:"font-default",attrs:{id:"app"}},[t("div",{staticClass:"alertsContainer"},e._l(e.$store.state.alerts.alerts,function(a,i){return t("b-alert",{key:i,staticStyle:{display:"flex"},attrs:{variant:a.variant,show:a.countdown||!a.shouldCountdown,dismissible:!a.shouldCountdown,fade:""},on:{dismissed:function(r){return e.$store.commit({type:"alerts/setCountdown",alert:a,countdown:0})},"dismiss-count-down":function(r){return e.$store.commit({type:"alerts/setCountdown",alert:a,countdown:r})}}},[t("div",{staticStyle:{flex:"1"},domProps:{innerHTML:e._s(a.text)}}),a.buttonText?t("div",{staticClass:"fontWeight-heavy"},[t("a",{attrs:{href:""},domProps:{innerHTML:e._s(a.buttonText)},on:{click:function(r){return r.preventDefault(),a.buttonHandler(a,r)}}})]):e._e()])}),1),e.loadingGlobal||e.loading?t("loading-indicator-full"):e._e(),e.loaded?[t("the-navbar",{ref:"navbar"}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1],expression:"selected.scheme[true] || selected.scheme[false]"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",value:{title:e.$t("general.swapSides"),delay:e.defaults.delay.medium},expression:"{ title: $t('general.swapSides'), delay: defaults.delay.medium }",modifiers:{hover:!0}}],attrs:{id:"swapSides"},on:{click:e.swapSides}},[t("font-awesome-icon",{attrs:{icon:"exchange-alt"}})],1),t("div",{staticClass:"main"},[e.config.error?t("div",{staticClass:"flexbox-row configError fontSize-large"},[t("div",{domProps:{innerHTML:e._s(e.$t(`general.${e.config.error}`,e.config))}})]):e.schemes.length?t("div",{staticClass:"flexbox-row"},[e._l([!0,!1],function(a,i){return t("div",{key:"browser-"+i,staticClass:"browser mainComponent",class:{order1:a,order5:!a},attrs:{id:"browserComponent_"+a}},[t("minimizer",{attrs:{name:`browserComponent_${a}`,"is-column":!0}}),t("concept-scheme-selection",{ref:a?"conceptSchemeSelectionLeft":"conceptSchemeSelectionRight",refInFor:!0,staticClass:"mainComponent visualComponent",style:e.selected.scheme[a]!=null?"":"flex: 1;",attrs:{"is-left":a}}),e.selected.scheme[a]!=null?t("div",{staticClass:"conceptBrowser"},[t("item-detail",{staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemDetail",attrs:{id:"itemDetailComponent_"+a,item:e.selected.concept[a]||e.selected.scheme[a],"is-left":a,settings:e.itemDetailSettings[a?"left":"right"]},on:{searchMappings:function(r){return e.searchMappings(r)},searchConcept:function(r){return e.setConceptSearchQuery(a,r,!0)}}}),t("resizing-slider"),!(a?e.selectedSchemeLeft:e.selectedSchemeRight).concepts||(a?e.selectedSchemeLeft:e.selectedSchemeRight).concepts.length?t("concept-list-wrapper",{ref:a?"conceptListLeft":"conceptListRight",refInFor:!0,staticClass:"mainComponent visualComponent conceptBrowserItem conceptBrowserItemList",attrs:{id:"conceptListComponent_"+a,"is-left":a}}):e._e()],1):e._e()],1)}),e.mappingRegistries.length>0?t("resizing-slider",{staticClass:"order2",attrs:{"is-column":!0}}):e._e(),e.mappingRegistries.length>0?t("div",{staticClass:"mappingTool order3",attrs:{id:"mappingTool"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0||!e.forceMappingBrowser,expression:"selected.scheme[true] || selected.scheme[false] || (forceMappingBrowser && $store.getters['mapping/getConcepts']().length > 0) || !forceMappingBrowser"}],staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingEditorComponent"}},[e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0?t("mapping-editor"):t("div",{staticClass:"placeholderComponentCenter"},[t("div",{staticClass:"fontWeight-heavy fontSize-large"},[t("p",[e._v(e._s(e.$t("general.welcome")))]),t("p",[t("a",{attrs:{href:`./user-manual-${e.locale}.html`,target:"_blank"}},[e._v(e._s(e.$t("general.manual")))]),e._v(" - "),t("a",{attrs:{href:"https://gbv.github.io/cocoda/",target:"_blank"}},[e._v(e._s(e.$t("general.documentation")))]),e._v(" - "),t("a",{attrs:{href:"https://github.com/gbv/cocoda",target:"_blank"}},[e._v(e._s(e.$t("general.github")))])]),e.config.feedbackUrl?t("p",[t("br"),t("a",{attrs:{href:e.config.feedbackUrl,target:"_blank"}},[e._v(e._s(e.$t("general.feedback")))]),t("br"),e._v(" "+e._s(e.$t("general.feedback2"))+" ")]):e._e(),e.forceMappingBrowser?e._e():t("hr"),e.forceMappingBrowser?e._e():t("p",[e.$refs.mappingBrowser&&e.$refs.mappingBrowser.tabIndexes&&e.$refs.mappingBrowser.tabIndexes.concordances!=null?t("span",[t("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),e.showConcordances.apply(null,arguments)}}},[e._v(e._s(e.$t("general.showConcordances")))]),e._v(" - ")]):e._e(),t("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),e.showMappingSearch.apply(null,arguments)}}},[e._v(e._s(e.$t("general.showMappingSearch")))])])])]),t("minimizer",{directives:[{name:"show",rawName:"v-show",value:!e.forceMappingEditor,expression:"!forceMappingEditor"}],ref:"mappingEditorMinimizer",attrs:{name:"mappingEditorComponent",text:e.$t("mappingEditor.title"),"force-minimized":e.forceMappingEditor?!1:null}})],1),t("resizing-slider",{directives:[{name:"show",rawName:"v-show",value:(e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser)&&(e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser&&e.$store.getters["mapping/getConcepts"]().length>0||!e.forceMappingBrowser),expression:"(selected.scheme[true] || selected.scheme[false] || forceMappingBrowser) && (selected.scheme[true] || selected.scheme[false] || (forceMappingBrowser && $store.getters['mapping/getConcepts']().length > 0) || !forceMappingBrowser)"}],attrs:{"cocoda-red":!0}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.scheme[!0]||e.selected.scheme[!1]||e.forceMappingBrowser,expression:"selected.scheme[true] || selected.scheme[false] || forceMappingBrowser"}],staticClass:"mappingToolItem mainComponent visualComponent",attrs:{id:"mappingBrowserComponent"}},[t("mapping-browser",{ref:"mappingBrowser"}),t("minimizer",{ref:"mappingBrowserMinimizer",attrs:{name:"mappingBrowserComponent",text:e.$t("mappingBrowser.title")}})],1)],1):e._e(),e.mappingRegistries.length>0?t("resizing-slider",{staticClass:"order4",attrs:{"is-column":!0}}):e._e()],2):e._e()])]:e._e()],2)},Pa=[],Ha=$(ja,Ra,Pa,!1,null,null,null,null),Wa=Ha.exports;new tt({store:at,router:ot,i18n:it,render:o=>o(Wa)}).$mount("#app");
